{"version":3,"sources":["ErrorCatcher.jsx","i18n/ca-es.lang.js","i18n/es-es.lang.js","i18n/en-en.lang.js","i18n/pl-pl.lang.js","i18n/nb-no.lang.js","i18n/available.js","MenuItems.jsx","App.js","Menu.jsx","ModalRouter.jsx","loading.svg","serviceWorker.js","Widget/Actions.jsx","Widget/Menu.jsx","Widget/Widget.jsx","Widget/DataContext.js","Widget/withPropHandler.jsx","Loading.jsx","Widget/DataContextProvider.jsx","Widget/MenuAddWidget.jsx","Backend/Base/Common.js","Backend/Base/Cache.js","Backend/Maps/MapDataStatic.js","Backend/Maps/index.js","Widget/Widgets/Map/MapImage.jsx","Widget/Widgets/Map/Edit.jsx","Widget/Widgets/Map/Legend.jsx","Widget/Widgets/Map/Widget.jsx","Widget/Widgets/Map/index.js","Backend/Charts/index.js","Widget/Widgets/Chart/Chart.js","Widget/Widgets/Chart/EditRegion.jsx","Widget/Widgets/Chart/Edit.jsx","Widget/Widgets/Chart/Widget.jsx","Widget/Widgets/Chart/index.js","Widget/Widgets/index.js","Throtle.js","Slider.jsx","Widget/List.jsx","About.jsx","Language.jsx","Dashboard.jsx","index.js"],"names":["ErrorCatcher","props","reloadApp","sendEvent","window","location","reload","state","hasError","errorMessage","errorStack","info","error","this","setState","componentStack","event","origin","t","onClick","style","padding","icon","faRefresh","margin","textAlign","whiteSpace","children","message","stack","React","PureComponent","defaultProps","translate","common","locale","name","App","Copyright","Menu","ModalRouter","About","Language","Help","WidgetsList","MenuAddWidget","PlayPause","Widget","key","label","en_en","value","ca_es","es_es","pl_pl","nb_no","ListItemLink","primary","to","renderLink","useMemo","forwardRef","itemProps","ref","button","component","title","MainMenuItems","fontSize","faAbout","faLanguage","SecondaryMenuItems","AppHelmet","useTranslate","titleTemplate","defaultTitle","lang","language","AppProviders","translations","className","id","handleNewServiceWorker","registration","detail","newServiceWorkerDetected","handleLoadNewServiceWorkerAccept","onLoadNewServiceWorkerAccept","handleLanguageChange","handleThemeChange","theme","handleTutorialSeenChange","tutorialSeen","decoded","decodeURIComponent","global","hash","replace","languageNav","navigator","toLowerCase","initializing","available","find","document","addEventListener","removeEventListener","_language","parent","prefix","blacklist","onParentStateHydrated","onLanguageChange","onThemeChange","onTutorialSeen","Component","useStyles","makeStyles","toolbarIcon","display","alignItems","justifyContent","mixins","toolbar","flexGrow","drawerPaper","position","width","transition","transitions","create","easing","sharp","duration","enteringScreen","drawerPaperClose","overflowX","leavingScreen","spacing","breakpoints","up","updateItem","color","MenuContent","classes","edge","aria-label","handleDrawerClose","variant","noWrap","handleDrawerOpen","open","useTheme","isBig","useMediaQuery","DrawerComponent","Drawer","SwipeableDrawer","iOS","process","browser","test","userAgent","toggleDrawer","type","anchor","onClose","onOpen","disableBackdropTransition","disableDiscovery","paper","clsx","e","preventDefault","faUpgrade","CloseModal","history","console","log","setTimeout","push","ModalRouterInner","openModal","modalIsOpen","closeModal","propsClose","path","timer","undefined","handleHistoryChange","action","getPathState","autoForce","forced","force","length","initialPath","unlisten","listen","clearTimeout","prevProps","prevState","fullScreen","aria-labelledby","aria-describedby","pathname","render","autoFocus","ModalRouterInnerWithClasses","down","rest","module","exports","isLocalhost","Boolean","hostname","match","register","config","URL","href","swUrl","fetch","headers","then","response","contentType","get","status","indexOf","serviceWorker","ready","unregister","registerValidSW","catch","checkValidServiceWorker","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","WidgetMenuItem","option","MenuItem","ListItemIcon","ListItemText","options","restProps","useState","anchorEl","setAnchorEl","handleClose","handleClickElement","IconButton","aria-controls","aria-haspopup","currentTarget","faEllipsisV","keepMounted","PaperProps","Object","keys","filter","map","DraggableResponsiveDialogUntranslated","handleClickOpen","sections","Content","Title","Dialog","TransitionComponent","Draggable","DialogTitle","cursor","DialogContent","DialogActions","Button","DraggableResponsiveDialog","withFullScreen","root","height","withWidget","sectionsOrig","remove","faTrash","onRemove","startIcon","View","view","indexValues","Card","CardHeader","subheader","subtitle","CardContent","WidgetDataContext","createContext","withPropHandler","defaults","WithPropHandler","dataHandler","data","forwardedRef","onChangeData","restData","allData","assign","Consumer","forwarded","Loading","alt","src","loading","LocalStorageProvider","stopInitializing","Provider","RouterProvider","historyPush","newPath","paramsToString","componentDidMount","params","widgets","componentWillUnmount","paramsFilter","RouterSwitchWithPropHandler","pathFilter","propsRoute","processedParams","ContextProvider","onAdd","Tooltip","Fab","transformOrigin","vertical","horizontal","noop","Common","AbortController","handleFetchErrors","ok","Error","statusText","catchFetchErrors","err","onError","abort","hashStr","str","char","charCodeAt","reduce","int","hashTmp","FetchCacheElement","url","signal","result","lastModified","invalidated","listeners","cleanFetch","forEach","listener","addListener","Promise","resolve","reject","removeListener","found","index","l","splice","warning","processSuccessFetch","getLastModifiedFromResponse","Date","callback","json","checkIfNeedUpdate","method","date","invalidate","cache","freeze","MapStaticHost","days","MapaComarques","MapaMunicipis","comarcaEdat","comarcaPcrpos","comarcaRisc","comarcaRt","comarcaTaxa_conf","comarcaTaxapcr","municipiEdat","municipiPcrpos","municipiRisc","municipiRt","MapDataStatic","metadata","risc","colors","taxa_conf","rt","edat","pcrpos","taxapcr","kind","Comarca","svg","values","Municipi","MapDataHandler","timerDataUpdate","officialUpdateTime","split","checkUpdate","updateNeeded","updateAll","a","kinds","updateIfNeeded","cancelUpdateSchedule","scheduleNextUpdate","millis","recursive","nextMillis","millisToNextUpdate","updated","now","millisTillSchedulle","getFullYear","getMonth","getDate","meta","metaColors","metaTitle","metaLabel","metaName","fallback","MapImage","wrapperNodeSVG","createRef","getSVG","current","svgWrapper","querySelector","isSVGMounted","get_color_fons","valor","c","setColorBackground","valors","elem","fill","omplir_colors","bind","getTipContent","element","getAttribute","setTooltipData","dataFor","querySelectorAll","setAttribute","beforeInjection","afterInjection","ReactTooltip","rebuild","updateColorsIfPossible","mapSrc","role","evalScripts","renumerateIRIElements","getContent","dies","formControl","minWidth","selectEmpty","marginTop","Selector","help","FormControl","required","InputLabel","htmlFor","Select","native","inputProps","FormHelperText","MapSelectorOptions","MapData","MapSelector","MapValueSelectorOptions","MapValueSelector","Edit","onChangeMapKind","target","onChangeMapValue","mapKind","mapValue","onChange","Divider","Legend","paddingRight","nom","backgroundColor","border","MapWrapper","faMap","mapData","edit","faEdit","legend","faLegend","getMeta","updateData","cancelDataUpdate","mapKindDefault","mapValueDefault","paddingTop","flex","ChartStaticHost","ChartDataStaticURL","ChartDataBase","ChartDataHandler","divisions","populations","indexData","parseIndex","Set","territori","poblacio","active","findBreadcrumb","node","compare","child","findChild","list","findInitialNode","division","population","link","initialLink","includes","warn","GraphFromDataset","grafic_risc_iepg","graph","d","v","x","bottom","right","left","syncId","dataKey","dot","stroke","strokeWidth","y","strokeDasharray","angle","dx","dy","grafic_extensio","diesFull","dateParams","reverse","Number","fillDays","v0","v1","v2","Chart","dataset","ChartDataset","maxWidth","RecursiveTreeView","chartsIndex","chartData","ChartData","initialNode","TreeView","defaultCollapseIcon","defaultExpandIcon","expanded","selected","onNodeSelect","renderTree","nodes","TreeItem","nodeId","Array","isArray","labelFixed","transform","marginBottom","FormDecorators","fixTree","ChartDivisionSelector","ChartDivisionSelectorOptions","ChartPopulationSelector","ChartPopulationSelectorOptions","ChartDatasetSelector","ChartDatasetSelectorOptions","onChangeChartDivision","onChangeChartPopulation","onChangeChartDataset","onChangeChartRegion","chartDivision","chartPopulation","chartDataset","chartRegion","ChartWrapper","faChart","findRegion","region","f1","f2","onChangeChart","WidgetsTypes","MapWidget","ChartWidget","Throtle","clear","timeout","func","start","popper","zIndex","tooltip","ValueLabelComponent","enterTouchDelay","placement","arrow","PlayPauseButtonUntranslated","isPlaying","onPause","onPlay","checked","borderLeftColor","PlayPauseButton","Slider","clearTimer","setTimer","updatePlay","max","playPause","restClasses","step","min","S4","Math","random","toString","substring","marks","marksSmall","widgetsIds","throtle","updateIDs","onSetDate","run","sliderTipFormatter","widgetType","w","idElement","widgetsNew","i","payload","isLast","day","showMarkLabels","fixedPaper","fixed","Paper","elevation","appBarSpacer","sliderContainer","addButton","sliderRoot","valueLabelFormat","getAriaValueText","valueLabelDisplay","Grid","container","widgetsContainer","widget","item","xs","sm","md","lg","WidgetsListWithPropHandler","withStyles","overflow","flexDirection","top","paddingBottom","marginLeft","marginRight","boxShadow","borderRadius","withShowMarkLabels","WidgetsListWithContextProviders","widgetsParsed","JSON","parse","encodeURIComponent","stringify","join","rel","filteredLanguages","languages","concat","RadioGroup","ele","FormControlLabel","control","Radio","withErrorCatcher","Typography","align","Link","AppThemeProvider","prefersDarkMode","createMuiTheme","palette","ThemeProvider","CssBaseline","appBar","drawer","appBarShift","menuButton","menuButtonHidden","content","RoutesModal","routeProps","exact","setOpen","AppBar","Toolbar","Container","Box","pt","ReactDOM","StrictMode","preventDevToolsReloadLoop","waiting","postMessage","getElementById","CustomEvent","dispatchEvent"],"mappings":"4KAUMA,E,kDAEJ,WAAYC,GAAQ,IAAD,8BACjB,cAAMA,IA4BRC,UAAY,WACV,EAAKC,UAAU,qBAGfC,OAAOC,SAASC,UA/BhB,EAAKC,MAAQ,CACXC,UAAU,EACVC,aAAc,GACdC,WAAY,GACZC,KAAM,IANS,E,8DAoBDC,EAAOD,GAEvBE,KAAKC,SAAS,CACZH,KAAMA,EAAKI,iBAGbF,KAAKV,UAAU,qB,gCAWPa,GACRH,KAAKZ,MAAME,UAAUa,EAAOH,KAAKZ,MAAMgB,OAAQJ,KAAKN,MAAME,gB,+BAI1D,GAAII,KAAKN,MAAMC,SAAU,CAAC,IAChBU,EAAML,KAAKZ,MAAXiB,EADe,EAEcL,KAAKN,MAAlCE,EAFe,EAEfA,aAAcC,EAFC,EAEDA,WAGtB,OACE,oCACE,4BAAMQ,EAAE,4BACR,4BACEC,QAAUN,KAAKX,UACfkB,MAAO,CAAEC,QAAS,QAElB,kBAAC,IAAD,CACEC,KAAOC,IACPH,MAAO,CAAEI,OAAQ,mBAEjBN,EAAE,6CAEN,yBAAKE,MAAO,CAAEK,UAAW,SACvB,4BAAMhB,GACN,6BAASW,MAAO,CAAEM,WAAY,aAC1BhB,KAOZ,OAAOG,KAAKZ,MAAM0B,Y,gDA5DYf,GAE9B,MAAO,CACLJ,UAAU,EACVC,aAAcG,EAAMgB,QACpBlB,WAAYE,EAAMiB,W,GAjBGC,IAAMC,eA4EjC/B,EAAagC,aAAe,CAC1Bf,OAAQ,UACRd,UAAW,cAQE8B,wBAAU,eAAVA,CAA0BjC,I,4CChGnCkC,EAAS,CACX,0BAA2B,+BAC3B,aAAc,cACd,WAAc,iBACd,MAAS,QACT,MAAS,aACT,SAAY,SACZ,KAAQ,QACR,IAAO,KACP,GAAM,KACN,GAAM,KAGK,GACbC,OAAQ,KACRC,KAAM,YAENC,IAAI,eACCH,GAGLI,UAAU,eACLJ,EADI,CAEP,kBAAmB,iBAGrBlC,aAAa,eACRkC,EADO,CAEV,0BAA2B,kCAC3B,2CAA4C,sDAG9CK,KAAK,eACAL,EADD,CAEF,KAAQ,UACR,UAAW,cACX,wBAAyB,+BAG3BM,YAAY,eACPN,GAGLO,MAAM,eACDP,EADA,CAEH,gFAAiF,2FACjF,6IAA8I,qJAC9I,yBAA0B,6BAC1B,yCAA0C,gDAC1C,wFAAyF,2FACzF,sDAAuD,wEACvD,6BAA8B,kCAC9B,SAAY,gBACZ,gDAAiD,8CACjD,eAAgB,kBAChB,yBAA0B,+BAC1B,6CAA8C,4CAC9C,8BAA+B,qCAC/B,qCAAsC,0DACtC,kCAAmC,8CACnC,iCAAkC,2CAClC,gBAAiB,eACjB,kBAAmB,wCACnB,4BAA6B,yCAG/BQ,SAAQ,eACHR,GAGLS,KAAK,eACAT,GAGLU,YAAY,eACPV,GAGLW,cAAc,eACTX,EADQ,CAEX,IAAO,OACP,MAAS,YACT,cAAe,uBACf,IAAO,YAGTY,UAAU,eACLZ,EADI,CAEP,qBAAsB,oCACtB,KAAQ,aACR,MAAS,UAGXa,OAAO,eACFb,EADC,CAEJ,OAAU,UACV,OAAU,UACV,UAAW,YACX,kBAAmB,2BACnB,KAAQ,QACR,KAAQ,QACR,OAAU,WACV,sBAAuB,6BACvB,wBAAyB,oCAG3B,kBAAmB,CACjB,KAAQ,QACR,kCAAmC,2CACnC,OAAU,SACV,yBAA0B,oCAG5B,oBAAqB,CACnB,SAAY,yBACZ,mCAAoC,8CACpC,WAAc,cACd,wBAAyB,4BACzB,QAAW,mBACX,qBAAsB,wCACtB,cAAY,cACZ,YAAa,YACb,OAAU,WACV,oBAAqB,2BC3HnBA,EAAS,CACX,0BAA2B,8BAC3B,aAAc,cACd,WAAc,gBACd,MAAS,SACT,MAAS,WACT,SAAY,SACZ,KAAQ,QACR,IAAO,QACP,GAAM,KACN,GAAM,KAGK,GACbC,OAAQ,KACRC,KAAM,aAENC,IAAI,eACCH,GAGLI,UAAU,eACLJ,EADI,CAEP,kBAAmB,wBAGrBlC,aAAa,eACRkC,EADO,CAEV,0BAA2B,qBAC3B,2CAA4C,qDAG9CK,KAAK,eACAL,EADD,CAEF,KAAQ,UACR,UAAW,kBACX,wBAAyB,2CAG3BM,YAAY,eACPN,GAGLO,MAAM,eACDP,EADA,CAEH,gFAAiF,+FACjF,6IAA8I,4JAC9I,yBAA0B,4BAC1B,yCAA0C,wDAC1C,wFAAyF,0GACzF,sDAAuD,gGACvD,6BAA8B,iCAC9B,SAAY,YACZ,gDAAiD,kDACjD,eAAgB,gBAChB,yBAA0B,8BAC1B,6CAA8C,iDAC9C,8BAA+B,yCAC/B,qCAAsC,yCACtC,kCAAmC,+CACnC,iCAAkC,mCAClC,gBAAiB,kBACjB,kBAAmB,mBACnB,4BAA6B,2CAG/BQ,SAAS,eACJR,GAGLS,KAAK,eACAT,GAGLU,YAAY,eACPV,GAGLW,cAAc,eACTX,EADQ,CAEX,IAAO,OACP,MAAS,aACT,cAAe,0BACf,IAAO,cAGTY,UAAU,eACLZ,EADI,CAEP,qBAAsB,wCACtB,KAAQ,aACR,MAAS,YAGXa,OAAO,eACFb,EADC,CAEJ,OAAU,WACV,OAAU,WACV,UAAW,YACX,kBAAmB,8BACnB,KAAQ,MACR,KAAQ,SACR,OAAU,UACV,sBAAuB,+BACvB,wBAAyB,uCAG3B,kBAAmB,CACjB,KAAQ,OACR,kCAAmC,4CACnC,OAAU,UACV,yBAA0B,qCAG5B,oBAAqB,CACnB,SAAY,0BACZ,mCAAoC,gDACpC,WAAc,eACd,wBAAyB,8BACzB,QAAW,oBACX,qBAAsB,0CACtB,cAAY,eACZ,YAAa,cACb,OAAU,YACV,oBAAqB,6BC3HnBA,EAAS,CACX,0BAA2B,0BAC3B,aAAc,aACd,WAAc,aACd,MAAS,QACT,MAAS,WACT,SAAY,WACZ,KAAQ,OACR,IAAO,MACP,GAAM,KACN,GAAM,MAGK,GACbC,OAAQ,KACRC,KAAM,UAENC,IAAI,eACCH,GAGLI,UAAU,eACLJ,EADI,CAEP,kBAAmB,oBAGrBlC,aAAa,eACRkC,EADO,CAEV,0BAA2B,0BAC3B,2CAA4C,6CAG9CK,KAAK,eACAL,EADD,CAEF,KAAQ,OACR,UAAW,UACX,wBAAyB,0BAG3BM,YAAY,eACPN,GAGLO,MAAM,eACDP,EADA,CAEH,gFAAiF,gFACjF,6IAA8I,6IAC9I,yBAA0B,yBAC1B,yCAA0C,yCAC1C,wFAAyF,wFACzF,sDAAuD,sDACvD,6BAA8B,6BAC9B,SAAY,WACZ,gDAAiD,gDACjD,eAAgB,eAChB,yBAA0B,yBAC1B,6CAA8C,6CAC9C,8BAA+B,8BAC/B,qCAAsC,qCACtC,kCAAmC,kCACnC,iCAAkC,iCAClC,gBAAiB,gBACjB,kBAAmB,kBACnB,4BAA6B,8BAG/BQ,SAAQ,eACHR,GAGLS,KAAK,eACAT,GAGLU,YAAY,eACPV,GAGLW,cAAc,eACTX,EADQ,CAEX,IAAO,MACP,MAAS,QACT,cAAe,cACf,IAAO,QAGTY,UAAU,eACLZ,EADI,CAEP,qBAAsB,qBACtB,KAAQ,OACR,MAAS,UAGXa,OAAO,eACFb,EADC,CAEJ,OAAU,SACV,OAAU,SACV,UAAW,UACX,kBAAmB,kBACnB,KAAQ,OACR,KAAQ,OACR,OAAU,SACV,sBAAuB,sBACvB,wBAAyB,0BAG3B,kBAAmB,CACjB,KAAQ,OACR,kCAAmC,kCACnC,OAAU,SACV,yBAA0B,0BAG5B,oBAAqB,CACnB,SAAY,WACZ,mCAAoC,mCACpC,WAAc,aACd,wBAAyB,wBACzB,QAAW,UACX,qBAAsB,qBACtB,cAAY,cACZ,YAAa,YACb,OAAU,SACV,oBAAqB,sBC3HnBA,EAAS,CACX,0BAA2B,0BAC3B,aAAc,aACd,WAAc,aACd,MAAS,UACT,MAAS,kBACT,SAAY,aACZ,KAAQ,QACR,IAAO,MACP,GAAM,MACN,GAAM,QAGK,GACbC,OAAQ,KACRC,KAAM,SAENC,IAAI,eACCH,GAGLI,UAAU,eACLJ,EADI,CAEP,kBAAmB,+BAGrBlC,aAAa,eACRkC,EADO,CAEV,0BAA2B,kCAC3B,2CAA4C,qFAG9CK,KAAK,eACAL,EADD,CAEF,KAAQ,OACR,UAAW,gBACX,wBAAyB,qCAG3BM,YAAY,eACPN,GAGLO,MAAM,eACDP,EADA,CAEH,gFAAiF,2FACjF,6IAA8I,iJAC9I,yBAA0B,uCAC1B,yCAA0C,2DAC1C,wFAAyF,oGACzF,sDAAuD,gDACvD,6BAA8B,gCAC9B,SAAY,WACZ,gDAAiD,sCACjD,eAAgB,cAChB,yBAA0B,yBAC1B,6CAA8C,8CAC9C,8BAA+B,oCAC/B,qCAAsC,6CACtC,kCAAmC,+CACnC,iCAAkC,oCAClC,gBAAiB,iBACjB,kBAAmB,8BACnB,4BAA6B,yCAG/BQ,SAAS,eACJR,GAGLS,KAAK,eACAT,GAGLU,YAAY,eACPV,GAGLW,cAAc,eACTX,EADQ,CAEX,IAAO,OACP,MAAS,SACT,cAAe,eACf,IAAO,UAGTY,UAAU,eACLZ,EADI,CAEP,qBAAsB,4BACtB,KAAQ,OACR,MAAS,UAGXa,OAAO,eACFb,EADC,CAEJ,OAAU,YACV,OAAU,YACV,UAAW,qBACX,kBAAmB,gCACnB,KAAQ,QACR,KAAQ,SACR,OAAU,UACV,sBAAuB,wBACvB,wBAAyB,4BAG3B,kBAAmB,CACjB,KAAQ,MACR,kCAAmC,+BACnC,OAAU,oBACV,yBAA0B,+BAG5B,oBAAqB,CACnB,SAAY,WACZ,mCAAoC,mCACpC,WAAc,aACd,wBAAyB,wBACzB,QAAW,UACX,qBAAsB,qBACtB,cAAY,cACZ,YAAa,YACb,OAAU,SACV,oBAAqB,sBC3HnBA,EAAS,CACX,0BAA2B,kCAC3B,aAAc,oBACd,WAAc,cACd,MAAS,OACT,MAAS,QACT,SAAY,WACZ,KAAQ,QACR,IAAO,KACP,GAAM,MACN,GAAM,SAGK,GACbC,OAAQ,KACRC,KAAM,QAENC,IAAI,eACCH,GAGLI,UAAU,eACLJ,EADI,CAEP,kBAAmB,oBAGrBlC,aAAa,eACRkC,EADO,CAEV,0BAA2B,mBAC3B,2CAA4C,uEAG9CK,KAAK,eACAL,EADD,CAEF,KAAQ,OACR,UAAW,YACX,wBAAyB,iCAG3BM,YAAY,eACPN,GAGLO,MAAM,eACDP,EADA,CAEH,gFAAiF,oFACjF,6IAA8I,gJAC9I,yBAA0B,6BAC1B,yCAA0C,wCAC1C,wFAAyF,iIACzF,sDAAuD,2DACvD,6BAA8B,+BAC9B,SAAY,WACZ,gDAAiD,4CACjD,eAAgB,mBAChB,yBAA0B,kBAC1B,6CAA8C,2CAC9C,8BAA+B,0BAC/B,qCAAsC,8CACtC,kCAAmC,yBACnC,iCAAkC,+BAClC,gBAAiB,oBACjB,kBAAmB,gBACnB,4BAA6B,gCAG/BQ,SAAQ,eACHR,GAGLS,KAAK,eACAT,GAGLU,YAAY,eACPV,GAGLW,cAAc,eACTX,EADQ,CAEX,IAAO,OACP,MAAS,UACT,cAAe,mBACf,IAAO,aAGTY,UAAU,eACLZ,EADI,CAEP,qBAAsB,qBACtB,KAAQ,QACR,MAAS,UAGXa,OAAO,eACFb,EADC,CAEJ,OAAU,QACV,OAAU,QACV,UAAW,SACX,kBAAmB,mBACnB,KAAQ,MACR,KAAQ,UACR,OAAU,UACV,sBAAuB,0BACvB,wBAAyB,4BAG3B,kBAAmB,CACjB,KAAQ,OACR,kCAAmC,yCACnC,OAAU,UACV,yBAA0B,kBAG5B,oBAAqB,CACnB,SAAY,WACZ,mCAAoC,+BACpC,WAAc,aACd,wBAAyB,kBACzB,QAAW,WACX,qBAAsB,gBACtB,cAAY,cACZ,YAAa,YACb,OAAU,SACV,oBAAqB,gBCpHV,KACb,CAAEc,IAAK,KAAMC,MAAOC,EAAMd,KAAMe,MAAOD,GACvC,CAAEF,IAAK,QAASC,MAAOC,EAAMd,KAAMe,MAAOD,GAC1C,CAAEF,IAAK,QAASC,MAAOC,EAAMd,KAAMe,MAAOD,GAC1C,CAAEF,IAAK,QAASC,MAAOC,EAAMd,KAAMe,MAAOD,GAC1C,CAAEF,IAAK,KAAMC,MAAOG,EAAMhB,KAAMe,MAAOC,GACvC,CAAEJ,IAAK,QAASC,MAAOG,EAAMhB,KAAMe,MAAOC,GAC1C,CAAEJ,IAAK,KAAMC,MAAOI,EAAMjB,KAAMe,MAAOE,GACvC,CAAEL,IAAK,QAASC,MAAOI,EAAMjB,KAAMe,MAAOE,GAC1C,CAAEL,IAAK,KAAMC,MAAOK,EAAMlB,KAAMe,MAAOG,GACvC,CAAEN,IAAK,QAASC,MAAOK,EAAMlB,KAAMe,MAAOG,GAC1C,CAAEN,IAAK,QAASC,MAAOM,EAAMnB,KAAMe,MAAOI,K,iCClB5C,4JAsBMC,EAAe,SAACvD,GAAW,IACvBqB,EAAsBrB,EAAtBqB,KAAMmC,EAAgBxD,EAAhBwD,QAASC,EAAOzD,EAAPyD,GAEjBC,EAAa7B,IAAM8B,SACvB,kBAAM9B,IAAM+B,YAAW,SAACC,EAAWC,GAAZ,OAAoB,kBAAC,IAAD,eAAYL,GAAIA,EAAIK,IAAKA,GAASD,SAC7E,CAACJ,IAGH,OACE,4BACE,kBAAC,IAAD,CAAUM,QAAM,EAACC,UAAWN,GACzBrC,EACC,kBAAC,IAAD,CAAS4C,MAAQT,GACf,kBAAC,IAAD,KAAenC,IAEf,KACJ,kBAAC,IAAD,CAAcmC,QAASA,OAYzBU,EAAgBlC,oBAAU,OAAVA,EAAkB,SAAChC,GAAW,IAC1CiB,EAAMjB,EAANiB,EACR,OACE,6BAEE,kBAACsC,EAAD,CAAcE,GAAG,SAASD,QAAUvC,EAAE,SAAWI,KAAO,kBAAC,IAAD,CAAiBF,MAAO,CAAEgD,SAAU,UAAY9C,KAAO+C,QAC/G,kBAACb,EAAD,CAAcE,GAAG,YAAYD,QAAUvC,EAAE,YAAcI,KAAO,kBAAC,IAAD,CAAiBF,MAAO,CAAEgD,SAAU,UAAY9C,KAAOgD,YAKrHC,EAAqB,SAACtE,GAC1B,OACE,gC,iLChDEuE,EAAY,SAACvE,GACjB,IACMiE,EADIO,uBAAa,MACTvD,CAAE,2BAChB,OACE,kBAAC,IAAD,CACEwD,cAAa,eAAYR,GACzBS,aAAeT,GAEf,0BAAMU,KAAO3E,EAAM4E,aAMnBC,EAAe,SAAC7E,GACpB,OACE,kBAAC,qBAAD,CAAoB8E,aAAe9E,EAAM8E,cACvC,kBAAC,IAAD,KACE,kBAACP,EAAD,CAAWK,SAAW5E,EAAM4E,WAC5B,kBAAC,IAAD,KACE,yBAAKG,UAAU,MAAMC,GAAG,oBACpBhF,EAAM0B,cAQdU,E,kDAEJ,aAAe,IAAD,uBACZ,gBAgCF6C,uBAAyB,SAAClE,GACxB,EAAKmE,aAAenE,EAAMoE,OAAOD,aACjC,EAAKrE,SAAS,CACZuE,0BAA0B,KApChB,EAyCdC,iCAAmC,kBAAM,EAAKrF,MAAMsF,6BAA6B,EAAKJ,eAzCxE,EA4CdK,qBAAuB,SAACX,GAAD,OAAc,EAAK/D,SAAS,CAAE+D,cA5CvC,EA6CdY,kBAAoB,SAACC,GAAD,OAAW,EAAK5E,SAAS,CAAE4E,WA7CjC,EA8CdC,yBAA2B,SAACC,GAAD,OAAkB,EAAK9E,SAAS,CAAE8E,kBA1C3D,IAAMC,EAAUC,mBAAmBC,EAAO1F,SAAS2F,MACnD,GAAkB,KAAbH,GAAmBA,IAAYE,EAAO1F,SAAS2F,KAAO,CACzD,IAAMA,EAAOH,EAAQI,QAAQ,cAAe,MAC5CF,EAAO1F,SAAS4F,QAAQD,GAG1B,EAAKb,cAAe,EACpB,IAAMe,EAAcC,UAAUtB,SAASuB,cAX3B,OAYZ,EAAK7F,MAAQ,CACX8F,cAAc,EACdhB,0BAA0B,EAC1BR,SAAUyB,IAAUC,MAAK,SAAA1B,GAAQ,OAAIA,EAAS7B,MAAQkD,KAAeA,EAAc,QACnFR,OAAO,EACPE,cAAc,GAjBJ,E,gEAuBZY,SAASC,iBAAiB,qBAAsB5F,KAAKqE,0B,6CAKrDsB,SAASE,oBAAoB,qBAAsB7F,KAAKqE,0B,+BAoBhD,IAAD,SAC6DrE,KAAKN,MAAjE8E,EADD,EACCA,yBAA0BR,EAD3B,EAC2BA,SAAUa,EADrC,EACqCA,MAAOE,EAD5C,EAC4CA,aAC7Cb,EAAeuB,IAAUC,MAAK,SAAAI,GAAS,OAAIA,EAAU3D,MAAQ6B,KAAU1B,MAE7E,OACE,kBAAC2B,EAAkB,CACfC,eACAF,YAKF,kBAAC,IAAD,CACE+B,OAAS/F,KACTgG,OAAO,MACPC,UAAY,CAAC,2BAA2B,gBACxCC,sBAAwB,kBAAM,EAAKjG,SAAS,CAAEuF,cAAc,OAI9D,kBAAC,IAAD,CAAcpF,OAAO,aACnB,kBAAC,IAAD,CAEEoE,yBAA2BA,EAC3BE,6BAA+B1E,KAAKyE,iCAEpCT,SAAWA,EACXmC,iBAAmBnG,KAAK2E,qBAExBE,MAAQA,EACRuB,cAAgBpG,KAAK4E,kBAErBG,aAAeA,EACfsB,eAAiBrG,KAAK8E,0BAEtB,kBAAC,IAAD,CAAc1E,OAAO,eACnB,kBAAC,IAAD,c,GAtFIa,IAAMqF,WAoGT9E,Q,iSCnHT+E,EAAYC,aAAW,SAAC3B,GAAD,MAAY,CACvC4B,YAAY,aACVC,QAAS,OACTC,WAAY,SACZC,eAAgB,WAChBpG,QAAS,SACNqE,EAAMgC,OAAOC,SAElBzD,MAAO,CACL0D,SAAU,GAEZC,YAAa,CACXC,SAAU,WACVpG,WAAY,SACZqG,MAhBgB,IAiBhBC,WAAYtC,EAAMuC,YAAYC,OAAO,QAAS,CAC5CC,OAAQzC,EAAMuC,YAAYE,OAAOC,MACjCC,SAAU3C,EAAMuC,YAAYI,SAASC,kBAGzCC,iBAAiB,aACfC,UAAW,SACXR,WAAYtC,EAAMuC,YAAYC,OAAO,QAAS,CAC5CC,OAAQzC,EAAMuC,YAAYE,OAAOC,MACjCC,SAAU3C,EAAMuC,YAAYI,SAASI,gBAEvCV,MAAOrC,EAAMgD,QAAQ,IACpBhD,EAAMiD,YAAYC,GAAG,MAAQ,CAC5Bb,MAAOrC,EAAMgD,QAAQ,KAGzBG,WAAY,CACVC,MAAO,aAILC,EAAc9G,oBAAU,OAAVA,EAAkB,SAAChC,GACrC,IAAM+I,EAAU5B,IACRlG,EAAMjB,EAANiB,EACR,OACE,oCACE,yBAAK8D,UAAYgE,EAAQ1B,aACvB,kBAAC,IAAD,CACE2B,KAAK,QACLH,MAAM,UACNI,aAAahI,EAAE,cACfC,QAAUlB,EAAMkJ,mBAEhB,kBAAC,IAAD,OAEF,kBAAC,IAAD,CAAYlF,UAAU,KAAKmF,QAAQ,KAAKN,MAAM,UAAUO,QAAM,EAACrE,UAAYgE,EAAQ9E,OAC/EhD,EAAE,SAEN,kBAAC,IAAD,CACEgI,aAAahI,EAAE,cACfC,QAAUlB,EAAMkJ,mBAEhB,kBAAC,IAAD,QAGJ,kBAAC,IAAD,MACA,kBAAC,IAAD,KAAM,kBAAC,IAAD,OACN,kBAAC,IAAD,MACA,kBAAC,IAAD,KAAM,kBAAC,IAAD,WAMN5G,EAAON,oBAAU,OAAVA,EAAkB,SAAChC,GAC9B,IAAM+I,EAAU5B,IACRkC,EAA2ErJ,EAA3EqJ,iBAAkBH,EAAyDlJ,EAAzDkJ,kBAAmBI,EAAsCtJ,EAAtCsJ,KAAMlE,EAAgCpF,EAAhCoF,yBAA0BnE,EAAMjB,EAANiB,EACvEwE,EAAQ8D,cACRC,EAAQC,YAAchE,EAAMiD,YAAYC,GAAG,OAC3Ce,EAAkBF,EAAQG,IAASC,IACnCC,EAAMC,EAAQC,SAAW,mBAAmBC,KAAK9D,UAAU+D,WAE3DC,EAAe,SAACZ,GAAD,OAAU,SAACvI,KAC1BA,GAAwB,YAAfA,EAAMoJ,MAAqC,QAAdpJ,EAAMgC,KAA+B,UAAdhC,EAAMgC,OAGnEuG,EACFD,IAGAH,OAUJ,OACE,kBAACQ,EAAD,iBACQF,EAAQ,CACVL,QAAS,aACP,CACFiB,OAAQ,OACRC,QAASH,GAAa,GACtBI,OAAQJ,GAAa,GACrBK,2BAA4BV,EAC5BW,iBAAkBX,GARxB,CAUEd,QAAS,CACP0B,MAAOC,YAAK3B,EAAQnB,aAAc0B,GAAQP,EAAQT,mBAEpDgB,KAAOA,IAEP,kBAACR,EAAD,CAAaI,kBAAoBA,IAC/B9D,EACE,kBAAC,IAAD,CACErB,QAAM,EACN7C,QA1BgB,SAACyJ,GACzBA,EAAEC,iBACF1B,IACAlJ,EAAMsF,gCAwBEP,UAAYgE,EAAQH,YAEpB,kBAAC,IAAD,CAAS3E,MAAQhD,EAAE,YACjB,kBAAC,IAAD,KAAc,kBAAC,IAAD,CAAiBI,KAAOwJ,IAAY1J,MAAO,CAAEgD,SAAU,SAAU0E,MAAO,aAExF,kBAAC,IAAD,CAAcrF,QAAUvC,EAAE,cAE1B,SAUGqB,Q,qECCS4E,E,oIAnJlB4D,E,kDACJ,WAAY9K,GAAQ,IAAD,6BACjB,eAEO,YAAaA,GACiB,KAAhCA,EAAM+K,QAAQ3K,SAAS2F,OAC1BiF,QAAQC,IAAI,eAAgB,CAACjL,UAC7B8F,EAAOoF,YAAY,kBAAMlL,EAAM+K,QAAQI,KAAK,OAAM,KANnC,E,qDAWjB,OAAO,S,GAZctJ,IAAMC,eAgBzBsJ,E,kDAEJ,WAAYpL,GAAQ,IAAD,8BACjB,gBA0DFqL,UAAY,kBAAM,EAAKxK,SAAS,CAAEyK,aAAa,KA3D5B,EA6DnBC,WAAa,WAAoB,IAAnBC,EAAkB,uDAAP,GAChB,YAAaA,GACsB,KAArCA,EAAWT,QAAQ3K,SAASqL,MAE3B,EAAKC,QACP,EAAKA,MAAQ5F,EAAOoF,YAAY,WAC9B,EAAKH,QAAQI,KAAK,KAClB,EAAKO,WAAQC,IACZ,MArEU,EA0EnBC,oBAAsB,SAACxL,EAAUyL,GAC/B,IAAMvL,EAAQ,EAAKwL,aAAa1L,GAChC,EAAKS,SAASP,IAxEd,EAAKyK,QAAU/K,EAAM+K,QACrB,EAAKzK,MAAL,eACK,EAAKwL,aAAa9L,EAAMI,UAD7B,CAEE2L,WAAW,EACXC,OAAQhM,EAAMiM,QARC,E,yDAYN7L,GACX,IAAMqL,EAAOrL,EAAS2F,KAAKC,QAAQ,cAAe,MAClD,MAAO,CACLsF,cAAeG,EAAKS,QAAmB,UAATT,EAC9BA,OACAU,YAAavL,KAAKN,MAAQM,KAAKN,MAAM6L,YAAcV,K,0CAMrD7K,KAAKwL,SAAWxL,KAAKmK,QAAQsB,OAAOzL,KAAKgL,uB,6CAKzChL,KAAKwL,WACAxL,KAAK8K,OACR5F,EAAOwG,aAAc1L,KAAK8K,S,yCAKXa,EAAWC,IAGF,IAArB5L,KAAKZ,MAAMiM,OACXrL,KAAKZ,MAAMiM,QAAUM,EAAUN,OAC/BrL,KAAKN,MAAM0L,SAAWpL,KAAKZ,MAAMiM,OACpCrL,KAAKC,SAAS,CAAEmL,OAAQpL,KAAKZ,MAAMiM,QAIhCrL,KAAKN,MAAMyL,YAAcnL,KAAKN,MAAMmL,MACvC7K,KAAKC,SAAS,CAAEkL,WAAW,IAIxBS,EAAUf,OAAS7K,KAAKN,MAAM0L,QAC9BQ,EAAUf,OAAS7K,KAAKN,MAAMmL,OACH,IAA3B7K,KAAKN,MAAM6L,aACXvL,KAAKN,MAAM6L,YAAYD,OAAS,GAChCtL,KAAKN,MAAMyL,YAAcnL,KAAKN,MAAM6L,aACvCvL,KAAKC,SAAS,CAAEkL,UAAWnL,KAAKN,MAAM6L,gB,+BAwBhC,IAAD,EACkDvL,KAAKZ,MAAtD0B,EADD,EACCA,SAAU0E,EADX,EACWA,aAAc6F,EADzB,EACyBA,MAAOQ,EADhC,EACgCA,WAAYxL,EAD5C,EAC4CA,EAD5C,EAE6BL,KAAKN,MAAjCyL,EAFD,EAECA,UAAWN,EAFZ,EAEYA,KAAMO,EAFlB,EAEkBA,OAEzB,OAAK5F,EACI,MAIM,IAAV6F,GAAmBA,IAAUR,EACzB,kBAAC,IAAD,CAAUN,MAAI,EAAC1H,GAAI,CAAEsC,KAAMkG,MAKhB,IAAdF,GACAA,IAAcN,GACdO,IAAWP,EACR,kBAAC,IAAD,CAAUN,MAAI,EAAC1H,GAAI,CAAEsC,KAAMgG,KAIlC,kBAAC,IAAD,CACEzC,KAAO1I,KAAKN,MAAMgL,YAClBjB,QAAUzJ,KAAK2K,WAEfkB,WAAaA,EACbC,kBAAkB,gBAClBC,mBAAmB,qBAEnB,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAQvM,SAAW,CAAEwM,SAAUnB,IAE3B/J,EAGF,kBAAC,IAAD,CAAOmL,OAAS,SAAA7M,GAAK,OAAI,kBAAC8K,EAAgB9K,QAG9C,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAQ8M,WAAS,EAAC5L,QAAUN,KAAK2K,WAAa1C,MAAM,WAChD5H,EAAE,gB,GA1HeY,IAAMC,eA2I/BiL,GARkB7F,EAQ4BkE,EAP3C,SAACpL,GACN,IAAMyF,EAAQ8D,cACRkD,EAAahD,YAAchE,EAAMiD,YAAYsE,KAAK,OACxD,OAAO,kBAAC9F,EAAD,iBAAgBlH,EAAhB,CAAwByM,WAAaA,OAM1ClK,E,uKACM,IAAD,EACuB3B,KAAKZ,MAA3B0B,EADD,EACCA,SAAauL,EADd,4BAEP,OACE,kBAAC,IAAD,CACExB,KAAK,YACLoB,OAAS,SAAA7M,GAAK,OAAI,kBAAC+M,EAAD,aAAoCrL,YAAauL,EAAjD,GAA0DjN,W,GAN1D6B,IAAMC,eAYjBE,wBAAU,cAAVA,CAAyBO,K,sCCzLxC2K,EAAOC,QAAU,IAA0B,qC,iCCA3C,kCAYA,IAAMC,EAAcC,QACW,cAA7BlN,OAAOC,SAASkN,UAEe,UAA7BnN,OAAOC,SAASkN,UAEhBnN,OAAOC,SAASkN,SAASC,MACvB,2DAIC,SAASC,EAASC,GACvB,GAA6C,kBAAmBvH,UAAW,CAGzE,GADkB,IAAIwH,IAAI5D,SAAwB3J,OAAOC,SAASuN,MACpD3M,SAAWb,OAAOC,SAASY,OAIvC,OAGFb,OAAOqG,iBAAiB,QAAQ,WAC9B,IAAMoH,EAAK,UAAM9D,SAAN,sBAEPsD,IAgEV,SAAiCQ,EAAOH,GAEtCI,MAAMD,EAAO,CACXE,QAAS,CAAE,iBAAkB,YAE5BC,MAAK,SAAAC,GAEJ,IAAMC,EAAcD,EAASF,QAAQI,IAAI,gBAEnB,MAApBF,EAASG,QACO,MAAfF,IAA8D,IAAvCA,EAAYG,QAAQ,cAG5ClI,UAAUmI,cAAcC,MAAMP,MAAK,SAAA7I,GACjCA,EAAaqJ,aAAaR,MAAK,WAC7B5N,OAAOC,SAASC,eAKpBmO,EAAgBZ,EAAOH,MAG1BgB,OAAM,WACLzD,QAAQC,IACN,oEAvFAyD,CAAwBd,EAAOH,GAI/BvH,UAAUmI,cAAcC,MAAMP,MAAK,WACjC/C,QAAQC,IACN,iHAMJuD,EAAgBZ,EAAOH,OAM/B,SAASe,EAAgBZ,EAAOH,GAC9BvH,UAAUmI,cACPb,SAASI,GACTG,MAAK,SAAA7I,GACJA,EAAayJ,cAAgB,WAC3B,IAAMC,EAAmB1J,EAAa2J,WACd,MAApBD,IAGJA,EAAiBE,cAAgB,WACA,cAA3BF,EAAiBtO,QACf4F,UAAUmI,cAAcU,YAI1B/D,QAAQC,IACN,iHAKEwC,GAAUA,EAAOuB,UACnBvB,EAAOuB,SAAS9J,KAMlB8F,QAAQC,IAAI,sCAGRwC,GAAUA,EAAOwB,WACnBxB,EAAOwB,UAAU/J,WAO5BuJ,OAAM,SAAA9N,GACLqK,QAAQrK,MAAM,4CAA6CA,Q,wECZzCuG,E,gQCrElBgI,EAAiBrN,IAAM+B,YAAW,SAAC5D,EAAO8D,GAAS,IAC/C5C,EAAgClB,EAAhCkB,QAASiO,EAAuBnP,EAAvBmP,OAAQ9N,EAAerB,EAAfqB,KAAM2B,EAAShD,EAATgD,MAE/B,OACE,kBAACoM,EAAA,EAAD,CACErM,IAAMoM,EACNjO,QAJgB,kBAAMA,EAAQiO,IAK9BrL,IAAMA,GAEN,kBAACuL,EAAA,EAAD,KACIhO,GAEJ,kBAACiO,EAAA,EAAD,CAAc9L,QAAUR,GAASmM,QAmExBnN,sBAAU,SAAVA,EA5DI,SAAChC,GAAW,IACrBkB,EAAuClB,EAAvCkB,QAASqO,EAA8BvP,EAA9BuP,QAASvK,EAAqBhF,EAArBgF,GAAOwK,EADL,YACmBxP,EADnB,8BAGI6B,IAAM4N,SAAS,MAHnB,mBAGrBC,EAHqB,KAGXC,EAHW,KAItBrG,EAAO+D,QAAQqC,GAIfE,EAAc,kBAAMD,EAAY,OAGhCE,EAAqB,SAAC3M,GAC1B0M,IACA1O,EAAQgC,IAKV,OACE,6BACE,kBAAC4M,EAAA,EAAD,CACE7G,aAAW,iBACX8G,gBAAA,sBAAgC/K,GAChCgL,gBAAc,OACd9O,QAjBkB,SAACH,GAAD,OAAW4O,EAAY5O,EAAMkP,iBAmB/C,kBAAC,IAAD,CAAiB5O,KAAO6O,OAExBR,EACE,kBAACpN,EAAA,EAAD,CACE0C,GAAE,sBAAmBA,GACrB0K,SAAWA,EACXS,aAAW,EACX7G,KAAOA,EACPe,QAAUuF,EACVQ,WAAY,CACVjP,MAAO,CACL2G,MAAO,UAITuI,OAAOC,KAAKf,GACXgB,QAAQ,SAAApB,GAAM,MAAe,SAAXA,KAClBqB,KAAK,SAAArB,GAAM,OACV,kBAACD,EAAD,CACEnM,IAAMoM,EACNA,OAASA,EACTjO,QAAU2O,EACVxO,KAAOkO,EAAQJ,GAAQ9N,KACvB2B,MAAyC,oBAA1BuM,EAAQJ,GAAQnM,MAAuBuM,EAAQJ,GAAQnM,MAAMwM,GAAaD,EAAQJ,GAAQnM,YAK/G,SDxENyN,E,4MAKJnQ,MAAQ,CACNgJ,MAAM,G,EAIRoH,gBAAkB,SAACpH,GACjB,EAAKzI,SAAS,CAAEyI,U,EAGlBsG,YAAc,WACZ,EAAK/O,SAAS,CAAEyI,MAAM,K,uDAGd,IACAA,EAAS1I,KAAKN,MAAdgJ,KACAtE,EAAOpE,KAAKZ,MAAZgF,GAFD,EAI2CpE,KAAKZ,MAA/C2Q,EAJD,EAICA,SAAUlE,EAJX,EAIWA,WAAYxL,EAJvB,EAIuBA,EAAMuO,EAJ7B,6CAMDoB,EAAUtH,EAAOqH,EAASrH,GAAMuD,OAAS,aACzCgE,EAAQvH,EAAOqH,EAASrH,GAAMrF,MAAQ,aAC5C,OACE,6BACE,kBAAC,EAAD,eACEsL,QAAUoB,EACV3L,GAAKA,EACL9D,QAAUN,KAAK8P,iBACVlB,IAGLlG,EACE,kBAACwH,EAAA,EAAD,eACE/N,IAAMuG,EACNA,MAAO,EACPe,QAAUzJ,KAAKgP,aAERnD,EAAa,GAAK,CAACsE,oBAAqBC,KALjD,CAOEvE,WAAaA,EACbC,kBAAA,iCAA4C1H,EAA5C,YAAkDsE,KAElD,kBAAC2H,EAAA,EAAD,CAAa9P,MAAO,CAAE+P,OAAQ,QAAUlM,GAAE,iCAA6BA,EAA7B,YAAmCsE,IAC3E,kBAACuH,EAAD,iBAAYrB,EAAZ,CAAwBvO,EAAIA,MAE9B,kBAACkQ,EAAA,EAAD,KACE,kBAACP,EAAD,iBAAcpB,EAAd,CAA0BvO,EAAIA,MAEhC,kBAACmQ,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,CAAQvE,WAAS,EAAC5L,QAAUN,KAAKgP,YAAc/G,MAAM,WACjD5H,EAAE,YAIR,U,GA1DsCY,IAAMC,eAiEpDwP,EAA4BtP,oBAAU,SAAVA,CAAoByO,GAWvCc,GARSrK,EAQMoK,EAPrB,SAACtR,GACN,IAAMyF,EAAQ8D,cACRkD,EAAahD,YAAchE,EAAMiD,YAAYsE,KAAK,OACxD,OAAO,kBAAC9F,EAAD,iBAAgBlH,EAAhB,CAAwByM,WAAaA,OEzE1CtF,EAAYC,aAAW,SAAC3B,GAAD,MAAY,CACvC+L,KAAM,CACJC,OAAQ,YA0DGC,EArDI,SAACC,GAGlB,IAAMhB,EAAQ,eACTgB,EADS,CAEZC,OAAQ,CACNvQ,KAAM,kBAAC,IAAD,CAAiBA,KAAOwQ,MAC9B7O,MAAO,mBAAW/B,EAAX,EAAGA,GAAU,WACpBgD,MAAO,mBAAWhD,EAAX,EAAGA,GAAU,YACpB4L,OAAQ,YAA0B,IAAvB7H,EAAsB,EAAtBA,GAAI8M,EAAkB,EAAlBA,SAAU7Q,EAAQ,EAARA,EAEvB,OACE,kBAACoQ,EAAA,EAAD,CACEU,UAAY,kBAAC,IAAD,CAAiB1Q,KAAOwQ,MACpC3Q,QAJiB,kBAAM4Q,EAAS9M,IAKhCmE,QAAQ,YACRN,MAAM,UACNI,aAAahI,EAAE,WAEbA,EAAE,wBAQR+Q,EAAOrB,EAASsB,KAAKpF,OAuB3B,OAAO7K,oBAAU,SAAVA,EApBQ,SAAChC,GACd,IAAM+I,EAAU5B,IAEQqI,GAAcxP,EAA9BkS,YAHgB,YAGclS,EAHd,kBAIlB6L,EAAS,kBAAC,EAAD,iBAAoB2D,EAApB,CAAgCmB,SAAWA,KAE1D,OACE,kBAACwB,EAAA,EAAD,CAAMpN,UAAWgE,EAAQyI,MACvB,kBAACY,EAAA,EAAD,CACEvG,OAASA,EACT5H,MAAQ0M,EAASsB,KAAKhO,MAAMjE,IAAQA,EAAMmC,KAC1CkQ,UAAYrS,EAAMsS,WAEpB,kBAACC,EAAA,EAAD,KACE,kBAACP,EAAUhS,SC9DNwS,EAFW3Q,IAAM4Q,eAAc,eC2C/BC,EAtCS,SAACxL,EAAWyL,GAAc,IAC1CC,EADyC,4MAG7CC,YAAc,SAAAC,GAAS,IAAD,EACe,EAAK9S,MAAhC+S,EADY,EACZA,aAAiB/S,EADL,kCAE6B8S,EAAzCE,oBAFY,MAEG,aAFH,EAEgBC,EAFhB,YAE6BH,EAF7B,kBAGdI,EAAU7C,OAAO8C,OAAO,GAAIR,EAAUM,EAAUjT,GAEtD,OACE,kBAACkH,EAAD,eACEpD,IAAMiP,EAENC,aAAeA,GACVE,KAbkC,uDAmB3C,OACE,kBAAC,EAAkBE,SAAnB,KACIxS,KAAKiS,iBArBgC,GACjBhR,IAAMqF,WA2B9BmM,EAAYxR,IAAM+B,YAAY,SAAC5D,EAAO8D,GAC1C,OAAO,kBAAC8O,EAAD,iBAAsB5S,EAAtB,CAA8B+S,aAAejP,QAMtD,OAFAuP,EAAUtR,aAAemF,EAAUnF,aAE5BsR,G,4CCrBMC,EAlBC,SAACtT,GAAW,IAAD,EACSA,EAA1BmB,aADiB,MACT,GADS,EACLqO,EAAcxP,EAAdwP,UAEpB,OACE,uCACE+D,IAAI,aACJC,IAAMC,IACNtS,MAAK,aACH2G,MAAO,MACPvG,OAAQ,OACR+F,QAAS,SACNnG,IAEAqO,KCFLkE,E,4MAEJpT,MAAQ,CACN8F,cAAc,EACd0M,KAAM,I,EAGRE,aAAe,SAACF,GACd,EAAKjS,SAAS,CAAEiS,U,EAGlBa,iBAAmB,WACjB,EAAK9S,SAAS,CAAEuF,cAAc,K,uDAGtB,IAAD,EACwBxF,KAAKZ,MAA5B0B,EADD,EACCA,SAAa1B,EADd,8BAEwBY,KAAKN,MAA5B8F,EAFD,EAECA,aAAc0M,EAFf,EAEeA,KAEtB,OACE,oCAEE,kBAAC,IAAD,CACEnM,OAAS/F,KACTgG,OAAO,uBACPC,UAAW,CAAC,gBACZC,sBAAwBlG,KAAK+S,mBAG7BvN,EAAe,kBAAC,EAAD,MACb,kBAAC,EAAkBwN,SAAnB,CAA4B1Q,MAAK,aAC/B8P,aAAcpS,KAAKoS,cAChBhT,EAF4B,CAG/B8S,UAEEpR,Q,GAnCmBG,IAAMqF,WA+CnC2M,E,kDAKJ,WAAY7T,GAAQ,IAAD,8BACjB,cAAMA,IAHRoM,SAAW,aAEQ,EAKnB0H,YAAc,SAAChB,GAAyB,IAAnB9M,EAAkB,wDAC/B+N,EAAU,EAAK/T,MAAMgU,eAAelB,GAGrC,EAAK/H,QAAQ3K,SAASwM,WAAamH,IAChC/N,EAIJ,EAAK+E,QAAQ/E,QAAQ+N,EAAU,EAAKhJ,QAAQ3K,SAAS2F,MAHrD,EAAKgF,QAAQI,KAAK4I,EAAU,EAAKhJ,QAAQ3K,SAAS2F,QAXrC,EAmBnB6F,oBAAsB,SAACxL,EAAUyL,KAnBd,EA0BnBoI,kBAAoB,WAElB,EAAK7H,SAAW,EAAKrB,QAAQsB,OAAQ,EAAKT,sBAEpC,EAAK5L,MAAMkU,OAAOC,QAAQjI,QAC1B,EAAKlM,MAAM8S,KAAKqB,SAChB,EAAKnU,MAAM8S,KAAKqB,QAAQjI,QAC3B,EAAK4H,YAAY,EAAK9T,MAAM8S,MAAM,IAjCpB,EAqCnBsB,qBAAuB,WAErB,EAAKhI,YAvCY,EA2CnB4G,aAAe,SAACF,GACd,EAAKgB,YAAL,eAAsBhB,IAAQ,GAC9B,EAAK9S,MAAMgT,aAAX,eAA6BF,KA3C7B,EAAK/H,QAAU/K,EAAM+K,QAFJ,E,qDAiDT,IAAD,EAUHnK,KAAKZ,MARP0B,EAFK,EAELA,SACAoR,EAHK,EAGLA,KACAoB,EAJK,EAILA,OAKGlU,GATE,EAKLqU,aALK,EAMLL,eANK,EAOLjJ,QAPK,EAQLiI,aARK,sGAYP,OACE,kBAAC,EAAkBY,SAAnB,CAA4B1Q,MAAK,aAC/B8P,aAAcpS,KAAKoS,cAChBhT,EAF4B,GAG5B8S,EAH4B,GAI5BoB,IAEDxS,O,GAzEmBG,IAAMqF,WAgH7BoN,EAA8B5B,GAvBf,SAAC1S,GAAW,IACvBuU,EAA2DvU,EAA3DuU,WAAYF,EAA+CrU,EAA/CqU,aAAcL,EAAiChU,EAAjCgU,eAAmBxE,EADvB,YACqCxP,EADrC,gDAE9B,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CACEyL,KAAO8I,EACP1H,OAAS,SAAA2H,GAAe,IACLN,EAAsBM,EAA/BjH,MAAS2G,OAAUnJ,EAAYyJ,EAAZzJ,QACrB0J,EAAkBJ,EAAaH,GACrC,OACE,kBAAC,EAAD,cACO,CAAEG,eAAcL,iBAAgBjJ,WAChCyE,EAFP,CAGE0E,OAASO,WAYrB,CAAE3B,KAAM,CAAEqB,QAAS,CAAChK,KAAM,UAebuK,EAXS,SAAC1U,GAAW,IAC1B0B,EAAuD1B,EAAvD0B,SAAU6S,EAA6CvU,EAA7CuU,WAAYF,EAAiCrU,EAAjCqU,aAAcL,EAAmBhU,EAAnBgU,eAC5C,OACE,kBAAC,EAAD,KACE,kBAACM,EAAiC,CAAEC,aAAYF,eAAcL,kBAC1DtS,K,8FCxKJwN,GAAiBrN,IAAM+B,YAAW,SAAC5D,EAAO8D,GAAS,IAC/C5C,EAAgClB,EAAhCkB,QAASiO,EAAuBnP,EAAvBmP,OAAQ9N,EAAerB,EAAfqB,KAAM2B,EAAShD,EAATgD,MAE/B,OACE,kBAACoM,EAAA,EAAD,CACErM,IAAMoM,EACNjO,QAJgB,kBAAMA,EAAQiO,IAK9BrL,IAAMA,GAEN,kBAACuL,EAAA,EAAD,KACIhO,GAEJ,kBAACiO,EAAA,EAAD,CAAc9L,QAAUR,GAASmM,QA6ExBnN,uBAAU,gBAAVA,EAxEO,SAAChC,GAAW,IACxBiB,EAAsBjB,EAAtBiB,EAAG0T,EAAmB3U,EAAnB2U,MAAOpF,EAAYvP,EAAZuP,QADa,EAGC1N,IAAM4N,SAAS,MAHhB,mBAGxBC,EAHwB,KAGdC,EAHc,KAIzBrG,EAAO+D,QAAQqC,GAIfE,EAAc,kBAAMD,EAAY,OAGhCE,EAAqB,SAAC3M,GAC1B0M,IACA+E,EAAMzR,IAGR,OACE,6BACE,kBAAC0R,GAAA,EAAD,CAAS3Q,MAAQhD,EAAE,eAAiBgI,aAAahI,EAAE,QACjD,kBAAC4T,GAAA,EAAD,CACEhM,MAAM,UACNI,aAAahI,EAAE,OACfC,QAfgB,SAACH,GAAD,OAAW4O,EAAY5O,EAAMkP,gBAgB7CD,gBAAc,QAEd,kBAAC,KAAD,QAGFN,EACE,kBAACpN,EAAA,EAAD,CACE0C,GAAE,kBACF0K,SAAWA,EACXS,aAAW,EACX7G,KAAOA,EACPe,QAAUuF,EACVkF,gBAAiB,CACfC,SAAU,SACVC,WAAY,SAEd5E,WAAY,CACVjP,MAAO,CACL2G,MAAO,UAITyH,EAAQiB,KAAK,SAAArB,GAAM,OACjB,kBAAC,GAAD,CACEpM,IAAMoM,EAAOpM,IACboM,OAASA,EAAOpM,IAChB7B,QAAU2O,EACVxO,KAAO8N,EAAO9N,KACd2B,MAAQ/B,EAAEkO,EAAOhN,YAKvB,S,gDCzFN8S,GAAO,aA+CEC,G,WAnCb,WAAYlV,GAAQ,IAAD,gCANnBmC,KAAO,SAMY,KAFnB4M,WAAa,IAAIoG,gBAEE,KAcnBC,kBAAoB,SAACpH,GAEnB,OAAMA,EAASqH,GAGRrH,EAFE,IAAIsH,MAAJ,UAAa,EAAKnT,KAAlB,qBAAmC6L,EAASuH,cAjBpC,KAwBnBC,iBAAmB,SAACC,GACA,eAAbA,EAAItT,KACP6I,QAAQC,IAAI,qBAAsBwK,IAGlCA,EAAI9T,QAAJ,UAAiB,EAAKQ,KAAtB,qBAAuCsT,EAAI9T,SAC3C,EAAK+T,QAAQD,KA7Bf7U,KAAKoO,SAAWhP,GAASA,EAAMgP,SAAWhP,EAAMgP,SAAWiG,GAC3DrU,KAAK8U,QAAU1V,GAASA,EAAM0V,QAAU1V,EAAM0V,QAAUT,G,oDAOxDrU,KAAKmO,WAAW4G,QAChB/U,KAAKmO,WAAa,IAAIoG,oB,KCrBpBS,GAAU,SAAAC,GACd,OAAmB,IAAfA,EAAI3J,OACC,EAGF,YAAI2J,GACRrF,KAAK,SAAAsF,GAAI,OAAIA,EAAKC,WAAW,MAC7BC,QAAQ,SAACjQ,EAAMkQ,GACd,IAAMC,GAAYnQ,GAAQ,GAAKA,EAAQkQ,EACvC,OAAOC,EAAUA,IAClB,IAICC,GAQJ,WAAYC,GAAM,IAAD,gCAPjBC,OAAS,KAOQ,KANjBC,OAAS,KAMQ,KALjBC,aAAe,EAKE,KAJjBC,aAAc,EAIG,KAHjBC,UAAY,GAGK,KAFjBL,IAAM,GAEW,KAKjBhB,kBAAoB,SAACpH,GAEnB,IAAMA,EAASqH,GACb,MAAM,IAAIC,MAAJ,UAAatH,EAASuH,aAG9B,OAAOvH,GAXQ,KAgBjBwH,iBAAmB,SAACC,GACD,eAAbA,EAAItT,OAMNsT,EAAI9T,QAAJ,UAAiB,EAAKyU,IAAtB,aAA8BX,EAAI9T,SAClC,EAAK+T,QAAQD,KAxBA,KA6BjBiB,WAAa,kBAAM,EAAKL,OAAS,MA7BhB,KAgCjBX,QAAU,SAAC/U,GACT,EAAK8V,UAAUE,SAAS,SAAAC,GACtBA,EAASlB,QAAQ/U,MAGnB,EAAK+V,cArCU,KAyCjBG,YAAc,SAAC5H,EAAWyG,GAyBxB,OAxBA,EAAKe,UAAUtL,KAAK,CAClB8D,YACAyG,YAIG,EAAKW,QACU,OAAhB,EAAKC,QACP,EAAKzI,QAKD,EAAK2I,aACU,OAAhB,EAAKF,QACP,IAAIQ,SACH,SAACC,EAASC,GAAV,OAAqBD,EAAQ,EAAKT,WACjCvI,KAAMkB,GAOJ,kBAAM,EAAKgI,eAAgBhI,KAlEnB,KAsEjBgI,eAAiB,SAAChI,GAGhB,IAAMiI,EAAQ,EAAKT,UAChBjG,KAAK,SAACoG,EAAUO,GAAX,MAAsB,CAAEP,WAAUO,YACvC7Q,MAAM,SAAA8Q,GAAC,OAAIA,EAAER,SAAS3H,YAAcA,KAElCiI,EAMH,EAAKT,UAAUY,OAAOH,EAAMC,MAAO,GAGnCnM,QAAQsM,QAAR,+BAAwC,EAAKlB,IAA7C,yBAIE,EAAKC,QACqB,IAA1B,EAAKI,UAAUvK,SACjB,EAAKmK,OAAOV,QACZ,EAAKe,eA7FQ,KAkGjBa,oBAAsB,YAA+B,IAA5BjB,EAA2B,EAA3BA,OAAQC,EAAmB,EAAnBA,aAS/B,OARA,EAAKD,OAASA,EACd,EAAKC,aAAeA,EACpB,EAAKE,UACFE,SAAS,SAAAC,GAAQ,OAAIA,EAAS3H,UAAU,EAAKqH,WAEhD,EAAKI,aAGE,EAAKJ,QA3GG,KA+GjBkB,4BAA8B,SAACxJ,GAAD,OAAc,IAAIyJ,KAAKzJ,EAASF,QAAQI,IAAI,mBA/GzD,KAuHjBL,MAAQ,WAA0B,IAAzB6J,EAAwB,uDAAb,aAElB,OADA,EAAKrB,OAAS,IAAIlB,gBACXtH,MAAO,EAAKuI,IAAK,CAAEC,OAAQ,EAAKA,OAAOA,SAC3CtI,KAAM,EAAKqH,mBACXrH,MAAM,SAAAC,GAAQ,OAAIA,EAAS2J,OAAO5J,MAAM,SAAAuI,GAAM,MAAK,CAClDA,SACAC,aAAc,EAAKiB,4BAA4BxJ,UAEhDD,KAAM,EAAKwJ,qBACXxJ,KAAM2J,GACNjJ,MAAO,EAAK+G,mBAjIA,KAsIjBoC,kBAAoB,SAAC3I,EAAWyG,GAC9B7H,MAAO,EAAKuI,IAAK,CAAEyB,OAAQ,SACxB9J,KAAM,EAAKqH,mBACXrH,KAAM,EAAKyJ,6BACXzJ,MAAM,SAAA+J,GAAI,OAAIA,EAAO,EAAKvB,gBAC1BxI,KAAMkB,GACNR,MAAOiH,IA5IK,KAgJjBqC,WAAa,WACX,OAAQ,IAAIjB,SACV,SAACC,EAASC,GACa,OAAhB,EAAKV,QACR,EAAKE,aAAc,EAGd,EAAKC,UAAUvK,OAAS,EAI3B,EAAK2B,MAAMkJ,GAQXA,KASFA,QA3KNnW,KAAKwV,IAAMA,GA+OT4B,GAAQ,I,iDAlDZlF,KAAO,G,KAEP3Q,KAAO,gB,KAMP0L,MAAQ,SAACuI,EAAKnH,GAAmC,IAAxByG,EAAuB,uDAAb,aAC3B1Q,EAAK4Q,GAAQQ,GAOnB,OAJOpR,KAAM,EAAK8N,OAChB,EAAKA,KAAK9N,GAAM,IAAImR,GAAmBC,IAGlC,EAAKtD,KAAK9N,GAAI6R,YACnB5H,EACAyG,I,KAMJkC,kBAAoB,SAACxB,EAAKnH,EAAWyG,GACnC,IAAM1Q,EAAK4Q,GAAQQ,GACnB,EAAKtD,KAAK9N,GAAI4S,kBAAkB3I,EAAWyG,I,KAI7CqC,WAAa,SAAC3B,GACZ,IAAMpR,EAAK4Q,GAAQQ,GACnB,OAAOpR,KAAM,EAAK8N,KAYX,EAAKA,KAAK9N,GAAI+S,aAXX,IAAIjB,SACV,SAACC,EAASC,GAMRD,SAWV1G,OAAO4H,OAAOD,IAECA,UCrQTE,IAAgBpO,uFAEhBqO,GAAI,UAAmBD,GAAnB,cAEJE,GAAa,UAAUF,GAAV,gBACbG,GAAa,UAAUH,GAAV,iBAEbI,GAAW,UAAYJ,GAAZ,8BACXK,GAAa,UAAUL,GAAV,gCACbM,GAAW,UAAYN,GAAZ,8BACXO,GAAS,UAAcP,GAAd,4BACTQ,GAAgB,UAAOR,GAAP,mCAChBS,GAAc,UAAST,GAAT,iCAEdU,GAAY,UAAWV,GAAX,+BACZW,GAAc,UAASX,GAAT,iCACdY,GAAY,UAAWZ,GAAX,+BACZa,GAAU,UAAab,GAAb,6BA6HDc,GAzHO,CACpBb,QACAc,SAAU,CACRC,KAAM,CACJjV,MAAO,8CACPjB,MAAO,wBACPb,KAAM,wBACNgX,OAAQ,CACN,CAAC,MAAS,OAAQ,IAAO,gBAAc,MAAS,KAChD,CAAC,MAAS,OAAQ,IAAO,cAAe,MAAS,KACjD,CAAC,MAAS,OAAQ,IAAO,mBAAiB,MAAS,KACnD,CAAC,MAAS,OAAQ,IAAO,gBAAiB,MAAS,KACnD,CAAC,MAAS,OAAQ,IAAO,WAAY,MAAS,KAC9C,CAAC,MAAS,OAAQ,IAAO,oBAAkB,MAAS,IACpD,CAAC,MAAS,OAAQ,IAAO,gBAAc,MAAS,IAChD,CAAC,MAAS,OAAQ,IAAO,qBAAmB,MAAS,IACrD,CAAC,MAAS,OAAQ,IAAO,YAAa,MAAS,IAC/C,CAAC,MAAS,OAAQ,IAAO,iBAAkB,MAAS,GACpD,CAAC,MAAS,OAAQ,IAAO,cAAe,MAAS,GACjD,CAAC,MAAS,OAAQ,IAAO,gBAAc,MAAS,KAGpDC,UAAW,CACTnV,MAAO,8DACPjB,MAAO,0BACPb,KAAM,wCACNgX,OAAQ,CACN,CAAC,MAAS,OAAQ,IAAO,QAAS,MAAS,KAC3C,CAAC,MAAS,OAAQ,IAAO,eAAgB,MAAS,KAClD,CAAC,MAAS,OAAQ,IAAO,eAAgB,MAAS,KAClD,CAAC,MAAS,OAAQ,IAAO,cAAe,MAAS,IACjD,CAAC,MAAS,OAAQ,IAAO,aAAc,MAAS,IAChD,CAAC,MAAS,OAAQ,IAAO,aAAc,MAAS,IAChD,CAAC,MAAS,OAAQ,IAAO,aAAc,MAAS,IAChD,CAAC,MAAS,OAAQ,IAAO,MAAO,MAAS,KAG7CE,GAAI,CACFpV,MAAO,wDACPjB,MAAO,KACPb,KAAM,kCACNgX,OAAQ,CACN,CAAC,MAAS,OAAQ,IAAO,MAAO,MAAS,GACzC,CAAC,MAAS,OAAQ,IAAO,aAAc,MAAS,KAChD,CAAC,MAAS,OAAQ,IAAO,eAAgB,MAAS,KAClD,CAAC,MAAS,OAAQ,IAAO,YAAa,MAAS,SAC/C,CAAC,MAAS,OAAQ,IAAO,MAAO,MAAS,KAG7CG,KAAM,CACJrV,MAAO,qEACPjB,MAAO,eACPb,KAAM,+CACNgX,OAAQ,CACN,CAAC,MAAS,UAAW,IAAO,OAAQ,MAAS,IAC7C,CAAC,MAAS,UAAW,IAAO,aAAc,MAAS,IACnD,CAAC,MAAS,UAAW,IAAO,aAAc,MAAS,IACnD,CAAC,MAAS,UAAW,IAAO,aAAc,MAAS,IACnD,CAAC,MAAS,UAAW,IAAO,aAAc,MAAS,IACnD,CAAC,MAAS,UAAW,IAAO,OAAQ,MAAS,KAGjDI,OAAQ,CACNtV,MAAO,qDACPjB,MAAO,UACPb,KAAM,+BACNgX,OAAQ,CACN,CAAC,MAAS,UAAW,IAAO,QAAS,MAAS,IAC9C,CAAC,MAAS,UAAW,IAAO,eAAgB,MAAS,IACrD,CAAC,MAAS,UAAW,IAAO,eAAgB,MAAS,IACrD,CAAC,MAAS,UAAW,IAAO,eAAgB,MAAS,IACrD,CAAC,MAAS,UAAW,IAAO,eAAgB,MAAS,IACrD,CAAC,MAAS,UAAW,IAAO,cAAe,MAAS,GACpD,CAAC,MAAS,UAAW,IAAO,aAAc,MAAS,GACnD,CAAC,MAAS,UAAW,IAAO,aAAc,MAAS,GACnD,CAAC,MAAS,UAAW,IAAO,MAAO,MAAS,KAGhDK,QAAS,CACPvV,MAAO,uDACPjB,MAAO,WACPb,KAAM,iCACNgX,OAAQ,CACN,CAAC,MAAS,UAAW,IAAO,SAAU,MAAS,KAC/C,CAAC,MAAS,UAAW,IAAO,gBAAiB,MAAS,KACtD,CAAC,MAAS,UAAW,IAAO,eAAgB,MAAS,KACrD,CAAC,MAAS,UAAW,IAAO,eAAgB,MAAS,KACrD,CAAC,MAAS,UAAW,IAAO,eAAgB,MAAS,KACrD,CAAC,MAAS,UAAW,IAAO,eAAgB,MAAS,KACrD,CAAC,MAAS,UAAW,IAAO,eAAgB,MAAS,KACrD,CAAC,MAAS,UAAW,IAAO,eAAgB,MAAS,KACrD,CAAC,MAAS,UAAW,IAAO,OAAQ,MAAS,MAInDM,KAAM,CACJC,QAAS,CACPC,IAAKvB,GACLwB,OAAQ,CACNV,KAAWV,GACXY,UAAWV,GACXW,GAAWZ,GACXa,KAAWhB,GACXiB,OAAWhB,GACXiB,QAAWb,KAGfkB,SAAU,CACRF,IAAKtB,GACLuB,OAAQ,CACNV,KAAWJ,GACXM,UAlHe,UAAMlB,GAAN,oCAmHfmB,GAAWN,GACXO,KAAWV,GACXW,OAAWV,GACXW,QArHa,UAAQtB,GAAR,sCCff4B,G,4MAEJ3X,KAAO,kB,EAMP4X,iBAAkB,E,EAClBC,mBAAqB,QAAQC,MAAM,K,EAkBnC9B,KAAO,SAACT,GAAD,OAAcM,GAAMnK,MAAOmL,GAAcb,KAAMT,I,EACtD5E,KAAO,SAAC2G,EAAMG,EAAQlC,GAAf,OAA4BM,GAAMnK,MAAOmL,GAAcS,KAAKA,GAAMG,OAAOA,GAASlC,I,EAQzFwC,YAAc,SAACxC,GAAkC,IAAxBhC,EAAuB,uDAAb,aACjCsC,GAAMJ,kBACJoB,GAAcb,MACd,SAAAgC,GAIEzC,EAASyC,MAEX,SAAAxZ,GACEqK,QAAQrK,MAAR,UAAiB,EAAKwB,KAAtB,kCAA4DxB,GAC5D+U,EAAQ/U,O,EAMdyZ,UAAY,SAAC1C,IACX,yCAAC,WAAOA,GAAP,0BAAA2C,EAAA,qEAGiBP,EAAeQ,SAHhC,yDAGSb,EAHT,uBAIoBK,EAAeF,OAAOH,IAJ1C,gEAIWvW,EAJX,kBAQW8U,GAAMD,WAAYiB,GAAcS,KAAKA,GAAMG,OAAO1W,IAR7D,+SAgBO8U,GAAMD,WAAYiB,GAAcb,MAhBvC,QAkBCT,GAAS,GAlBV,6EAAD,sDAmBGA,I,EAKL6C,eAAiB,SAAC7C,GAChB,EAAKwC,aAAa,SAACC,GACbA,EACF,EAAKC,WAAU,kBAAM1C,GAAS,MAG9BA,GAAS,O,EAMf8C,qBAAuB,WAChB,EAAKT,iBACRzN,aAAc,EAAKyN,kB,EAKvBU,mBAAqB,WAAwC,IAAvCC,EAAsC,wDAAtBC,EAAsB,wDAEpDC,GAAwB,IAAXF,EACf,EAAKG,qBACLH,EASJ,EAAKF,uBACL,EAAKT,gBAAkB7O,YACrB,kBAAM,EAAKqP,gBACT,SAAAO,GAAO,SAAIH,GAAcG,IACrB,EAAKL,oBAAoBK,GAAkB,UAEjDF,I,EAQJC,mBAAqB,WACnB,IAAME,EAAM,IAAItD,KAEVuD,EADiB,aAAOvD,KAAP,CAAYsD,EAAIE,cAAeF,EAAIG,WAAYH,EAAII,WAAnD,mBAAiE,EAAKnB,oBAAtE,CAA0F,EAAG,KACpEe,EAEhD,OAAOC,GAAuB,EAC1BA,EAAsB,MACtBA,G,YAnIqB9F,IAAvB4E,GAcGQ,MAAS,kBAAUjK,OAAOC,KAAK0I,GAAcS,OAdhDK,GAeGF,OAAS,SAACH,GAAD,OAAUpJ,OAAOC,KAAK0I,GAAcS,KAAKA,GAAMG,SAf3DE,GAgBGH,IAAS,SAACF,GAAD,OAAUT,GAAcS,KAAKA,GAAME,KAhB/CG,GAkBGb,SAAW,SAACW,EAAQwB,GAAT,OAAkBpC,GAAcC,SAASW,GAAQwB,IAlB/DtB,GAmBGuB,WAAa,SAACzB,GAAD,OAAYE,GAAeb,SAASW,EAAQ,WAnB5DE,GAoBGwB,UAAa,SAAC1B,GAAD,OAAYE,GAAeb,SAASW,EAAQ,UApB5DE,GAqBGyB,UAAa,SAAC3B,GAAD,OAAYE,GAAeb,SAASW,EAAQ,UArB5DE,GAsBG0B,SAAa,SAAC5B,GAAD,OAAYE,GAAeb,SAASW,EAAQ,SAiHnDE,U,8BCtIT2B,I,OAAS,kBAAM,0CACfhI,GAAQ,kBAAM,kBAAC,EAAD,OAMdiI,G,4MAEJ/B,IAAM,K,EAINgC,eAAiB9Z,IAAM+Z,Y,EAGvBC,OAAS,kBAAM,EAAKF,eAAeG,QAAQC,WAAWC,cAAvC,Q,EAEfC,aAAe,WACb,OAAO,EAAKN,gBACV,YAAa,EAAKA,gBAClB,EAAKA,eAAeG,SACpB,eAAgB,EAAKH,eAAeG,SACpC,EAAKH,eAAeG,QAAQC,YAC5B,kBAAmB,EAAKJ,eAAeG,QAAQC,YAC/C,EAAKF,U,EAITK,eAAiB,SAAAC,GACf,IAAMtT,EAAQ,EAAK7I,MAAMmZ,OACtB7S,MAAM,SAAA8V,GAAC,OAAID,GAASC,EAAED,SACzB,OAAOtT,EAAQA,EAAMA,MAAQ,O,EAI/BwT,mBAAqB,SAAC1C,EAAK2C,EAAQtX,GACjC,IAAMuX,EAAO5C,EAAIqC,cAAJ,WAAsBhX,IAC9BuX,IACHA,EAAKpb,MAAMqb,KAAO,EAAKN,eAAeI,EAAOtX,M,EAKjDyX,cAAgB,SAAC9C,GACf,IAAM2C,EAAS,EAAKtc,MAAMsc,OAAQ,EAAKtc,MAAMkS,aACvCmK,EAAqB,EAAKA,mBAAmBK,KAAxB,gBAAmC/C,EAAK2C,GACnEjM,OAAOC,KAAKgM,GAAQ3F,QAAS0F,I,EAI/BM,cAAgB,SAAA3X,GACd,GAAKA,GAAM,EAAKiX,eAAiB,CAC/B,IAAMK,EAAS,EAAKtc,MAAMsc,OAAQ,EAAKtc,MAAMkS,aACvC0K,EAAU,EAAKjD,IAAIqC,cAAT,WAA2BhX,IAC3C,IAAK4X,EACH,MAAO,GAET,IAAM5Z,EAAQ4Z,EAAQC,aAAa,SACnC,OACE,oCACE,4BAAM7Z,GACJ,EAAKhD,MAAMgD,MAFf,KAE0BsZ,EAAOtX,IAKrC,MAAO,I,EAIT8X,eAAiB,SAACnD,GAChB,IAAMoD,EAAO,eAAW,EAAK/c,MAAMgF,IAKnC2U,EAAIqD,iBAAJ,aACGrG,SALa,SAAAiG,GACdA,EAAQK,aAAa,WAAYL,EAAQ5X,IACzC4X,EAAQK,aAAa,WAAYF,O,EAOrCG,gBAAkB,SAACvD,GACjB,EAAKA,IAAMA,EACX,EAAK8C,cAAc9C,GACnB,EAAKmD,eAAenD,I,EAItBwD,eAAiB,SAACxc,EAAOgZ,GACvB,GAAIhZ,EACF,MAAM2U,MAAM3U,GAEdyc,KAAaC,UACb,EAAK1D,IAAMA,EACX,EAAK8C,cAAc,EAAK9C,M,EAI1B2D,uBAAyB,WAClB,EAAKrB,gBAAkB,EAAKtC,KAC/B,EAAK8C,cAAc,EAAK9C,M,iEAITpN,EAAWC,GAC5B5L,KAAK0c,2B,0CAIL1c,KAAK0c,2B,+BAIL,OACE,oCACE,kBAAC,KAAD,CACE9J,IAAM5S,KAAKZ,MAAMud,OACjBzZ,IAAMlD,KAAK+a,eACX6B,KAAK,MACLvU,aAAW,mCACXiU,gBAAkBtc,KAAKsc,gBACvBC,eAAiBvc,KAAKuc,eACtBM,YAAY,QACZhC,SAAWA,GACXhI,QAAUA,GACViK,uBAAwB,IAE1B,kBAAC,KAAD,CACE1Y,GAAE,eAAWpE,KAAKZ,MAAMgF,IACxB2Y,WAAa/c,KAAK+b,qB,GA3HL9a,IAAMqF,WAkI7BwU,GAAS3Z,aAAe,CACtB6b,KAAM,GACNtB,OAAQ,GACRpK,YAAa,EACblP,MAAO,SAaM0Y,U,kDCrJTvU,GAAYC,aAAW,SAAC3B,GAAD,MAAY,CACvCoY,YAAa,CACXC,SAAU,KAEZC,YAAa,CACXC,UAAWvY,EAAMgD,QAAQ,QAMvBwV,GAAW,SAACje,GAChB,IAAM+I,EAAU5B,KACRnE,EAA2ChD,EAA3CgD,MAAOkb,EAAoCle,EAApCke,KAAMlZ,EAA8BhF,EAA9BgF,GAAIuK,EAA0BvP,EAA1BuP,QAAYC,EAFX,YAEyBxP,EAFzB,iCAG1B,OACE,yBAAKmB,MAAO,CACVI,OAAQ,SACR+F,QAAS,UAET,kBAAC6W,GAAA,EAAD,CAAaC,UAAQ,EAACrZ,UAAYgE,EAAQ8U,aACxC,kBAACQ,GAAA,EAAD,CAAYC,QAAUtZ,GAAOhC,GAC7B,kBAACub,GAAA,EAAD,eACEC,QAAM,GACDhP,EAFP,CAGE7C,mBAAA,sBAAkC3H,GAClCyZ,WAAY,CACVtc,KAAMa,EACNgC,GAAIA,KAGJuK,EAAQiB,KAAK,SAAArB,GAAM,OACnB,4BAAQpM,IAAG,YAAQoM,EAAOjM,OAAUA,MAAQiM,EAAOjM,OAAUiM,EAAOnM,WAGtEkb,EACE,kBAACQ,GAAA,EAAD,CAAgB1Z,GAAE,sBAAkBA,IAChCkZ,GAEF,QAQRS,GAAqBC,GAAQtE,QAChC9J,KAAK,SAAAiJ,GAAI,MAAK,CAAEvW,MAAOuW,EAAMzW,MAAOyW,MACjCoF,GAAc7c,oBAAU,kBAAVA,EAA6B,SAAChC,GAAW,IACnDiB,EAAoBjB,EAApBiB,EAAMuO,EAD4C,YAC9BxP,EAD8B,OAE1D,OACE,kBAAC,GAAD,eACEuP,QAAUoP,GACV3b,MAAQ/B,EAAE,QACVid,KAAOjd,EAAE,oCACJuO,OAMLsP,GAA0BF,GAAQtE,QACrCtE,QAAQ,SAACzG,EAASkK,GAGjB,OAFAlK,EAAQkK,GAAQmF,GAAQhF,OAAOH,GAC5BjJ,KAAK,SAAAoJ,GAAM,MAAK,CAAE1W,MAAO0W,EAAQ5W,MAAO4b,GAAQpD,SAAS5B,OACrDrK,IACN,IACCwP,GAAmB/c,oBAAU,kBAAVA,EAA6B,SAAChC,GAAW,IACxDyZ,EAA0BzZ,EAA1ByZ,KAAMxY,EAAoBjB,EAApBiB,EAAMuO,EAD2C,YAC7BxP,EAD6B,cAE/D,OACE,kBAAC,GAAD,eACEgD,MAAQ/B,EAAE,UACVid,KAAOjd,EAAE,0BACTsO,QAAUuP,GAAwBrF,IAC7BjK,OAwCIwP,G,4MA9BbC,gBAAkB,SAACle,GAAD,OAAW,EAAKf,MAAMif,gBAAgBle,EAAMme,OAAOhc,Q,EACrEic,iBAAmB,SAACpe,GAAD,OAAW,EAAKf,MAAMmf,iBAAiBpe,EAAMme,OAAOhc,Q,uDAE7D,IAAD,EACuBtC,KAAKZ,MAA3Bof,EADD,EACCA,QAASC,EADV,EACUA,SAEjB,OACE,yBAAKle,MAAO,CAAEK,UAAW,SACvB,kBAACqd,GAAD,CACE3b,MAAQkc,EACRE,SAAW1e,KAAKqe,kBAElB,kBAACM,GAAA,EAAD,CAASpe,MAAO,CAAEI,OAAQ,WAC1B,kBAACwd,GAAD,CACEtF,KAAO2F,EACPlc,MAAQmc,EACRC,SAAW1e,KAAKue,wB,GAlBPtd,IAAMC,eCtEV0d,GAtBA,SAACxf,GAAD,OACb,2BAAOmB,MAAO,CAAEI,OAAQ,SAAUyc,UAAW,SAC3C,+BACEhe,EAAMmZ,OAAO3I,KAAK,SAAC3H,EAAOsO,GAAR,OAChB,wBAAIpU,IAAMoU,GACR,wBAAIhW,MAAO,CACTse,aAAc,GACdje,UAAW,SACRqH,EAAM6W,KACX,4BAAgB,IAAVvI,EAAA,YAAmBtO,EAAMsT,OAAzB,UAAsCtT,EAAMsT,MAA5C,YAAqDnc,EAAMmZ,OAAOhC,EAAM,GAAGgF,QACjF,wBAAIhb,MAAO,CACTwe,gBAAiB9W,EAAMA,MACvBf,MAAO,GACP8X,OAAQ,2BCAdC,GAAanO,EAAW,CAE5BO,KAAM,CACJ5Q,KAAM,kBAAC,IAAD,CAAiBA,KAAOye,MAC9B9c,MAAO,mBAAW/B,EAAX,EAAGA,GAAU,SACpBgD,MAAO,SAACjE,GAAD,OAAWA,EAAMmC,MACxB0K,OAAQ,SAAC7M,GAAD,OACN,oCACsB,OAAlBA,EAAM+f,QACJ,kBAAC,EAAD,MAEA,kBAAC,GAAD,CACE/c,MAAQhD,EAAMgD,MACd4a,KAAO5d,EAAMmY,KACbmE,OAAStc,EAAM+f,QAAQzD,OACvBiB,OAASqB,GAAQjF,IAAI3Z,EAAMof,SAC3BlN,YAAclS,EAAMkS,YACpBiH,OAASnZ,EAAMmZ,OACfnU,GAAKhF,EAAMgF,QAQvBgb,KAAM,CACJ3e,KAAM,kBAAC,IAAD,CAAiBA,KAAO4e,MAC9Bjd,MAAO,mBAAW/B,EAAX,EAAGA,GAAU,SACpBgD,MAAO,mBAAWhD,EAAX,EAAGA,GAAU,wBACpB4L,OAAQ,SAAC7M,GAAD,OACN,kBAAC,GAAD,CACEof,QAAUpf,EAAMof,QAChBC,SAAWrf,EAAMqf,SACjBJ,gBAAkBjf,EAAMif,gBACxBE,iBAAmBnf,EAAMmf,qBAK/Be,OAAQ,CACN7e,KAAM,kBAAC,IAAD,CAAiBA,KAAO8e,MAC9Bnd,MAAO,mBAAW/B,EAAX,EAAGA,GAAU,WACpBgD,MAAO,SAACjE,GAAD,OAAWA,EAAMiE,OACxB4I,OAAQ,SAAC7M,GAAD,OACN,kBAAC,GAAD,CACEmZ,OAASnZ,EAAMmZ,OACf7G,SAAWtS,EAAMmY,KAAMnY,EAAMkS,mBAS/B4H,G,kDAEJ,WAAY9Z,GAAQ,IAAD,uBACjB,cAAMA,IAmBRogB,QAAU,SAACf,GAAD,MAAe,CACvBlG,OAAQyF,GAAQvD,WAAWgE,GAC3Bpb,MAAO2a,GAAQtD,UAAU+D,GACzBrc,MAAO4b,GAAQrD,UAAU8D,GACzBld,KAAMyc,GAAQrD,UAAU8D,KAxBP,EA4BnBgB,WAAa,WAAO,IAAD,EACa,EAAKrgB,MAA3Bof,EADS,EACTA,QAASC,EADA,EACAA,SAGb,EAAKiB,kBACP,EAAKA,mBAGP,EAAKA,iBAAmB,EAAK1B,QAAQ9L,KAAKsM,EAASC,GAAU,SAAAU,GAEvDX,IAAY,EAAKpf,MAAMof,SAAWC,IAAa,EAAKrf,MAAMqf,UAC5D,EAAKxe,SAAS,CAAEkf,gBAvCH,EAkEnBd,gBAAkB,SAACG,GAAa,IACtBC,EAAa,EAAKrf,MAAlBqf,SACR,EAAKxe,SAAS,CACZkf,QAAS,OAEX,EAAK/f,MAAMgT,aACT,EAAKhT,MAAMgF,GACX,CACEoa,UACAC,cA3Ea,EAiFnBF,iBAAmB,SAACE,GAAc,IACxBD,EAAY,EAAKpf,MAAjBof,QACR,EAAKve,SAAL,aACEkf,QAAS,MACN,EAAKK,QAAQf,KAElB,EAAKrf,MAAMgT,aACT,EAAKhT,MAAMgF,GACX,CACEoa,UACAC,cAvFJ,EAAKT,QAAU,IAAIA,GACnB,EAAK0B,kBAAmB,EALP,IASTlB,EAAsBpf,EAAtBof,QAASC,EAAarf,EAAbqf,SATA,OAWjB,EAAK/e,MAAL,aACEyf,QAAS,KACTQ,eAAgBnB,EAChBoB,gBAAiBnB,GACd,EAAKe,QAAQf,IAfD,E,gEA8CjBze,KAAKyf,e,yCAGY9T,EAAWC,GAExBA,EAAUuT,UAAYnf,KAAKN,MAAMyf,SACV,OAAvBnf,KAAKN,MAAMyf,QACbnf,KAAKyf,aAILzf,KAAKZ,MAAMof,UAAY7S,EAAU6S,SACjCxe,KAAKZ,MAAMqf,WAAa9S,EAAU8S,UAClCze,KAAKC,SAAS,CACZkf,QAAS,S,+BAmCL,IAAD,EAC8Cnf,KAAKZ,MAAlDmY,EADD,EACCA,KAAMjG,EADP,EACOA,YAAalN,EADpB,EACoBA,GAAIoa,EADxB,EACwBA,QAASC,EADjC,EACiCA,SADjC,EAKHze,KAAKN,MAFPyf,EAHK,EAGLA,QAASQ,EAHJ,EAGIA,eAAgBC,EAHpB,EAGoBA,gBACzBrH,EAJK,EAILA,OAAQlV,EAJH,EAIGA,MAAOjB,EAJV,EAIUA,MAAOb,EAJjB,EAIiBA,KAGxB,OACE,yBAAKhB,MAAO,CACV2c,SAAU,QACVrM,OAAQ,OACRgP,WAAY,OACZC,KAAM,YAEN,kBAACb,GAAD,CACE7a,GAAKA,EACLoa,QAAUA,EACVC,SAAWA,EACXkB,eAAiBA,EACjBC,gBAAkBA,EAClBvB,gBAAkBre,KAAKqe,gBACvBE,iBAAmBve,KAAKue,iBACxBrN,SAAWlR,KAAKZ,MAAM8R,SACtBiO,QAAUA,EACV7N,YAAcA,EACdiG,KAAOA,EACPgB,OAASA,EACTlV,MAAQA,EACRjB,MAAQA,EACRb,KAAOA,S,GA9HYN,IAAMqF,WAsI7BkY,GAAUR,GAAQtE,QAAQ,GAC1B+E,GAAWT,GAAQhF,OAAOwF,IAAS,GAEzCtF,GAAe/X,aAAe,CAC5Bqd,WACAC,YACArM,aAAc,aACdlB,SAAU,cAaGgI,IClOAhX,GDkOAgX,GEjOT6G,IAAkB7W,2FAClB8W,GAAkB,UAAMD,GAAN,eAClBE,GAAa,UAAMF,GAAN,eA6NJG,G,kDAtMb,WAAY3J,GAAQ,IAAD,8BACjB,gBAhBFhV,KAAO,oBAeY,EATnB4X,iBAAkB,EASC,EARnBC,mBAAqB,QAAQC,MAAM,KAQhB,EAHnB8G,UAAY,GAGO,EAFnBC,YAAc,GAEK,EAcnBC,UAAY,GAdO,EAenB9J,MAAQ,SAACO,GACP,OAAOM,GAAMnK,MAAO+S,GAAoBlJ,IAhBvB,EAmBnBwJ,WAAa,SAAC/J,GAEZ,EAAK4J,UAAL,YAAqB,IAAII,IAAKhK,EAAM3G,KAAK,qBAAE4Q,eAC3C,EAAKJ,YAAL,YAAuB,IAAIG,IAAKhK,EAAM3G,KAAK,qBAAE6Q,cAG7C,EAAKJ,UAAY9J,GAzBA,EA6BnBmK,OAAS,GA7BU,EAgCnBC,eAAiB,SAACC,EAAMte,GAAsD,IAA/Cue,EAA8C,uDAApC,SAACD,EAAMpL,GAAP,OAAeoL,EAAKpL,MAAQA,GACnE,GAAKqL,EAAQD,EAAMte,GACjB,MAAO,CAACse,GAEL,GAAI,aAAcA,EAAM,CAAC,IAAD,iBACRA,EAAK9f,UADG,IAC3B,IAAI,EAAJ,qBAAkC,CAAC,IAAzBggB,EAAwB,QAC1BxK,EAAQ,EAAKqK,eAAeG,EAAOxe,EAAOue,GAChD,GAAIvK,EAAMhL,OACR,MAAM,GAAN,mBAAWgL,GAAX,CAAkBsK,KAJK,+BAQ7B,MAAO,IA5CU,EAgDnBG,UAAY,SAACH,EAAMte,EAAOue,GACxB,IAAMG,EAAO,EAAKL,eAAeC,EAAMte,EAAOue,GAC9C,GAAIG,EAAK1V,OACP,OAAO0V,EAAK,IAnDG,EAwDnBC,gBAAkB,SAACC,EAAUC,GAC3B,OAAO,EAAKd,UAAU3a,MACpB,SAAC0b,GAAD,OACEA,EAAKZ,YAAcU,GACnBE,EAAKX,WAAaU,MA5DL,EAiEnBjP,KAAO,SAACgP,EAAUC,EAAY3L,EAAKsB,GACjC,IAAMuK,EAAc,EAAKJ,gBAAgBC,EAAUC,GAGnD,GAAKE,EAAc,CAGjB,IAAM/K,EAAQ,EAAKyK,UAAUM,EAAa7L,GAG1C,OAAKc,GAOE,EAAKoK,OAAOY,SAAShL,EAAMd,MAChC,EAAKkL,OAAOnW,KAAK+L,EAAMd,KAIlB4B,GAAMnK,MAAN,UAAgBgT,GAAhB,cAAmC3J,EAAMd,KAAOsB,KAXrD1M,QAAQmX,KAAR,wCAA8CL,EAA9C,YAA0DC,EAA1D,YAAwE3L,GAAO,CAAC6L,cAAa9K,MAAO,EAAK8J,YACzGvJ,GAAS,GACF,cAcX,OAFA1M,QAAQmX,KAAR,gDAAsDL,EAAtD,YAAkEC,EAAlE,YAAgF3L,GAAO,CAAC6L,cAAa9K,MAAO,EAAK8J,YACjHvJ,GAAS,GACF,cA5FU,EAqGnBwC,YAAc,SAACxC,GAAkC,IAAxBhC,EAAuB,uDAAb,aACjCsC,GAAMJ,kBACJgJ,IACA,SAAAzG,GAIEzC,EAASyC,MAEX,SAAAxZ,GACEqK,QAAQrK,MAAR,UAAiB,EAAKwB,KAAtB,kCAA4DxB,GAC5D+U,EAAQ/U,OAhHK,EAsHnByZ,UAAY,SAAC1C,IACX,yCAAC,WAAOA,GAAP,oBAAA2C,EAAA,qEAGkB,EAAKiH,QAHvB,gEAGWlL,EAHX,iBAOS4B,GAAMD,WAAN,UAAqB8I,GAArB,YAAsCzK,IAP/C,+JAcO4B,GAAMD,WAAY6I,IAdzB,QAgBClJ,GAAS,GAhBV,gEAAD,sDAiBGA,IAxIc,EA6InB6C,eAAiB,SAAC7C,GAChB,EAAKwC,aAAa,SAACC,GACbA,EACF,EAAKC,WAAU,kBAAM1C,GAAS,MAG9BA,GAAS,OAnJI,EAyJnB8C,qBAAuB,WAChB,EAAKT,iBACRzN,aAAc,EAAKyN,kBA3JJ,EAgKnBU,mBAAqB,WAAwC,IAAvCC,EAAsC,wDAAtBC,EAAsB,wDAEpDC,GAAwB,IAAXF,EACf,EAAKG,qBACLH,EASJ,EAAKF,uBACL,EAAKT,gBAAkB7O,YACrB,kBAAM,EAAKqP,gBACT,SAAAO,GAAO,SAAIH,GAAcG,IACrB,EAAKL,oBAAoBK,GAAkB,UAEjDF,IAnLe,EA2LnBC,mBAAqB,WACnB,IAAME,EAAM,IAAItD,KAEVuD,EADiB,aAAOvD,KAAP,CAAYsD,EAAIE,cAAeF,EAAIG,WAAYH,EAAII,WAAnD,mBAAiE,EAAKnB,oBAAtE,CAA0F,EAAG,KACpEe,EAEhD,OAAOC,GAAuB,EAC1BA,EAAsB,MACtBA,GA/LA7D,EACF,EAAK+J,WAAW/J,GAGhB,EAAKA,MAAO,EAAK+J,YAPF,E,UAjBUhM,I,SCmFzBkN,GAAmB,CACvBC,iBAhFgB,SAACriB,GAAW,IACpBsiB,EAA4BtiB,EAA5BsiB,MAAO1E,EAAqB5d,EAArB4d,KAAM1L,EAAelS,EAAfkS,YACfY,EAAOjR,IAAM8B,SACjB,kBAAM2e,EAAMxP,KAAK,GAAGA,KACXtC,KAAI,SAAC+R,EAAEpL,GAAH,MAAc,CAACqL,EAAGD,EAAGE,EAAG7E,EAAKzG,SAC1C,CAACmL,EAAM1E,IAET,OACE,kBAAC,KAAD,CAAqB9V,MAAM,OAAO2J,OAAQ,KACxC,kBAAC,KAAD,CAAWqB,KAAMA,EAAMvR,OAAQ,CAAEmhB,OAAQ,GAAIC,MAAO,GAAIC,KAAM,GAAKC,OAAO,UACxE,kBAAC,KAAD,CAAM1Y,KAAK,WAAW2Y,QAAQ,IAAIC,IAAK,KAAM5gB,KAAOmgB,EAAMxP,KAAK,GAAG9P,MAAQggB,OAAO,UAAUC,YAAa,IAExG,kBAAC,KAAD,CAAeC,EAAI,GAAIF,OAAO,OAAOG,gBAAgB,QACrD,kBAAC,KAAD,CAAeD,EAAI,GAAIF,OAAO,OAAOG,gBAAgB,QACrD,kBAAC,KAAD,CAAeD,EAAG,IAAKF,OAAO,OAAOG,gBAAgB,QACrD,kBAAC,KAAD,CAAeV,EAAG7E,EAAK1L,GAAclP,MAAK,UAAK8P,EAAKZ,GAAasQ,GAAKQ,OAAO,OAAOG,gBAAgB,QAEpG,kBAAC,KAAD,CAAeH,OAAO,SACtB,kBAAC,KAAD,CAAOF,QAAQ,IAAIM,OAAQ,GAAIC,IAAK,EAAGC,GAAI,KAC3C,kBAAC,KAAD,MACA,kBAAC,KAAD,SA6DNC,gBAzCoB,SAACvjB,GAAW,IACxBsiB,EAA4BtiB,EAA5BsiB,MAAO1E,EAAqB5d,EAArB4d,KAAM1L,EAAelS,EAAfkS,YACfY,EAAOjR,IAAM8B,SACjB,WAAO,IAAD,EAEE6f,GAAgB,OAALlB,QAAK,IAALA,GAAA,UAAAA,EAAOxP,KAAK,UAAZ,eAAgBA,MAnBtB,SAAC8K,EAAM9K,GACtB,OAAOA,EAAKtC,KAAI,SAAC+R,EAAEpL,GACjB,GAAKA,EAAQyG,EAAK1R,OAChB,OAAO0R,EAAKA,EAAK1R,OAAOiL,EAAM,GAG9B,IAAMsM,EAAa7F,EAAK,GAAG3D,MAAM,KAAKyJ,UAAUlT,KAAK,SAAA+R,GAAC,OAAIoB,OAAOpB,MACjEkB,EAAW,IAAOtM,EAAQyG,EAAK1R,OAC/B,IAAM4L,EAAI,aAAOL,KAAP,YAAegM,IACzB,MAAM,GAAN,OAAU3L,EAAKqD,UAAf,YAA4BrD,EAAKoD,WAAjC,YAA+CpD,EAAKmD,kBAErDyI,UAQyCE,CAAShG,EAAM0E,EAAMxP,KAAK,GAAGA,MAAQ8K,EAQ7E,OAPa0E,EAAMxP,KAAK,GAAGA,KACxBtC,KAAI,SAAC+R,EAAEpL,GAAH,MAAc,CACjB0M,GAAItB,EACJuB,GAAIxB,EAAMxP,KAAK,GAAGA,KAAKqE,GACvB4M,GAAIzB,EAAMxP,KAAK,GAAGA,KAAKqE,GACvBsL,EAAGe,EAASrM,SAIlB,CAACmL,EAAM1E,IAET,OACE,kBAAC,KAAD,CAAqB9V,MAAM,OAAO2J,OAAQ,KACxC,kBAAC,KAAD,CAAeqB,KAAMA,EAAMvR,OAAQ,CAAEmhB,OAAQ,GAAIC,MAAO,GAAIC,KAAM,GAAKC,OAAO,UAC5E,kBAAC,KAAD,CAAeJ,EAAG7E,EAAK1L,GAAclP,MACjC,CAAC,GAAD,OAAI8P,EAAKZ,GAAa2R,IAAtB,UACI/Q,EAAKZ,GAAa4R,IADtB,UAEIhR,EAAKZ,GAAa6R,KACtBf,OAAO,OAAOG,gBAAgB,QAElC,kBAAC,KAAD,CAAMhZ,KAAK,WAAW2Y,QAAQ,KAAKC,IAAK,KAAM5gB,KAAOmgB,EAAMxP,KAAK,GAAG9P,MAAQwZ,KAAK,UAAUwG,OAAO,UAAUC,YAAa,IACxH,kBAAC,KAAD,CAAM9Y,KAAK,WAAW2Y,QAAQ,KAAKC,IAAK,KAAM5gB,KAAOmgB,EAAMxP,KAAK,GAAG9P,MAAQwZ,KAAK,UAAUwG,OAAO,UAAUC,YAAa,IACxH,kBAAC,KAAD,CAAM9Y,KAAK,WAAW2Y,QAAQ,KAAKC,IAAK,KAAM5gB,KAAOmgB,EAAMxP,KAAK,GAAG9P,MAAQggB,OAAO,UAAUC,YAAa,IAEzG,kBAAC,KAAD,CAAeD,OAAO,SACtB,kBAAC,KAAD,CAAOF,QAAQ,IAAIM,OAAQ,GAAIC,IAAK,EAAGC,GAAI,KAC3C,kBAAC,KAAD,MACA,kBAAC,KAAD,UAmBOU,GARD,SAAChkB,GAAW,IAChBikB,EAAkCjkB,EAAlCikB,QAAS3H,EAAyBtc,EAAzBsc,OAAW9M,EADL,YACmBxP,EADnB,sBAEjBkkB,EAAe9B,GAAiB6B,GACtC,OACI,kBAACC,EAAD,eAAc5B,MAAQhG,EAAO2H,IAAezU,K,8DC3F5CrI,GAAYC,YAAW,CAC3BoK,KAAM,CACJC,OAAQ,IACR9J,SAAU,EACVwc,SAAU,OA0CCC,GAtCW,SAACpkB,GACzB,IAAM+I,EAAU5B,KACRkd,EAAqErkB,EAArEqkB,YAAavC,EAAwD9hB,EAAxD8hB,SAAUC,EAA8C/hB,EAA9C+hB,WAAY7e,EAAkClD,EAAlCkD,MAAOoc,EAA2Btf,EAA3Bsf,SAAa9P,EAF5B,YAE0CxP,EAF1C,8DAYN6B,IAAM8B,SACjC,WACE,IAAM2gB,EAAY,IAAIC,GAAUF,GAC1BG,EAAcF,EAAUzC,gBAAgBC,EAAUC,GAGxD,MAAO,CAACyC,cAAatN,MAFPoN,EAAU/C,eAAeiD,EAAathB,GAAOsN,KAAI,SAAAwR,GAAI,gBAAOA,EAAK5L,WAIjF,CAAC0L,EAASC,EAAW7e,EAAMmhB,IARtBG,EAZ4B,EAY5BA,YAAatN,EAZe,EAYfA,MAWpB,OACE,kBAACuN,GAAA,EAAD,eACE1f,UAAWgE,EAAQyI,KACnBkT,oBAAqB,kBAAC,KAAD,MACrBC,kBAAmB,kBAAC,KAAD,MACnBC,SAAW1N,EACX2N,SAAQ,UAAM3hB,GACd4hB,aA1BiB,SAAC/jB,EAAOmC,GAAR,OAAkBoc,EAASqE,OAAOzgB,MA2B9CsM,GAzBU,SAAbuV,EAAcC,GAAD,OACjB,kBAACC,GAAA,EAAD,CAAUliB,IAAKiiB,EAAM5O,IAAK8O,OAAM,UAAKF,EAAM5O,KAAOpT,MAAOgiB,EAAM7iB,MAC5DgjB,MAAMC,QAAQJ,EAAMtjB,UAAYsjB,EAAMtjB,SAAS8O,KAAI,SAACgR,GAAD,OAAUuD,EAAWvD,MAAS,MAyBjFuD,CAAWP,KCtCZrd,GAAYC,aAAW,SAAC3B,GAAD,MAAY,CACvCoY,YAAa,CACXC,SAAU,KAEZC,YAAa,CACXC,UAAWvY,EAAMgD,QAAQ,IAE3B4c,WAAY,CACVxd,SAAU,UACVyd,UAAW,QACXC,aAAc9f,EAAMgD,QAAQ,QAI1B+c,GAAiB,SAACxlB,GACtB,IAAM+I,EAAU5B,KACRnE,EAAuChD,EAAvCgD,MAAOkb,EAAgCle,EAAhCke,KAAMlZ,EAA0BhF,EAA1BgF,GAAItD,EAAsB1B,EAAtB0B,SAAU+jB,EAAYzlB,EAAZylB,QACnC,OACE,yBAAKtkB,MAAO,CACVI,OAAQ,SACR+F,QAAS,UAET,kBAAC6W,GAAA,EAAD,CAAaC,UAAQ,EAACrZ,UAAYgE,EAAQ8U,aACxC,kBAACQ,GAAA,EAAD,CAAYtZ,UAAY0gB,EAAU1c,EAAQsc,WAAa,KAAO/G,QAAUtZ,GAAOhC,GAC7EtB,EACAwc,EACE,kBAACQ,GAAA,EAAD,CAAgB1Z,GAAE,sBAAkBA,IAChCkZ,GAEF,QAQRD,GAAW,SAACje,GAAW,IACnBgD,EAA2ChD,EAA3CgD,MAAOkb,EAAoCle,EAApCke,KAAMlZ,EAA8BhF,EAA9BgF,GAAIuK,EAA0BvP,EAA1BuP,QAAYC,EADX,YACyBxP,EADzB,iCAE1B,OACE,kBAAC,GAAD,CACEgF,GAAKA,EACLhC,MAAQA,EACRkb,KAAOA,GAEP,kBAACK,GAAA,EAAD,eACEC,QAAM,GACDhP,EAFP,CAGE7C,mBAAA,sBAAkC3H,GAClCyZ,WAAY,CACVtc,KAAMa,EACNgC,GAAIA,KAGJuK,EAAQiB,KAAK,SAAArB,GAAM,OACnB,4BAAQpM,IAAG,YAAQoM,EAAOjM,OAAUA,MAAQiM,EAAOjM,OAAUiM,EAAOnM,aAQxE0iB,GAAwB1jB,oBAAU,oBAAVA,EAA+B,SAAChC,GAAW,IAC/DiB,EAA+BjB,EAA/BiB,EAAG8f,EAA4B/gB,EAA5B+gB,UAAcvR,EAD6C,YAC/BxP,EAD+B,mBAEhE2lB,EAA+B9jB,IAAM8B,SACzC,kBAAMod,EACGvQ,KAAK,SAAAiJ,GAAI,MAAK,CAAEvW,MAAOuW,EAAMzW,MAAOyW,QAC7C,CAACsH,IAEH,OACE,kBAAC,GAAD,eACExR,QAAUoW,EACV3iB,MAAQ/B,EAAE,YACVid,KAAOjd,EAAE,qCACJuO,OAMLoW,GAA0B5jB,oBAAU,oBAAVA,EAA+B,SAAChC,GAAW,IACjEiB,EAAiCjB,EAAjCiB,EAAG+f,EAA8BhhB,EAA9BghB,YAAgBxR,EAD6C,YAC/BxP,EAD+B,qBAElE6lB,EAAiChkB,IAAM8B,SAC3C,kBAAMqd,EACGxQ,KAAK,SAAAiJ,GAAI,MAAK,CAAEvW,MAAOuW,EAAMzW,MAAOyW,QAC7C,CAACuH,IAEH,OACE,kBAAC,GAAD,eACEhe,MAAQ/B,EAAE,cACVid,KAAOjd,EAAE,yBACTsO,QAAUsW,GACLrW,OAMLsW,GAAuB9jB,oBAAU,oBAAVA,EAA+B,SAAChC,GAAW,IAC9DiB,EAAoBjB,EAApBiB,EAAMuO,EADuD,YACzCxP,EADyC,OAE/D+lB,EAA8BlkB,IAAM8B,SACxC,iBAAM,CACJ,CAACT,MAAO,kBAAmBF,MAAO/B,EAAE,gBACpC,CAACiC,MAAO,mBAAoBF,MAAO/B,EAAE,iBAEvC,CAACA,IAEH,OACE,kBAAC,GAAD,eACE+B,MAAQ/B,EAAE,WACVid,KAAOjd,EAAE,sBACTsO,QAAUwW,GACLvW,OAQLwP,G,4MAEJgH,sBAAwB,SAACjlB,GAAD,OAAW,EAAKf,MAAMgmB,sBAAsBjlB,EAAMme,OAAOhc,Q,EACjF+iB,wBAA0B,SAACllB,GAAD,OAAW,EAAKf,MAAMimB,wBAAwBllB,EAAMme,OAAOhc,Q,EACrFgjB,qBAAuB,SAACnlB,GAAD,OAAW,EAAKf,MAAMkmB,qBAAqBnlB,EAAMme,OAAOhc,Q,EAC/EijB,oBAAsB,SAACjjB,GAAD,OAAW,EAAKlD,MAAMmmB,oBAAoBjjB,I,uDAEtD,IAAD,EAUHtC,KAAKZ,MARPomB,EAFK,EAELA,cACAC,EAHK,EAGLA,gBACAC,EAJK,EAILA,aACAC,EALK,EAKLA,YACAxF,EANK,EAMLA,UACAC,EAPK,EAOLA,YACAqD,EARK,EAQLA,YACApjB,EATK,EASLA,EAGF,OACE,yBAAKE,MAAO,CAAEK,UAAW,SACvB,kBAACkkB,GAAD,CACE3E,UAAYA,EACZ7d,MAAQkjB,EACR9G,SAAW1e,KAAKolB,wBAElB,kBAACzG,GAAA,EAAD,CAASpe,MAAO,CAAEI,OAAQ,WAC1B,kBAACqkB,GAAD,CACE5E,YAAcA,EACd9d,MAAQmjB,EACR/G,SAAW1e,KAAKqlB,0BAElB,kBAAC1G,GAAA,EAAD,CAASpe,MAAO,CAAEI,OAAQ,WAC1B,kBAACukB,GAAD,CACE5iB,MAAQojB,EACRhH,SAAW1e,KAAKslB,uBAGlB,kBAAC3G,GAAA,EAAD,CAASpe,MAAO,CAAEI,OAAQ,WAC1B,kBAAC,GAAD,CACEyD,GAAK,eACLhC,MAAQ/B,EAAE,UACVwkB,SAAO,GAEP,kBAAC,GAAD,CACEzgB,GAAK,eACLqf,YAAcA,EACdvC,SAAWsE,EACXrE,WAAasE,EACbnjB,MAAQqjB,EACRjH,SAAW1e,KAAKulB,4B,GAlDTtkB,IAAMC,eAwEVE,uBAAU,oBAAVA,CAA+Bgd,IChMxCwH,GAAe9U,EAAW,CAE9BO,KAAM,CACJ5Q,KAAM,kBAAC,IAAD,CAAiBA,KAAOolB,MAC9BzjB,MAAO,mBAAW/B,EAAX,EAAGA,GAAU,SACpBgD,MAAO,SAACjE,GAAD,OAAWA,EAAMiE,OACxB4I,OAAQ,SAAC7M,GAAD,OACN,oCACwB,OAApBA,EAAMskB,UACJ,kBAAC,EAAD,MAEA,kBAAC,GAAD,CACE1G,KAAO5d,EAAMmY,KACbmE,OAAStc,EAAMskB,UACfL,QAAUjkB,EAAMsmB,aAChBpU,YAAclS,EAAMkS,YACpBlN,GAAKhF,EAAMgF,QAQvBgb,KAAM,CACJ3e,KAAM,kBAAC,IAAD,CAAiBA,KAAO4e,MAC9Bjd,MAAO,mBAAW/B,EAAX,EAAGA,GAAU,SACpBgD,MAAO,mBAAWhD,EAAX,EAAGA,GAAU,0BACpB4L,OAAQ,SAAC7M,GAAD,OAAW,kBAAC,GAASA,OAO3B8gB,G,kDAEJ,WAAY9gB,GAAQ,IAAD,uBACjB,cAAMA,IAgBRogB,QAAU,SAACgG,EAAeC,EAAiBE,EAAaD,EAAchC,GACpE,OAAMA,EAMC,CACLrgB,MAAOqgB,EAAUgC,GAAcriB,MAC/B9B,KAAMmiB,EAAUgC,GAAcriB,OAPvB,CACLA,MAAO,MACP9B,KAAM,QArBO,EA+BnBke,WAAa,WAAO,IAAD,EACuC,EAAKrgB,MAArDomB,EADS,EACTA,cAAeC,EADN,EACMA,gBAAiBE,EADvB,EACuBA,YAGpC,EAAKjG,kBACP,EAAKA,mBAIP,EAAKA,iBAAmB,EAAKiE,UAAUzR,KACrCsT,EACAC,EACAE,GACA,SAACjC,GAEM8B,IAAkB,EAAKpmB,MAAMomB,eAC7BC,IAAoB,EAAKrmB,MAAMqmB,iBAC/BE,IAAgB,EAAKvmB,MAAMumB,aAC9B,EAAK1lB,SAAL,aACEyjB,aACG,EAAKlE,QAAQgG,EAAeC,EAAiBE,EAAa,EAAKvmB,MAAMsmB,aAAchC,SAnD7E,EAwFnBoC,WAAa,SAAC5E,EAAUC,EAAY4E,GAAY,IACvCtC,EAAe,EAAKrkB,MAApBqkB,YACDG,EAAc,EAAKD,UAAU1C,gBAAgBC,EAAUC,GACvD7K,EAAQ,EAAKqN,UAAU5C,UAAU6C,EAAamC,GAEpD,IAAMzP,EAAQ,CAEZ,IAFY,EAEN8N,EAAQX,EAAY9T,QAAQ,SAACiR,GAAD,OAChCM,IAAaN,EAAKJ,WAClBW,IAAeP,EAAKH,YAJV,eAMO2D,GANP,IAMZ,2BAA2B,CAAC,IAAjBxD,EAAgB,QAEnBoF,EAAK,EAAKrC,UAAU5C,UAAUH,EAAMmF,GAEpCE,EAAKD,GAAM,EAAKrC,UAAU5C,UAC9B6C,EACAoC,EAAGzkB,MACH,SAACqf,EAAMrf,GAAP,OAAgBqf,EAAKrf,OAASA,KAEhC,GAAI0kB,EACF,OAAOA,GAhBC,8BAqBZ,OAAOrC,EAIT,OAAOtN,GAtHU,EA2HnB4P,cAAgB,SAACV,EAAeC,EAAiBE,EAAaD,EAAchC,GAC1E,EAAKzjB,SAAL,eACMyjB,IAAc,EAAKhkB,MAAMgkB,UAAY,CAACA,aAAa,GADzD,GAEK,EAAKlE,QAAQgG,EAAeC,EAAiBE,EAAaD,EAAchC,KAE7E,IAAMqC,EAAS,EAAKD,WAAWN,EAAeC,EAAiBE,GAC/D,EAAKvmB,MAAMgT,aACT,EAAKhT,MAAMgF,GACX,CACEohB,gBACAC,kBACAC,eACAC,YAAaI,EAAOvQ,OAvIP,EA4InB4P,sBAAwB,SAACI,GAAmB,IAAD,EACc,EAAKpmB,MAApDqmB,EADiC,EACjCA,gBAAiBE,EADgB,EAChBA,YAAaD,EADG,EACHA,aACtC,EAAKQ,cAAcV,EAAeC,EAAiBE,EAAaD,EAAc,OA9I7D,EAkJnBL,wBAA0B,SAACI,GAAqB,IAAD,EACQ,EAAKrmB,MAAlDomB,EADqC,EACrCA,cAAeG,EADsB,EACtBA,YAAaD,EADS,EACTA,aACpC,EAAKQ,cAAcV,EAAeC,EAAiBE,EAAaD,EAAc,OApJ7D,EAwJnBH,oBAAsB,SAACI,GAAiB,IAAD,EACoB,EAAKvmB,MAAtDomB,EAD6B,EAC7BA,cAAeC,EADc,EACdA,gBAAiBC,EADH,EACGA,aACxC,EAAKQ,cAAcV,EAAeC,EAAiBE,EAAaD,EAAc,OA1J7D,EA8JnBJ,qBAAuB,SAACI,GAAkB,IAAD,EACiB,EAAKtmB,MAArDomB,EAD+B,EAC/BA,cAAeC,EADgB,EAChBA,gBAAiBE,EADD,EACCA,YAChCjC,EAAc,EAAKhkB,MAAnBgkB,UACR,EAAKwC,cAAcV,EAAeC,EAAiBE,EAAaD,EAAchC,IAjK7D,IAIT8B,EAA6DpmB,EAA7DomB,cAAeC,EAA8CrmB,EAA9CqmB,gBAAiBE,EAA6BvmB,EAA7BumB,YAAalC,EAAgBrkB,EAAhBqkB,YAJpC,OAOjB,EAAKE,UAAY,IAAIA,GAAUF,GAC/B,EAAK/D,kBAAmB,EAExB,EAAKhgB,MAAL,aACEgkB,UAAW,MACR,EAAKlE,QAAQgG,EAAeC,EAAiBE,EAAaD,GAAc,OAZ5D,E,gEA2DjB1lB,KAAKyf,e,yCAGY9T,EAAWC,GAExBA,EAAU8X,YAAc1jB,KAAKN,MAAMgkB,WACV,OAAzB1jB,KAAKN,MAAMgkB,UACb1jB,KAAKyf,aAILzf,KAAKZ,MAAMomB,gBAAkB7Z,EAAU6Z,eACvCxlB,KAAKZ,MAAMqmB,kBAAoB9Z,EAAU8Z,iBACzCzlB,KAAKZ,MAAMumB,cAAgBha,EAAUga,YACrC3lB,KAAKC,SAAS,CACZyjB,UAAW,OAGL1jB,KAAKZ,MAAMqkB,cAAgB9X,EAAU8X,cAE7CzjB,KAAK2jB,UAAY,IAAIA,GAAU3jB,KAAKZ,MAAMqkB,aAC1CzjB,KAAKC,SAAS,CACZyjB,UAAW,U,+BAmFP,IAAD,EAUH1jB,KAAKZ,MARPmY,EAFK,EAELA,KACAjG,EAHK,EAGLA,YACAlN,EAJK,EAILA,GACAohB,EALK,EAKLA,cACAC,EANK,EAMLA,gBACAC,EAPK,EAOLA,aACAC,EARK,EAQLA,YACAlC,EATK,EASLA,YATK,EAaHzjB,KAAKN,MADPgkB,EAZK,EAYLA,UAAWrgB,EAZN,EAYMA,MAAO9B,EAZb,EAYaA,KAGpB,OACE,yBAAKhB,MAAO,CACV2c,SAAU,QACVrM,OAAQ,OACRgP,WAAY,OACZC,KAAM,YAEN,kBAAC8F,GAAD,CACExhB,GAAKA,EACLohB,cAAgBA,EAChBC,gBAAkBA,EAClBC,aAAeA,EACfC,YAAcA,EACdlC,YAAcA,EACdC,UAAYA,EACZvD,UAAYngB,KAAK2jB,UAAUxD,UAC3BC,YAAcpgB,KAAK2jB,UAAUvD,YAC7BgF,sBAAwBplB,KAAKolB,sBAC7BC,wBAA0BrlB,KAAKqlB,wBAC/BC,qBAAuBtlB,KAAKslB,qBAC5BC,oBAAsBvlB,KAAKulB,oBAC3BrU,SAAWlR,KAAKZ,MAAM8R,SACtBI,YAAcA,EACdiG,KAAOA,EACPlU,MAAQA,EACR9B,KAAOA,S,GA9McN,IAAMqF,WAyN/Bof,GAAe,kBAErBxF,GAAiB/e,aAAe,CAC9BqkB,cANoB,eAOpBC,gBANsB,oBAOtBE,YANkB,EAOlBD,gBACAtT,aAAc,aACdlB,SAAU,cAkBGgP,ICpSAhe,GDoSAge,GE5QAiG,GAfM,CACnB,CACEhkB,IAAK,MACLmE,UAAW8f,GACX3lB,KAAM,kBAAC,IAAD,CAAiBA,KAAOye,MAC9B3d,KAAM,OAER,CACEY,IAAK,QACLmE,UAAW+f,GACX5lB,KAAM,kBAAC,IAAD,CAAiBA,KAAOolB,MAC9BtkB,KAAM,UCcK+kB,G,4DA5Bbxb,OAAQ,E,KAQRyb,MAAQ,YACc,IAAf,EAAKzb,QACRY,aAAc,EAAKZ,OACnB,EAAKA,OAAQ,I,kDARX0b,GACJxmB,KAAK8K,MAAQR,WAAYtK,KAAKumB,MAAOC,K,0BAYnCnb,EAAOmb,EAASC,GACbpb,GACHrL,KAAKumB,SAGa,IAAfvmB,KAAK8K,QACR9K,KAAK0mB,MAAMF,GACXC,S,eClBAlgB,I,OAAYC,aAAW,SAAC3B,GAAD,MAAY,CACvC8hB,OAAQ,CACNC,OAAQ,MAEVC,QAAS,CACPtjB,SAAU,aAKRujB,GAAsB,SAAC1nB,GAAW,IAC9B0B,EAA0B1B,EAA1B0B,SAAU4H,EAAgBtJ,EAAhBsJ,KAAMpG,EAAUlD,EAAVkD,MAClB6F,EAAU5B,KAEhB,OACE,kBAACyN,GAAA,EAAD,CACEtL,KAAOA,EACPqe,gBAAkB,EAClBC,UAAU,SACV3jB,MAAQf,EACR6F,QAAS,CACPwe,OAAQxe,EAAQwe,OAChBE,QAAS1e,EAAQ0e,SAEnBI,OAAK,GAEHnmB,IAYFomB,G,4MACJxI,SAAW,WACJ,EAAKtf,MAAM+nB,UACd,EAAK/nB,MAAMgoB,UAGX,EAAKhoB,MAAMioB,U,uDAKL,IAAD,EACkBrnB,KAAKZ,MAAtB+E,EADD,EACCA,UAAW9D,EADZ,EACYA,EACnB,OACE,kBAAC2T,GAAA,EAAD,CAAS3Q,MAAQhD,EAAE,sBAAwBgI,aAAcrI,KAAKZ,MAAM+nB,UAAwB9mB,EAAE,SAAdA,EAAE,SAChF,yBAAK8D,UAAS,oBAAgBA,GAAa,KACzC,2BACEoF,KAAK,WACLnF,GAAG,YACH7C,KAAK,QACL+lB,SAAWtnB,KAAKZ,MAAM+nB,UACtBzI,SAAW1e,KAAK0e,SAChBrW,aAAahI,EAAE,wBAEjB,2BACEqd,QAAQ,YACRnd,MAAO,CAAEgnB,gBAAiB,Y,GA1BItmB,IAAMC,eAmC1CsmB,GAAkBpmB,oBAAU,YAAVA,CAAuB8lB,IA4EhCO,G,4MApEb/nB,MAAQ,CACNynB,WAAW,G,EAGbrc,OAAQ,E,EAERsc,QAAU,WACR,EAAKM,aACL,EAAKznB,SAAS,CAAEknB,WAAW,K,EAG7BE,OAAS,WACP,EAAKM,WACL,EAAK1nB,SAAS,CAAEknB,WAAW,K,EAI7BQ,SAAW,WACT,EAAKD,aACL,EAAK5c,MAAQR,WAAW,EAAKsd,WAAY,K,EAG3CF,WAAa,WACN,EAAK5c,QACRY,aAAa,EAAKZ,OAClB,EAAKA,OAAQ,I,EAIjB8c,WAAa,WACX,EAAKxoB,MAAMsf,SACT,GACA,EAAKtf,MAAMkD,MAAQ,EAAKlD,MAAMyoB,IAAM,EAChC,EAAKzoB,MAAMkD,MAAQ,EACnB,GAEN,EAAKqlB,Y,qEAKL3nB,KAAK0nB,e,+BAGG,IACAP,EAAcnnB,KAAKN,MAAnBynB,UADD,EAEgCnnB,KAAKZ,MAFrC,IAEC+I,eAFD,MAEW,GAFX,EAEkByG,EAFlB,2BAGCkZ,EAA8B3f,EAA9B2f,UAAcC,EAHf,YAG+B5f,EAH/B,eAIP,OACE,oCACE,kBAAC,KAAD,eACE2e,oBAAsBA,GACtBkB,KAAO,EACPC,IAAM,EACN9f,QAAO,eAAO4f,IACTnZ,IAEP,kBAAC4Y,GAAD,CACGrjB,UAAY2jB,EACZT,OAASrnB,KAAKqnB,OACdD,QAAUpnB,KAAKonB,QACfD,UAAYA,S,GA/DFlmB,IAAMC,eCrErBgnB,GAAK,kBAA0B,OAAjB,EAAEC,KAAKC,UAAmB,GAAGC,SAAS,IAAIC,UAAU,IA2FlEvmB,G,kDA2BJ,WAAY3C,GAAQ,IAAD,8BACjB,cAAMA,IAzBRM,MAAQ,CACN6X,KAAM,KACNkM,YAAa,KACbvI,QAAS,KACTqN,MAAO,GACPC,WAAY,IAmBK,EAdnBC,WAAa,GAcM,EAVnBC,QAAU,IAAIpC,GAUK,EANnBtI,QAAU,IAAIA,GAMK,EAFnB2F,UAAY,IAAIA,GAEG,EAoEnBgF,UAAY,SAACrd,GACX,KAAQ,EAAKmd,WAAWnd,OAASA,GAC/B,EAAKmd,WAAWle,KA3LM,KAAK2d,KAAKA,KAAK,IAAIA,KAAK,IAAIA,KAAK,IAAIA,KAAK,IAAIA,KAAKA,KAAKA,OAqH/D,EA2EnBU,UAAY,SAACzoB,EAAO+a,GAAR,OAAoB,EAAKwN,QAAQG,KAAI,EAAO,IAAI,kBAAM,EAAK5oB,SAAS,CAAEib,gBA3E/D,EA4EnB4N,mBAAqB,SAAAxmB,GAAK,OAAI,EAAK5C,MAAM6X,KAAKjV,IA5E3B,EA+EnByR,MAAQ,SAACgV,GACP,IAAMxV,EAAO,YAAO,EAAKnU,MAAMmU,SAG/B,OAFAA,EAAQhJ,KAAK,CAAEhB,KAAI,OAAEwf,QAAF,IAAEA,IAAY,QACjC,EAAKJ,UAAUpV,EAAQjI,QAChB,EAAKlM,MAAMgT,aAAa,CAAEmB,aAnFhB,EAyFnBrC,SAAW,SAAA9M,GACT,IAAMmP,EAAU,EAAKnU,MAAMmU,QAAQ5D,QAAQ,SAACqZ,EAAEzS,GAAH,OAAa,EAAKkS,WAAWlS,KAAWnS,KAEnF,OADA,EAAKqkB,WAAa,EAAKA,WAAW9Y,QAAQ,SAAAsZ,GAAS,OAAIA,IAAc7kB,KAC9D,EAAKhF,MAAMgT,aAAa,CAAEmB,aA5FhB,EAiGnBnB,aAAe,SAAChO,EAAI8N,GAAU,IAEtBgX,EADc,EAAK9pB,MAAjBmU,QACmB3D,KAAK,SAACoZ,EAAEG,GAAH,sBAAeH,EAAf,GAAsB5kB,IAAO,EAAKqkB,WAAWU,GAAK,CAACC,QAASlX,GAAQ,OACpG,OAAO,EAAK9S,MAAMgT,aAAa,CAAEmB,QAAS2V,KAjGtC,YAAa9pB,GACf,EAAKupB,UAAUvpB,EAAMmU,QAAQjI,QAJd,E,gEASE,IAAD,OAClBtL,KAAKge,QAAQzG,MACX,SAAAA,GAEE,IAAM8R,GACH,EAAK3pB,MAAMwb,UACX,EAAKxb,MAAM6X,MACZ,EAAK7X,MAAMwb,UAAY,EAAKxb,MAAM6X,KAAKjM,OAAS,EAG5Cid,EAAQhR,EAEX3H,KAAK,SAAC0Z,EAAK/S,GAAN,MAAiB,CAAC+S,MAAK/S,YAE5B5G,QAAQ,gBAAE2Z,EAAF,EAAEA,IAAF,EAAO/S,MAAP,MAAkB,SAASnN,KAAKkgB,MAExC1Z,KAAK,gBAAE0Z,EAAF,EAAEA,IAAF,MAAmB,CAAEhnB,MAArB,EAAOiU,MAA4BnU,MAAOknB,EAAIlkB,QAAQ,KAAM,QAEpE,EAAKnF,SAAL,aACEsX,OAGAgR,QACAC,WAAYD,EAAM3Y,KAAK,kBAAc,CAACtN,MAAf,EAAEA,WAGrB+mB,EAAS,CAACnO,QAAS3D,EAAKjM,OAAS,GAAK,KAK5C,EAAK0S,QAAQnE,wBAEjB7Z,KAAK2jB,UAAUpN,OACb,SAAAkN,GAEE,EAAKxjB,SAAS,CAAEwjB,gBAIhB,EAAKE,UAAU9J,0B,6CAOnB7Z,KAAKge,QAAQpE,uBACb5Z,KAAK2jB,UAAU/J,uBAGf5Z,KAAK0oB,QAAQnC,U,2CAIbvmB,KAAK2oB,UAAU3oB,KAAKZ,MAAMmU,QAAQjI,U,+BAuC1B,IAAD,OAGP,IAAMtL,KAAKN,MAAM6X,OAASvX,KAAKN,MAAM+jB,YACnC,OAAO,kBAAC,EAAD,MAJF,MAOsCzjB,KAAKZ,MAA1CmU,EAPD,EAOCA,QAASpL,EAPV,EAOUA,QAASohB,EAPnB,EAOmBA,eAPnB,EAQmDvpB,KAAKN,MAAvD6X,EARD,EAQCA,KAAMkM,EARP,EAQOA,YAAavI,EARpB,EAQoBA,QAASqN,EAR7B,EAQ6BA,MAAOC,EARpC,EAQoCA,WACrCgB,EAAa1f,aAAK3B,EAAQ0B,MAAO1B,EAAQshB,OAE/C,OACE,oCACE,kBAACC,GAAA,EAAD,CAAOvlB,UAAYqlB,EAAaG,UAAY,GAE1C,yBAAKxlB,UAAYgE,EAAQyhB,eAOzB,yBAAKzlB,UAAYgE,EAAQ0hB,iBAGvB,kBAAC,GAAD,CACE9V,MAAQ/T,KAAK+T,MACb5P,UAAYgE,EAAQ2hB,UACpBnb,QAAUwX,KAIZ,kBAAC,GAAD,CACEhe,QAAS,CAAEyI,KAAMzI,EAAQ4hB,WAAYjC,UAAW3f,EAAQ2f,WACxDD,IAAMtQ,EAAKjM,OAAS,EACpBhJ,MAAQ4Y,GAAW,EACnBwD,SAAW1e,KAAK4oB,UAChBoB,iBAAmBhqB,KAAK8oB,mBACxBmB,iBAAmBjqB,KAAK8oB,mBAExBP,MAAQgB,EAAiBhB,EAAQC,EAEjC0B,kBAAoBX,EAAiB,KAAO,SAMlD,kBAACY,GAAA,EAAD,CAAMC,WAAS,EAACviB,QAAS,EAAG1D,UAAWgE,EAAQkiB,kBAE3C9W,EAAQ3D,KAAK,SAAC0a,EAAQ/T,GAAW,IACvBjQ,EAAc6f,GAAazgB,MAAK,SAAAsjB,GAAC,OAAIA,EAAE7mB,MAAQmoB,EAAO/gB,QAAtDjD,UACR,OACE,kBAAC6jB,GAAA,EAAD,CAAMI,MAAI,EAACC,GAAI,GAAIC,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAGxoB,IAAM,EAAKsmB,WAAWlS,IAC5D,kBAACjQ,EAAD,eACElC,GAAK,EAAKqkB,WAAWlS,GACrBpU,IAAM,EAAKsmB,WAAWlS,GACtBgB,KAAOA,EACPkM,YAAcA,EACdnS,YAAc4J,EACd9I,aAAe,EAAKA,aACpBlB,SAAW,EAAKA,UACXoZ,EAAOlB,oB,GAhMNnoB,IAAMC,eA8N1B0pB,GACJ9Y,EACE+Y,cAvTc,SAAChmB,GAAD,gBAAY,CAC5B+kB,aAAc/kB,EAAMgC,OAAOC,QAC3BujB,iBAAkB,CAChBzD,OAAQ,GACR1f,MAAO,OACPvG,OAAQ,GAEVkJ,MAAO,CACLrJ,QAASqE,EAAMgD,QAAQ,GACvBnB,QAAS,OACTokB,SAAU,OACVC,cAAe,UAEjBtB,MAAO,CACLxiB,SAAU,SACV+jB,IAAK,EACLpE,OAAQ,KACRpmB,QAAS,EAETyqB,cAAe,GAEjBpB,iBAAe,GACbnjB,QAAS,OACTC,WAAY,SACZC,eAAgB,gBAChBwW,UAAWvY,EAAMgD,QAAQ,GACzB8c,aAAc9f,EAAMgD,QAAQ,IAC5BqjB,WAAYrmB,EAAMgD,QAAQ,GAC1BsjB,YAAatmB,EAAMgD,QAAQ,IAPd,eASZhD,EAAMiD,YAAYC,GAAG,MAAQ,CAC5B4c,aAAc9f,EAAMgD,QAAQ,GAC5BlB,WAAY,eAXD,eAgBZ,4BAhBY,oBAiBV9B,EAAMiD,YAAYC,GAAG,MAAQ,CAC5BqV,UAAWvY,EAAMgD,QAAQ,IACzBojB,cAAepmB,EAAMgD,QAAQ,KAnBpB,eAqBVhD,EAAMiD,YAAYsE,KAAK,MAAQ,CAC9B6e,cAAepmB,EAAMgD,QAAQ,MAtBpB,OA2BfkiB,YAAU,oBACPllB,EAAMiD,YAAYC,GAAG,MAAQ,CAC5BmjB,WAAYrmB,EAAMgD,QAAQ,GAC1BsjB,YAAatmB,EAAMgD,QAAQ,KAHrB,eAKPhD,EAAMiD,YAAYsE,KAAK,MAAQ,CAC9B8e,WAAYrmB,EAAMgD,QAAQ,GAC1BsjB,YAAatmB,EAAMgD,QAAQ,KAPrB,GAWViiB,UAAU,cACRtpB,QAAS,EACT+C,SAAUsB,EAAMgD,QAAQ,GACxBujB,UAAW,0CACXC,aAAc,GACbxmB,EAAMiD,YAAYC,GAAG,MAAQ,CAC5BxE,SAAUsB,EAAMgD,QAAQ,KAI5BigB,UAAU,cACRvkB,SAAUsB,EAAMgD,QAAQ,IACvBhD,EAAMiD,YAAYC,GAAG,MAAQ,CAC5BxE,SAAUsB,EAAMgD,QAAQ,QA+O1BgjB,CAbuB,SAACvkB,GAC1B,OAAO,SAAClH,GACN,IAAMyF,EAAQ8D,cACR4gB,EAAiB1gB,YAAchE,EAAMiD,YAAYC,GAAG,OAC1D,OAAO,kBAACzB,EAAD,iBAAgBlH,EAAa,CAAEmqB,qBAUpC+B,CACEvpB,MAmCOwpB,GA5ByB,SAACnsB,GAAD,OACtC,kBAAC,EAAD,CACEuU,WAAa,aACbF,aAAe,SAACH,GAAY,IAEtBkY,EADIjY,EAAYD,EAAZC,QAGR,IACEiY,EAAgBjY,EAAQ8F,MAAM,KAAKzJ,KAAK,SAAAoZ,GAAC,OAAIyC,KAAKC,MAAOzmB,mBAAmB+jB,OAC5E,MAAMnU,GACN2W,EAAgB,GAGlB,OAAO/b,OAAO8C,OAAO,GAAInT,EAAO,CAC9BmU,QAASiY,KAGbpY,eAAiB,SAACE,GAChB,IAAMC,EAAUD,EAAOC,QAAQ3D,KAC7B,SAAAoZ,GAAC,OAAI2C,mBAAoBF,KAAKG,UAAU,CAAEriB,KAAMyf,EAAEzf,KAAM6f,QAASJ,EAAEI,cACnEyC,KAAK,KACP,MAAM,IAAN,OAAWtY,KAGb,kBAACqX,GAAgCxrB,M,oSC1W/BwC,E,uKACM,IACAvB,EAAML,KAAKZ,MAAXiB,EACR,OACE,oCACE,wBAAI+D,GAAG,iBACL,kBAAC,IAAD,CAAiB3D,KAAO+C,IAAUjD,MAAO,CAAE4qB,YAAa,UACtD9qB,EAAE,UAEN,yBAAK+D,GAAG,oBAAoB7D,MAAO,CAAEK,UAAW,SAC9C,2BACIP,EAAE,iFAAmF,IACvF,uBAAGie,OAAO,SAASwN,IAAI,sBAAsB/e,KAAK,0BAAlD,0BAFF,KAKA,2BACI1M,EAAE,+IAGN,4BAAMA,EAAE,2BACR,2BAAG,uBAAGie,OAAO,SAASwN,IAAI,sBAAsB/e,KAAK,mCAAoC1M,EAAE,2CAAgD,IACzIA,EAAE,0FAEJ,4BAAMA,EAAE,wDACR,2BAAG,uBAAGie,OAAO,SAASwN,IAAI,sBAAsB/e,KAAK,0CAA2C1M,EAAE,gCAElG,4BAAMA,EAAE,aACR,2BACIA,EAAE,iDAAmD,IACvD,uBAAGie,OAAO,SAASwN,IAAI,sBAAsB/e,KAAK,mCAAoC1M,EAAE,iBAAsB,IAC5GA,EAAE,0BAA4B,IAChC,uBAAGie,OAAO,SAASwN,IAAI,sBAAsB/e,KAAK,uDAAlD,mCAJF,KAOA,2BACI1M,EAAE,8CAAgD,IACpD,uBAAGie,OAAO,SAASwN,IAAI,sBAAsB/e,KAAK,yCAAlD,cAAyG,IACvG1M,EAAE,+BAAiC,IACrC,uBAAGie,OAAO,SAASwN,IAAI,sBAAsB/e,KAAK,uDAAlD,mCAJF,KAOA,2BACI1M,EAAE,sCAAwC,IAC5C,uBAAGie,OAAO,SAASwN,IAAI,sBAAsB/e,KAAK,yCAAlD,cAAyG,IACvG1M,EAAE,mCAAqC,IAAI,wDAC3CA,EAAE,kCACJ,uBAAGie,OAAO,SAASwN,IAAI,sBAAsB/e,KAAK,+CAAlD,yCACE1M,EAAE,iBAAmB,IACrBA,EAAE,mBAAqB,IACzB,uBAAGie,OAAO,SAASwN,IAAI,sBAAsB/e,KAAK,sGAAuG1M,EAAE,8BAR7J,W,GAzCUY,IAAMqF,WA2DXlF,sBAAU,QAAVA,CAAmBQ,G,6CCzD5BC,E,uKACM,IAAD,EACmC7B,KAAKZ,MAAvCiB,EADD,EACCA,EAAG2D,EADJ,EACIA,SAAUmC,EADd,EACcA,iBAEf4lB,EAAoBtmB,IAAU2P,QAAO,SAAC4W,EAAW9Q,GACrD,OAAK8Q,EAAUtmB,MAAK,SAAC6kB,GAAD,OAAUA,EAAKnoB,QAAU8Y,EAAQ9Y,SAG5C4pB,EAFAA,EAAUC,OAAO,CAAC/Q,MAI1B,IAEH,OACE,oCACE,wBAAI9W,GAAG,iBACL,kBAAC,IAAD,CAAiB3D,KAAMgD,IAAYlD,MAAO,CAAE4qB,YAAa,UACxD9qB,EAAE,aAEL,6BACE,kBAACkd,EAAA,EAAD,CAAana,UAAU,YACrB,kBAAC8oB,EAAA,EAAD,CACE7jB,aAAW,WACX9G,KAAK,WACLe,MAAO0B,EACP0a,SAAU,SAAC3U,GAAD,OAAO5D,EAAiB4D,EAAEuU,OAAOhc,SAE1CypB,EAAkBnc,KAAI,SAACuc,EAAK5V,GAAN,OACrB,kBAAC6V,EAAA,EAAD,CACEjqB,IAAKoU,EACLjU,MAAO6pB,EAAIhqB,IACXkqB,QAAS,kBAACC,EAAA,EAAD,MACTlqB,MAAO+pB,EAAI/pB,mB,GA/BNnB,IAAMqF,WA0CdlF,sBAAU,WAAVA,CAAsBS,GCxB/B0qB,EAAmB,SAACnsB,EAAQgD,GAAT,OAAuB,kBAACjE,EAAA,EAAiB,CAAEiB,SAAS+B,IAAK/B,GAAYgD,IAExF3B,EAAYL,oBAAU,YAAVA,EAAuB,SAAChC,GAAW,IAC3CiB,EAAMjB,EAANiB,EACR,OACE,kBAACmsB,EAAA,EAAD,CAAYjkB,QAAQ,QAAQN,MAAM,gBAAgBwkB,MAAM,UACrD,kBACD,kBAACC,EAAA,EAAD,CAAMzkB,MAAM,UAAU8E,KAAK,mCACvB1M,EAAE,mBAAqB,IACzB,4BACIA,EAAE,cAAgB,IACpB,8BAAQA,EAAE,iBAEN,KACP,IAAIwW,MAAOwD,cACX,QAKDsS,EAAmB,SAACvtB,GACxB,IAAMwtB,EAAkB/jB,YAAc,gCAC9BU,EAAmBnK,EAAnBmK,KAAMzI,EAAa1B,EAAb0B,SAER+D,EAAQ5D,IAAM8B,SAClB,kBACE8pB,YAAe,CACbC,QAAS,CACPvjB,KAAMA,IAEEqjB,EACE,OACA,cAGhB,CAACA,EAAiBrjB,IAGpB,OACE,kBAACwjB,EAAA,EAAD,CAAeloB,MAAQA,GACrB,kBAACmoB,EAAA,EAAD,MACElsB,IAOFyF,EAAYC,aAAW,SAAC3B,GAAD,MAAY,CACvC+L,KAAM,CACJlK,QAAS,QAEXI,QAAS,CACP+X,aAAc,IAEhBoO,OAAQ,CACNrG,OAAQ/hB,EAAM+hB,OAAOsG,OAAS,EAC9B/lB,WAAYtC,EAAMuC,YAAYC,OAAO,CAAC,QAAS,UAAW,CACxDC,OAAQzC,EAAMuC,YAAYE,OAAOC,MACjCC,SAAU3C,EAAMuC,YAAYI,SAASI,iBAGzCulB,YAAa,CACXjC,WAjBgB,IAkBhBhkB,MAAM,eAAD,OAlBW,IAkBX,OACLC,WAAYtC,EAAMuC,YAAYC,OAAO,CAAC,QAAS,UAAW,CACxDC,OAAQzC,EAAMuC,YAAYE,OAAOC,MACjCC,SAAU3C,EAAMuC,YAAYI,SAASC,kBAGzC2lB,WAAY,CACVjC,YAAa,IAEfkC,iBAAkB,CAChB3mB,QAAS,QAEXrD,MAAO,CACL0D,SAAU,GAEZumB,QAAS,CACPvmB,SAAU,EACV8J,OAAQ,QACRia,SAAU,QAEZV,UAAW,CACTvK,WAAYhb,EAAMgD,QAAQ,GAC1BojB,cAAepmB,EAAMgD,QAAQ,QAI3B0lB,EAAc,SAACnuB,GAAW,IAAD,EACUA,EAAMouB,WAArCxpB,EADqB,EACrBA,SAAUmC,EADW,EACXA,iBAClB,OACE,kBAACxE,EAAA,EAAD,CAAa0J,OAAQ,GACnB,kBAAC,IAAD,CACEoiB,OAAK,EACL5iB,KAAK,QACLoB,OAAS,SAAA7M,GAAK,OAAImtB,EAAiB,QAAS,kBAAC,EAAD,UAE9C,kBAAC,IAAD,CACEkB,OAAK,EACL5iB,KAAK,WACLoB,OAAQ,SAAC7M,GAAD,OACNmtB,EACE,WACA,kBAAC,EAAD,CAAUvoB,SAAUA,EAAUmC,iBAAkBA,UA8D7C/E,wBAAU,SAAVA,EAtDG,SAAChC,GACjB,IAAM+I,EAAU5B,IACRzF,EAAqC1B,EAArC0B,SAAU+D,EAA2BzF,EAA3ByF,MAAOxE,EAAoBjB,EAApBiB,EAAMuO,EAFJ,YAEkBxP,EAFlB,4BAGH6B,IAAM4N,UAAS,GAHZ,mBAGpBnG,EAHoB,KAGdglB,EAHc,KAKrBjlB,EAAmB,WACvBilB,GAAQ,IAMV,OACE,kBAAC,EAAD,CAAkBnkB,KAAO1E,GACvB,kBAAC,EAAD,CAAa2oB,WAAYpuB,IACzB,yBAAKgF,GAAG,OAAOD,UAAWgE,EAAQyI,MAChC,kBAAC+c,EAAA,EAAD,CAAQ1mB,SAAS,WAAW9C,UAAW2F,YAAK3B,EAAQ8kB,OAAQvkB,GAAQP,EAAQglB,cAC1E,kBAACS,EAAA,EAAD,CAASzpB,UAAWgE,EAAQrB,SAC1B,kBAACoI,EAAA,EAAD,CACE9G,KAAK,QACLH,MAAM,UACNI,aAAW,YACX/H,QAASmI,EACTtE,UAAW2F,YAAK3B,EAAQilB,WAAY1kB,GAAQP,EAAQklB,mBAEpD,kBAAC,IAAD,OAEF,kBAACb,EAAA,EAAD,CAAYppB,UAAU,KAAKmF,QAAQ,KAAKN,MAAM,UAAUO,QAAM,EAACrE,UAAWgE,EAAQ9E,OAC9EhD,EAAE,cAAgB,IACpB,8BAAQA,EAAE,kBAWhB,kBAAC,IAAD,cAAW,CAAEoI,mBAAkBH,kBAhCX,WACxBolB,GAAQ,IA+B8ChlB,QAAckG,IAChE,0BAAMzK,UAAWgE,EAAQmlB,SACrBxsB,EACF,kBAAC+sB,EAAA,EAAD,CAAWtK,SAAS,KAAKpf,UAAWgE,EAAQiiB,WAC1C,kBAAC0D,EAAA,EAAD,CAAKC,GAAI,GACP,kBAACtsB,EAAD,e,uEC3Ld,0EAiCAusB,IAAS/hB,OACP,kBAAC,IAAMgiB,WAAP,KACE,kBAAC,IAAD,CAAKvpB,6BA3BQ,SAACJ,GAId,IAAI4pB,EAHD5pB,EAAa6pB,UAIhB7oB,UAAUmI,cAAc7H,iBAAiB,oBAAoB,SAACzF,GAIxD+tB,IAIJA,GAA4B,EAC5B9jB,QAAQC,IAAI,qBACZnF,EAAO1F,SAASC,QAAO,OAIzB6E,EAAa6pB,QAAQC,YAAY,oBAUnCzoB,SAAS0oB,eAAe,SAO1B5gB,IAAuB,CAIrBW,SAAU,SAAA9J,GACR,IAAMnE,EAAQ,IAAImuB,YAAY,qBAAsB,CAAE/pB,OAAQ,CAAED,kBAChEqB,SAAS4oB,cAAcpuB,O","file":"static/js/main.0b4299c5.chunk.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faSyncAlt as faRefresh } from '@fortawesome/free-solid-svg-icons'\nimport { translate } from 'react-translate'\n\n// Catches unhandled errors:\n// - Show it to user\n// - Send them to GA to help improve app\nclass ErrorCatcher extends React.PureComponent {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      hasError: false,\n      errorMessage: '',\n      errorStack: '',\n      info: '',\n    };\n  }\n\n  static getDerivedStateFromError(error) {\n    // Update state so the next render will show the fallback UI.\n    return {\n      hasError: true,\n      errorMessage: error.message,\n      errorStack: error.stack,\n    };\n  }\n\n  // Catch unhandled errors and send them to help improving the app\n  componentDidCatch(error, info) {\n\n    this.setState({\n      info: info.componentStack,\n    });\n\n    this.sendEvent('Unhandled Error');\n  }\n\n  reloadApp = () => {\n    this.sendEvent('Reload from Error');\n\n    // Reload app\n    window.location.reload();\n  }\n\n  // Send event to GA\n  sendEvent(event) {\n    this.props.sendEvent(event, this.props.origin, this.state.errorMessage);\n  }\n\n  render() {\n    if (this.state.hasError) {\n      const { t } = this.props;\n      const { errorMessage, errorStack } = this.state;\n\n      // Show error to user\n      return (\n        <>\n          <h1>{ t('Something went wrong :(') }</h1>\n          <button\n            onClick={ this.reloadApp }\n            style={{ padding: '1em' }}\n          >\n            <FontAwesomeIcon\n              icon={ faRefresh }\n              style={{ margin: '0 .8em 0 .2em' }}\n            />\n            { t(\"Try reloading the app to recover from it\") }\n          </button>\n          <div style={{ textAlign: 'left' }}>\n            <h3>{ errorMessage }</h3>\n            <details style={{ whiteSpace: \"pre-wrap\" }}>\n              { errorStack }\n            </details>\n          </div>\n        </>\n      );\n    }\n\n    return this.props.children\n  }\n}\n\nErrorCatcher.defaultProps = {\n  origin: 'No name',\n  sendEvent: () => {},\n};\n\nErrorCatcher.propTypes = {\n  origin: PropTypes.string.isRequired,\n  sendEvent: PropTypes.func.isRequired,\n};\n\nexport default translate('ErrorCatcher')(ErrorCatcher);\n","const common = {\n    \"Covid Data - Refactored\": \"Dades Covid - Refactoritzada\",\n    \"Covid Data\": \"Dades Covid\",\n    \"Refactored\": \"Refactoritzada\",\n    \"Close\": \"Tanca\",\n    \"About\": \"Quant a...\",\n    \"Language\": \"Idioma\",\n    \"Help\": \"Ajuda\",\n    \"Yes\": \"Si\",\n    \"No\": \"No\",\n    \"or\": \"o\",\n};\n\nexport default {\n  locale: \"fr\", // :(\n  name: \"Català\",\n\n  App: {\n    ...common,\n  },\n\n  Copyright: {\n    ...common,\n    \"Source code of:\": \"Codi font de\",\n  },\n\n  ErrorCatcher: {\n    ...common,\n    \"Something went wrong :(\": \"Alguna cosa ha anat malament :(\",\n    \"Try reloading the app to recover from it\": \"Intenta recarregar l'aplicació per a continuar\",\n  },\n\n  Menu: {\n    ...common,\n    \"Menu\": \"Menú\",\n    \"Update!\": \"Actualitza!\",\n    \"New update available!\": \"Nova versió disponible!\",\n  },\n\n  ModalRouter: {\n    ...common,\n  },\n\n  About: {\n    ...common,\n    \"This applications displays public information extracted from the official web\": \"Aquesta aplicació mostra informació pública extreta de la página web oficial\",\n    \"The aim of this application is to display the data in different ways than the original, improving performance and adding more value to it.\": \"La finalitat d'aquesta aplicació és mostrar les dades de formes diferents a l'original, millorant-ne el rendiment i afegint-ne més valor.\",\n    \"Want more information?\": \"Vols més informació?\",\n    \"The source code is publicly available.\": \"El codi font és públicament accessible.\",\n    \"There, you can find more information about how it has been done, licence and credits.\": \"Allà trobaràs més informació sobre com s'ha fet, llicències i crèdits.\",\n    \"Found a bug? Have a petition? Want to help somehow?\": \"Has trobat un error? Tens una petició? Vols ajudar d'alguna forma?\",\n    \"Create an issue at GitHub.\": \"Crea una incidència a GitHub\",\n    \"Licenses\": \"Llicències\",\n    \"The application, scripts and documentation in\": \"L'aplicació, scripts i documentació a\",\n    \"this project\": \"aquest projecte\",\n    \"are released under the\": \"han sigut alliberats sota la\",\n    \"The scripts and documentation published in\": \"Els scripts i documentació publicats a\",\n    \"are also released under the\": \"també estan alliberades sota la\",\n    \"The data scrapped and published in\": \"Les dades aconseguides de la web oficial i publicades a\",\n    \"is licensed by their owner, the\": \"ha estat llicenciada pel seu propietari, la\",\n    \", under their own conditions (\": \", sota les seves pròpies condicions (\",\n    \", until now).\": \", fins ara).\",\n    \"See more at the\": \"Pots trobar més informació a la\",\n    \"dataset API documentation\": \"documentació de l'API del dataset\",\n  },\n\n  Language :{\n    ...common,\n  },\n\n  Help: {\n    ...common,\n  },\n\n  WidgetsList: {\n    ...common,\n  },\n\n  MenuAddWidget: {\n    ...common,\n    \"Map\": \"Mapa\",\n    \"Chart\": \"Gràfic\",\n    \"Add a graph\": \"Afegeix un gràfic\",\n    \"add\": \"afegeix\",\n  },\n\n  PlayPause: {\n    ...common,\n    \"Toggle play status\": \"Commuta l'estat de reproducció\",\n    \"play\": \"Reprodueix\",\n    \"pause\": \"Pausa\",\n  },\n\n  Widget: {\n    ...common,\n    \"remove\": \"elimina\",\n    \"Remove\": \"Elimina\",\n    \"Remove?\": \"Eliminar?\",\n    \"Confirm removal\": \"Confirma l'eliminació\",\n    \"View\": \"Veure\",\n    \"Edit\": \"Edita\",\n    \"Legend\": \"Llegenda\",\n    \"Edit map parameters\": \"Edita les opcions del mapa\",\n    \"Edit chart parameters\": \"Edita les opcions del gràfic\",\n  },\n\n  'Widget/Map/Edit': {\n    \"Type\": \"Tipus\",\n    \"Select the regions type to show\": \"Selecciona el tipus de regions a mostrar\",\n    \"Values\": \"Valors\",\n    \"Select the data origin\": \"Selecciona l'origen de les dades\",\n  },\n\n  'Widget/Chart/Edit': {\n    \"Division\": \"Divisió territorial\",\n    \"Select the division type to show\": \"Selecciona la divisió territorial a usar\",\n    \"Population\": \"Població\",\n    \"Select the population\": \"Selecciona la població\",\n    \"Dataset\": \"Conjunt de dades\",\n    \"Select the dataset\": \"Selecciona el conjunt de dades a usar\",\n    \"Extensió\": \"Extensió\",\n    \"Risc iEPG\": \"Risc iEPG\",\n    \"Region\": \"Regió\",\n    \"Select the region\": \"Selecciona la regió\",\n  },\n}\n","const common = {\n    \"Covid Data - Refactored\": \"Datos Covid - Refactorizada\",\n    \"Covid Data\": \"Datos Covid\",\n    \"Refactored\": \"Refactorizada\",\n    \"Close\": \"Cerrar\",\n    \"About\": \"Sobre...\",\n    \"Language\": \"Idioma\",\n    \"Help\": \"Ayuda\",\n    \"Yes\": \"Sí\",\n    \"No\": \"No\",\n    \"or\": \"o\",\n};\n\nexport default {\n  locale: \"es\",\n  name: \"Castellano\",\n\n  App: {\n    ...common,\n  },\n\n  Copyright: {\n    ...common,\n    \"Source code of:\": \"Código fuente de\",\n  },\n\n  ErrorCatcher: {\n    ...common,\n    \"Something went wrong :(\": \"Algo ha ido mal :(\",\n    \"Try reloading the app to recover from it\": \"Intenta recargar la aplicación para continuar\",\n  },\n\n  Menu: {\n    ...common,\n    \"Menu\": \"Menú\",\n    \"Update!\": \"¡Actualizar!\",\n    \"New update available!\": \"¡Nueva actualización disponible!\",\n  },\n  \n  ModalRouter: {\n    ...common,\n  },\n\n  About: {\n    ...common,\n    \"This applications displays public information extracted from the official web\": \"Esta aplicación muestra información pública extraída de la página web oficial\",\n    \"The aim of this application is to display the data in different ways than the original, improving performance and adding more value to it.\": \"El propósito de esta aplicación es mostrar los datos de una manera distinta al original, mejorando su rendimiento y añadiéndole más valor.\",\n    \"Want more information?\": \"¿Quieres saber más?\",\n    \"The source code is publicly available.\": \"El código fuente está disponible al público.\",\n    \"There, you can find more information about how it has been done, licence and credits.\": \"Ahí puedes encontrar más información sobre cómo se ha hecho, la licencia y los créditos.\",\n    \"Found a bug? Have a petition? Want to help somehow?\": \"¿Has encontrado un bug? ¿Tienes alguna petición? ¿Quieres ayudar de alguna forma?\",\n    \"Create an issue at GitHub.\": \"Abre un nuevo issue en GitHub.\",\n    \"Licenses\": \"Licencias\",\n    \"The application, scripts and documentation in\": \"La aplicación, scripts y documentación de\",\n    \"this project\": \"este projecto\",\n    \"are released under the\": \"están publicados bajo la\",\n    \"The scripts and documentation published in\": \"Los scripts y la documentación publicada en\",\n    \"are also released under the\": \"también están publicados bajo la\",\n    \"The data scrapped and published in\": \"Los datos recolectados y publicados en\",\n    \"is licensed by their owner, the\": \"está bajo la licencia de su propietario, \",\n    \", under their own conditions (\": \", bajo sus propias condiciones (\",\n    \", until now).\": \", hasta ahora).\",\n    \"See more at the\": \"Ver más en la\",\n    \"dataset API documentation\": \"documentación de la API del dataset\",\n  },\n  \n  Language: {\n    ...common,\n  },\n\n  Help: {\n    ...common,\n  },\n\n  WidgetsList: {\n    ...common,\n  },\n\n  MenuAddWidget: {\n    ...common,\n    \"Map\": \"Mapa\",\n    \"Chart\": \"Gráfico\",\n    \"Add a graph\": \"Añadir un gráfico\",\n    \"add\": \"añadir\",\n  },\n\n  PlayPause: {\n    ...common,\n    \"Toggle play status\": \"Conmutat el estado de reproducción\",\n    \"play\": \"reproducir\",\n    \"pause\": \"detener\",\n  },\n\n  Widget: {\n    ...common,\n    \"remove\": \"eliminar\",\n    \"Remove\": \"Eliminar\",\n    \"Remove?\": \"Eliminar?\",\n    \"Confirm removal\": \"Confirmar la eliminación\",\n    \"View\": \"Ver\",\n    \"Edit\": \"Editar\",\n    \"Legend\": \"Leyenda\",\n    \"Edit map parameters\": \"Editar las opciones del mapa\",\n    \"Edit chart parameters\": \"Editar las opciones del gráfico\",\n  },\n\n  'Widget/Map/Edit': {\n    \"Type\": \"Tipo\",\n    \"Select the regions type to show\": \"Seleccionar el tipo de regiones a mostrar\",\n    \"Values\": \"Valores\",\n    \"Select the data origin\": \"Selecciona el origen de los datos\",\n  },\n\n  'Widget/Chart/Edit': {\n    \"Division\": \"División territorial\",\n    \"Select the division type to show\": \"Seleccionar la división territorial a usar\",\n    \"Population\": \"Población\",\n    \"Select the population\": \"Seleccionar la población\",\n    \"Dataset\": \"Conjunto de datos\",\n    \"Select the dataset\": \"Seleccionar el conjunto de datos a usar\",\n    \"Extensió\": \"Extensión\",\n    \"Risc iEPG\": \"Riesgo iEPG\",\n    \"Region\": \"Región\",\n    \"Select the region\": \"Seleccionar la región\",\n  },\n}\n","const common = {\n    \"Covid Data - Refactored\": \"Covid Data - Refactored\",\n    \"Covid Data\": \"Covid Data\",\n    \"Refactored\": \"Refactored\",\n    \"Close\": \"Close\",\n    \"About\": \"About...\",\n    \"Language\": \"Language\",\n    \"Help\": \"Help\",\n    \"Yes\": \"Yes\",\n    \"No\": \"No\",\n    \"or\": \"or\",\n};\n\nexport default {\n  locale: \"en\",\n  name: \"English\",\n\n  App: {\n    ...common,\n  },\n\n  Copyright: {\n    ...common,\n    \"Source code of:\": \"Source code of:\",\n  },\n\n  ErrorCatcher: {\n    ...common,\n    \"Something went wrong :(\": \"Something went wrong :(\",\n    \"Try reloading the app to recover from it\": \"Try reloading the app to recover from it\",\n  },\n\n  Menu: {\n    ...common,\n    \"Menu\": \"Menu\",\n    \"Update!\": \"Update!\",\n    \"New update available!\": \"New update available!\",\n  },\n\n  ModalRouter: {\n    ...common,\n  },\n\n  About: {\n    ...common,\n    \"This applications displays public information extracted from the official web\": \"This applications displays public information extracted from the official web\",\n    \"The aim of this application is to display the data in different ways than the original, improving performance and adding more value to it.\": \"The aim of this application is to display the data in different ways than the original, improving performance and adding more value to it.\",\n    \"Want more information?\": \"Want more information?\",\n    \"The source code is publicly available.\": \"The source code is publicly available.\",\n    \"There, you can find more information about how it has been done, licence and credits.\": \"There, you can find more information about how it has been done, licence and credits.\",\n    \"Found a bug? Have a petition? Want to help somehow?\": \"Found a bug? Have a petition? Want to help somehow?\",\n    \"Create an issue at GitHub.\": \"Create an issue at GitHub.\",\n    \"Licenses\": \"Licenses\",\n    \"The application, scripts and documentation in\": \"The application, scripts and documentation in\",\n    \"this project\": \"this project\",\n    \"are released under the\": \"are released under the\",\n    \"The scripts and documentation published in\": \"The scripts and documentation published in\",\n    \"are also released under the\": \"are also released under the\",\n    \"The data scrapped and published in\": \"The data scrapped and published in\",\n    \"is licensed by their owner, the\": \"is licensed by their owner, the\",\n    \", under their own conditions (\": \", under their own conditions (\",\n    \", until now).\": \", until now).\",\n    \"See more at the\": \"See more at the\",\n    \"dataset API documentation\": \"dataset API documentation\",\n  },\n\n  Language :{\n    ...common,\n  },\n\n  Help: {\n    ...common,\n  },\n\n  WidgetsList: {\n    ...common,\n  },\n\n  MenuAddWidget: {\n    ...common,\n    \"Map\": \"Map\",\n    \"Chart\": \"Chart\",\n    \"Add a graph\": \"Add a graph\",\n    \"add\": \"add\",\n  },\n\n  PlayPause: {\n    ...common,\n    \"Toggle play status\": \"Toggle play status\",\n    \"play\": \"play\",\n    \"pause\": \"pause\",\n  },\n\n  Widget: {\n    ...common,\n    \"remove\": \"remove\",\n    \"Remove\": \"Remove\",\n    \"Remove?\": \"Remove?\",\n    \"Confirm removal\": \"Confirm removal\",\n    \"View\": \"View\",\n    \"Edit\": \"Edit\",\n    \"Legend\": \"Legend\",\n    \"Edit map parameters\": \"Edit map parameters\",\n    \"Edit chart parameters\": \"Edit chart parameters\",\n  },\n\n  'Widget/Map/Edit': {\n    \"Type\": \"Type\",\n    \"Select the regions type to show\": \"Select the regions type to show\",\n    \"Values\": \"Values\",\n    \"Select the data origin\": \"Select the data origin\",\n  },\n\n  'Widget/Chart/Edit': {\n    \"Division\": \"Division\",\n    \"Select the division type to show\": \"Select the division type to show\",\n    \"Population\": \"Population\",\n    \"Select the population\": \"Select the population\",\n    \"Dataset\": \"Dataset\",\n    \"Select the dataset\": \"Select the dataset\",\n    \"Extensió\": \"Extensió\",\n    \"Risc iEPG\": \"Risc iEPG\",\n    \"Region\": \"Region\",\n    \"Select the region\": \"Select the region\",\n  },\n}\n","const common = {\n    \"Covid Data - Refactored\": \"Covid Data - Refactored\",\n    \"Covid Data\": \"Covid Data\",\n    \"Refactored\": \"Refactored\",\n    \"Close\": \"Zamknij\",\n    \"About\": \"O Covid Data...\",\n    \"Language\": \"Język\",\n    \"Help\": \"Pomoc\",\n    \"Yes\": \"Tak\",\n    \"No\": \"Nie\",\n    \"or\": \"albo\",\n};\n\nexport default {\n  locale: \"pl\",\n  name: \"Polish\",\n\n  App: {\n    ...common,\n  },\n\n  Copyright: {\n    ...common,\n    \"Source code of:\": \"Kod źródłowy:\",\n  },\n\n  ErrorCatcher: {\n    ...common,\n    \"Something went wrong :(\": \"Coś poszło nie tak :(\",\n    \"Try reloading the app to recover from it\": \"Spróbuj odświeżyć stronę by się z tego wydostać\",\n  },\n\n  Menu: {\n    ...common,\n    \"Menu\": \"Menu\",\n    \"Update!\": \"Aktualizacja!\",\n    \"New update available!\": \"Nowa aktualizacja dostępna!\",\n  },\n\n  ModalRouter: {\n    ...common,\n  },\n\n  About: {\n    ...common,\n    \"This applications displays public information extracted from the official web\": \"Aplikacja pokazuje publicznie dostępne informacje z oficjalnych źródeł\",\n    \"The aim of this application is to display the data in different ways than the original, improving performance and adding more value to it.\": \"Celem aplikacji jest pokazanie danych na inne sposoby niż dotychczas dostępne, dając wartość ze sposobu ukazania ich.\",\n    \"Want more information?\": \"Potrzebujesz więcej informacji?\",\n    \"The source code is publicly available.\": \"Kod źródłowy jest dostępny publicznie.\",\n    \"There, you can find more information about how it has been done, licence and credits.\": \"Tutaj możesz znaleźć informacje o powstawaniu aplikacji, licencjach oraz autorach.\",\n    \"Found a bug? Have a petition? Want to help somehow?\": \"Błąd? Pomysł? Chcesz pomóc?\",\n    \"Create an issue at GitHub.\": \"Stwórz ticket na GitHubie.\",\n    \"Licenses\": \"Licencje\",\n    \"The application, scripts and documentation in\": \"Aplikacja, skrypty i dokumentacja w\",\n    \"this project\": \"ten projekt\",\n    \"are released under the\": \"jest wydawany w ramach\",\n    \"The scripts and documentation published in\": \"Skrypty i dokumentacja udostępniona w \",\n    \"are also released under the\": \"także udostępniane jako\",\n    \"The data scrapped and published in\": \"Dane pochodzące i udostępnione w\",\n    \"is licensed by their owner, the\": \"licencjonowane przez właściciela: \",\n    \", under their own conditions (\": \", na ich własnych zasadach (\",\n    \", until now).\": \", dotychczas).\",\n    \"See more at the\": \"Sprawdź więcej na\",\n    \"dataset API documentation\": \"dokumentacja źródła API\",\n  },\n\n  Language: {\n    ...common,\n  },\n\n  Help: {\n    ...common,\n  },\n\n  WidgetsList: {\n    ...common,\n  },\n\n  MenuAddWidget: {\n    ...common,\n    \"Map\": \"Mapa\",\n    \"Chart\": \"Wykres\",\n    \"Add a graph\": \"Dodaj wykres\",\n    \"add\": \"dodaj\",\n  },\n\n  PlayPause: {\n    ...common,\n    \"Toggle play status\": \"Przełącz status\",\n    \"play\": \"play\",\n    \"pause\": \"pause\",\n  },\n\n  Widget: {\n    ...common,\n    \"remove\": \"usuń\",\n    \"Remove\": \"Usuń\",\n    \"Remove?\": \"Usunąć??\",\n    \"Confirm removal\": \"Potwierdź usunięcie\",\n    \"View\": \"Widok\",\n    \"Edit\": \"Edycja\",\n    \"Legend\": \"Legenda\",\n    \"Edit map parameters\": \"Edytuj parametry mapy\",\n    \"Edit chart parameters\": \"Edytuj parametry wykres\",\n  },\n\n  'Widget/Map/Edit': {\n    \"Type\": \"Typ\",\n    \"Select the regions type to show\": \"Wybierz regiony do pokazania\",\n    \"Values\": \"Wartość\",\n    \"Select the data origin\": \"Wybierz źródło\",\n  },\n\n  'Widget/Chart/Edit': {\n    \"Division\": \"Division\",\n    \"Select the division type to show\": \"Select the division type to show\",\n    \"Population\": \"Population\",\n    \"Select the population\": \"Select the population\",\n    \"Dataset\": \"Dataset\",\n    \"Select the dataset\": \"Select the dataset\",\n    \"Extensió\": \"Extensió\",\n    \"Risc iEPG\": \"Risc iEPG\",\n    \"Region\": \"Region\",\n    \"Select the region\": \"Select the region\",\n  },\n}\n","const common = {\n    \"Covid Data - Refactored\": \"Covid informasjon - Refaktorert\",\n    \"Covid Data\": \"Covid Informasjon\",\n    \"Refactored\": \"Refaktorert\",\n    \"Close\": \"lukk\",\n    \"About\": \"Om...\",\n    \"Language\": \"Språk\",\n    \"Help\": \"Hjelp\",\n    \"Yes\": \"Ja\",\n    \"No\": \"Nei\",\n    \"or\": \"eller\",\n};\n\nexport default {\n  locale: \"no\",\n  name: \"Norsk\",\n\n  App: {\n    ...common,\n  },\n\n  Copyright: {\n    ...common,\n    \"Source code of:\": \"Kildekoden til:\",\n  },\n\n  ErrorCatcher: {\n    ...common,\n    \"Something went wrong :(\": \"Noe gikk galt :(\",\n    \"Try reloading the app to recover from it\": \"Prøv å starte appen på nytt for å gjenopprette fra det\",\n  },\n\n  Menu: {\n    ...common,\n    \"Menu\": \"Meny\",\n    \"Update!\": \"Oppdater!\",\n    \"New update available!\": \"Ny oppdatering tilgjengelig!\",\n  },\n\n  ModalRouter: {\n    ...common,\n  },\n\n  About: {\n    ...common,\n    \"This applications displays public information extracted from the official web\": \"Denne applikasjonen viser offentlig informasjon hentet ut fra det offesielle nett\",\n    \"The aim of this application is to display the data in different ways than the original, improving performance and adding more value to it.\": \"Målet med denne applikasjonen er å vise infromasjon på ulike måter enn den originale, forbedre ytelse og legger merverdi til den.\",\n    \"Want more information?\": \"Vil du ha mer informasjon?\",\n    \"The source code is publicly available.\": \"Kildekoden er offentlig tilgjengelig.\",\n    \"There, you can find more information about how it has been done, licence and credits.\": \"Der kan du finne mer infromasjon om hvordan det har blitt gjordt, lisens og There, you can find more information og kreditter.\",\n    \"Found a bug? Have a petition? Want to help somehow?\": \"Fant en feil? Har en begjøring? Lyst til å hjelpe?\",\n    \"Create an issue at GitHub.\": \"Opprett en sak på GitHub.\",\n    \"Licenses\": \"Lisenser\",\n    \"The application, scripts and documentation in\": \"Applikasjonen, skripts og dokumentasjon i\",\n    \"this project\": \"dette prosjektet\",\n    \"are released under the\": \"er utgitt under\",\n    \"The scripts and documentation published in\": \"Skriptene og dokumentasjonen publisert i\",\n    \"are also released under the\": \"er også utgitt under\",\n    \"The data scrapped and published in\": \"Informasjonen som er skrapet og publisert i\",\n    \"is licensed by their owner, the\": \"er lisensert av eieren\",\n    \", under their own conditions (\": \", under deres egne forhold (\",\n    \", until now).\": \", inntil videre).\",\n    \"See more at the\": \"Se more på\",\n    \"dataset API documentation\": \"dataset API dokumentasjonen\",\n  },\n\n  Language :{\n    ...common,\n  },\n\n  Help: {\n    ...common,\n  },\n\n  WidgetsList: {\n    ...common,\n  },\n\n  MenuAddWidget: {\n    ...common,\n    \"Map\": \"Kart\",\n    \"Chart\": \"Diagram\",\n    \"Add a graph\": \"Legg til en graf\",\n    \"add\": \"legg til\",\n  },\n\n  PlayPause: {\n    ...common,\n    \"Toggle play status\": \"Endre spill status\",\n    \"play\": \"spill\",\n    \"pause\": \"pause\",\n  },\n\n  Widget: {\n    ...common,\n    \"remove\": \"fjern\",\n    \"Remove\": \"Fjern\",\n    \"Remove?\": \"Fjern?\",\n    \"Confirm removal\": \"Bekreft fjerning\",\n    \"View\": \"Vis\",\n    \"Edit\": \"Rediger\",\n    \"Legend\": \"Legende\",\n    \"Edit map parameters\": \"Rediger kart parametere\",\n    \"Edit chart parameters\": \"Rediger graf parametere\",\n  },\n\n  'Widget/Map/Edit': {\n    \"Type\": \"Type\",\n    \"Select the regions type to show\": \"Velg regionene bdu ønsker å vise\",\n    \"Values\": \"Verdier\",\n    \"Select the data origin\": \"Velg datakilde\",\n  },\n\n  'Widget/Chart/Edit': {\n    \"Division\": \"Divisjon\",\n    \"Select the division type to show\": \"Velg divisjonstype å vise\",\n    \"Population\": \"Populasjon\",\n    \"Select the population\": \"Velg populasjon\",\n    \"Dataset\": \"Datasett\",\n    \"Select the dataset\": \"Velg datasett\",\n    \"Extensió\": \"Extensió\",\n    \"Risc iEPG\": \"Risc iEPG\",\n    \"Region\": \"Region\",\n    \"Select the region\": \"Velg region\",\n  },\n}\n","import ca_es from \"./ca-es.lang.js\";\nimport es_es from \"./es-es.lang.js\";\nimport en_en from \"./en-en.lang.js\";\nimport pl_pl from \"./pl-pl.lang.js\";\nimport nb_no from \"./nb-no.lang.js\";\n\n// Exports each language with more locale codes\nexport default [\n  { key: \"en\", label: en_en.name, value: en_en },\n  { key: \"en-en\", label: en_en.name, value: en_en },\n  { key: \"en-us\", label: en_en.name, value: en_en },\n  { key: \"en-au\", label: en_en.name, value: en_en },\n  { key: \"ca\", label: ca_es.name, value: ca_es },\n  { key: \"ca-es\", label: ca_es.name, value: ca_es },\n  { key: \"es\", label: es_es.name, value: es_es },\n  { key: \"es-es\", label: es_es.name, value: es_es },\n  { key: \"pl\", label: pl_pl.name, value: pl_pl },\n  { key: \"pl-pl\", label: pl_pl.name, value: pl_pl },\n  { key: \"nb-no\", label: nb_no.name, value: nb_no },\n];\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link as RouterLink } from 'react-router-dom';\n\nimport { translate } from 'react-translate'\n\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Tooltip from '@material-ui/core/Tooltip';\n/*\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport DashboardIcon from '@material-ui/icons/Dashboard';\nimport PeopleIcon from '@material-ui/icons/People';\nimport BarChartIcon from '@material-ui/icons/BarChart';\nimport LayersIcon from '@material-ui/icons/Layers';\nimport AssignmentIcon from '@material-ui/icons/Assignment';\n*/\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faInfoCircle as faAbout, faLanguage } from '@fortawesome/free-solid-svg-icons'\n\nconst ListItemLink = (props) => {\n  const { icon, primary, to } = props;\n\n  const renderLink = React.useMemo(\n    () => React.forwardRef((itemProps, ref) => <RouterLink to={to} ref={ref} {...itemProps} />),\n    [to],\n  );\n\n  return (\n    <li>\n      <ListItem button component={renderLink}>\n        {icon ? (\n          <Tooltip title={ primary }>\n            <ListItemIcon>{icon}</ListItemIcon>\n          </Tooltip>\n        ) : null}\n        <ListItemText primary={primary} />\n      </ListItem>\n    </li>\n  );\n}\n\nListItemLink.propTypes = {\n  icon: PropTypes.element,\n  primary: PropTypes.string.isRequired,\n  to: PropTypes.string.isRequired,\n};\n\nconst MainMenuItems = translate('Menu')((props) => {\n  const { t } = props;\n  return (\n    <div>\n      {/* <ListItemLink to=\"/\" primary={ \"Dashboard\" } icon={ <DashboardIcon /> } /> */}\n      <ListItemLink to=\"#about\" primary={ t(\"About\") } icon={ <FontAwesomeIcon style={{ fontSize: '1.5rem' }} icon={ faAbout } /> } />\n      <ListItemLink to=\"#language\" primary={ t(\"Language\") } icon={ <FontAwesomeIcon style={{ fontSize: '1.5rem' }} icon={ faLanguage } /> } />\n    </div>\n  )\n});\n\nconst SecondaryMenuItems = (props) => {\n  return (\n    <div>\n      {/* <ListSubheader inset>Saved reports</ListSubheader> */}\n    </div>\n  )\n}\n\nexport { MainMenuItems, SecondaryMenuItems, ListItemLink };\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { HashRouter as Router } from 'react-router-dom';\n\nimport Storage from 'react-simple-storage';\nimport { TranslatorProvider, useTranslate } from 'react-translate';\nimport { Helmet, HelmetProvider } from 'react-helmet-async';\nimport available from './i18n/available';\n\nimport ErrorCatcher from './ErrorCatcher';\nimport Dashboard from './Dashboard';\nimport { WidgetsList } from './Widget';\n\n// App Helmet: Controls HTML <head> elements with SideEffect\n// - Set a default title and title template, translated\nconst AppHelmet = (props) => {\n  const t = useTranslate(\"App\");\n  const title = t(\"Covid Data - Refactored\");\n  return (\n    <Helmet\n      titleTemplate={ `%s | ${ title }` }\n      defaultTitle={ title }\n    >\n      <html lang={ props.language } />\n    </Helmet>\n  );\n}\n\n// Concentrate all providers (4) used in the app into a single component\nconst AppProviders = (props) => {\n  return (\n    <TranslatorProvider translations={ props.translations }>\n      <HelmetProvider>\n        <AppHelmet language={ props.language } />\n        <Router>\n          <div className='App' id='router-container'>\n            { props.children }\n          </div>\n        </Router>\n      </HelmetProvider>\n    </TranslatorProvider>\n  );\n}\n\nclass App extends React.Component {\n\n  constructor() {\n    super();\n\n    // Fix bad browser encoding HASH\n    const decoded = decodeURIComponent(global.location.hash);\n    if ( decoded !==  '' && decoded !== global.location.hash ) {\n      const hash = decoded.replace(/[^#]*(#.*)$/, '$1');\n      global.location.replace(hash);\n    }\n\n    this.registration = false;\n    const languageNav = navigator.language.toLowerCase();\n    this.state = {\n      initializing: true,\n      newServiceWorkerDetected: false,\n      language: available.find(language => language.key === languageNav) ? languageNav : 'ca-es',\n      theme: false, // Use defined by user in browser\n      tutorialSeen: false,\n    };\n  }\n\n  componentDidMount() {\n    // Receive message from index.js when a new service worker has been detected\n    document.addEventListener('onNewServiceWorker', this.handleNewServiceWorker);\n  }\n\n  componentWillUnmount() {\n    // Remove event listener\n    document.removeEventListener('onNewServiceWorker', this.handleNewServiceWorker);\n  }\n\n  // When new serviceWorker is accepted, save the registration object\n  // and change own state, which will be passed to Dashboard to let the user upgrade\n  handleNewServiceWorker = (event) => {\n    this.registration = event.detail.registration;\n    this.setState({\n      newServiceWorkerDetected: true,\n    });\n  }\n\n  // Once the user accepts to update, call index.js callback\n  handleLoadNewServiceWorkerAccept = () => this.props.onLoadNewServiceWorkerAccept(this.registration);\n\n  // Handle global configuration options\n  handleLanguageChange = (language) => this.setState({ language });\n  handleThemeChange = (theme) => this.setState({ theme });\n  handleTutorialSeenChange = (tutorialSeen) => this.setState({ tutorialSeen });\n\n  render() {\n    const { newServiceWorkerDetected, language, theme, tutorialSeen } = this.state;\n    const translations = available.find(_language => _language.key === language).value;\n\n    return (\n      <AppProviders { ...{\n          translations,\n          language,\n        }}\n      >\n\n        {/* Persistent state saver into localStorage */}\n        <Storage\n          parent={ this }\n          prefix='App'\n          blacklist={ ['newServiceWorkerDetected','initializing'] }\n          onParentStateHydrated={ () => this.setState({ initializing: false }) }\n        />\n\n        {/* Shows the app, with ErrorBoundaries */}\n        <ErrorCatcher origin='Dashboard'>\n          <Dashboard\n            // Handle App update acceptance by user\n            newServiceWorkerDetected={ newServiceWorkerDetected }\n            onLoadNewServiceWorkerAccept={ this.handleLoadNewServiceWorkerAccept }\n            // Use language and handle its change\n            language={ language }\n            onLanguageChange={ this.handleLanguageChange }\n            // Use theme and handle its change\n            theme={ theme }\n            onThemeChange={ this.handleThemeChange }\n            // Force tutorial?\n            tutorialSeen={ tutorialSeen }\n            onTutorialSeen={ this.handleTutorialSeenChange }\n          >\n            <ErrorCatcher origin='WidgetsList'>\n              <WidgetsList />\n            </ErrorCatcher>\n          </Dashboard>\n        </ErrorCatcher>\n\n      </AppProviders>\n    );\n  }\n}\n\nApp.propTypes = {\n  onLoadNewServiceWorkerAccept: PropTypes.func.isRequired,\n};\n\nexport default App;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { translate } from 'react-translate'\n\nimport clsx from 'clsx';\n\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\nimport Drawer from '@material-ui/core/Drawer';\nimport SwipeableDrawer from '@material-ui/core/SwipeableDrawer';\nimport Typography from '@material-ui/core/Typography';\nimport Divider from '@material-ui/core/Divider';\nimport IconButton from '@material-ui/core/IconButton';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport List from '@material-ui/core/List';\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faArrowAltCircleUp as faUpgrade } from '@fortawesome/free-solid-svg-icons'\n\nimport { MainMenuItems, SecondaryMenuItems } from './MenuItems';\n\nconst drawerWidth = 240;\n\nconst useStyles = makeStyles((theme) => ({\n  toolbarIcon: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'flex-end',\n    padding: '0 8px',\n    ...theme.mixins.toolbar,\n  },\n  title: {\n    flexGrow: 1,\n  },\n  drawerPaper: {\n    position: 'relative',\n    whiteSpace: 'nowrap',\n    width: drawerWidth,\n    transition: theme.transitions.create('width', {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.enteringScreen,\n    }),\n  },\n  drawerPaperClose: {\n    overflowX: 'hidden',\n    transition: theme.transitions.create('width', {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen,\n    }),\n    width: theme.spacing(7),\n    [theme.breakpoints.up('sm')]: {\n      width: theme.spacing(9),\n    },\n  },\n  updateItem: {\n    color: 'green',\n  },\n}));\n\nconst MenuContent = translate('Menu')((props) => {\n  const classes = useStyles();\n  const { t } = props;\n  return (\n    <>\n      <div className={ classes.toolbarIcon }>\n        <IconButton\n          edge=\"start\"\n          color=\"inherit\"\n          aria-label={ t(\"close menu\") }\n          onClick={ props.handleDrawerClose }\n        >\n          <MenuIcon />\n        </IconButton>\n        <Typography component=\"h1\" variant=\"h6\" color=\"inherit\" noWrap className={ classes.title }>\n          { t(\"Menu\") }\n        </Typography>\n        <IconButton\n          aria-label={ t(\"close menu\") }\n          onClick={ props.handleDrawerClose }\n        >\n          <ChevronLeftIcon />\n        </IconButton>\n      </div>\n      <Divider />\n      <List><MainMenuItems /></List>\n      <Divider />\n      <List><SecondaryMenuItems /></List>\n    </>\n  )\n});\n\n// Renders the menu, responsive\nconst Menu = translate('Menu')((props) => {\n  const classes = useStyles();\n  const { handleDrawerOpen, handleDrawerClose, open, newServiceWorkerDetected, t } = props;\n  const theme = useTheme();\n  const isBig = useMediaQuery(theme.breakpoints.up('md'));\n  const DrawerComponent = isBig ? Drawer : SwipeableDrawer;\n  const iOS = process.browser && /iPad|iPhone|iPod/.test(navigator.userAgent);\n\n  const toggleDrawer = (open) => (event) => {\n    if (event && event.type === 'keydown' && (event.key === 'Tab' || event.key === 'Shift')) {\n      return;\n    }\n    if (open) {\n      handleDrawerOpen();\n    }\n    else {\n      handleDrawerClose();\n    }\n  };\n  \n  const handleClickUpdate = (e) => {\n    e.preventDefault();\n    handleDrawerClose();\n    props.onLoadNewServiceWorkerAccept();\n  };\n\n  return (\n    <DrawerComponent\n      { ...(isBig ? {\n          variant: \"permanent\"\n        } : {\n          anchor: 'left',\n          onClose: toggleDrawer(false),\n          onOpen: toggleDrawer(true),\n          disableBackdropTransition: !iOS,\n          disableDiscovery: iOS,\n        }) }\n      classes={{\n        paper: clsx(classes.drawerPaper, !open && classes.drawerPaperClose),\n      }}\n      open={ open }\n    >\n      <MenuContent handleDrawerClose={ handleDrawerClose } />\n      { newServiceWorkerDetected ? (\n          <ListItem\n            button\n            onClick={ handleClickUpdate }\n            className={ classes.updateItem }\n          >\n            <Tooltip title={ t(\"Update!\") }>\n              <ListItemIcon><FontAwesomeIcon icon={ faUpgrade } style={{ fontSize: '1.5rem', color: 'green' }} /></ListItemIcon>\n            </Tooltip>\n            <ListItemText primary={ t(\"Update!\") } />\n          </ListItem>\n        ) : null\n      }\n    </DrawerComponent>\n  )\n});\n\nMenu.propTypes = {\n  onLoadNewServiceWorkerAccept: PropTypes.func.isRequired,\n};\n\nexport default Menu;\n","import React from 'react';\nimport {\n  Route,\n  Switch,\n  Redirect,\n} from 'react-router-dom';\n\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport Button from '@material-ui/core/Button';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport { useTheme } from '@material-ui/core/styles';\n\nimport { translate } from 'react-translate'\n\nclass CloseModal extends React.PureComponent {\n  constructor(props) {\n    super();\n\n    if ( !('history' in props) ||\n         props.history.location.hash !== '' ) {\n      console.log(\"CloseModal: \", {props});\n      global.setTimeout( () => props.history.push('#'), 10);\n    }\n  }\n\n  render() {\n    return null;\n  }\n};\n\nclass ModalRouterInner extends React.PureComponent {\n\n  constructor(props) {\n    super();\n\n    // Set initial state\n    this.history = props.history;\n    this.state = {\n      ...this.getPathState(props.location),\n      autoForce: false,\n      forced: props.force,\n    };\n  }\n\n  getPathState(location) {\n    const path = location.hash.replace(/[^#]*#(.*)$/, '$1');\n    return {\n      modalIsOpen: !!path.length && path !== 'close',\n      path,\n      initialPath: this.state ? this.state.initialPath : path,\n    };\n  }\n\n  componentDidMount() {\n    // Register history change event listener\n    this.unlisten = this.history.listen(this.handleHistoryChange);\n  }\n\n  componentWillUnmount() {\n    // Unregister history change event listener\n    this.unlisten();\n    if ( this.timer ) {\n      global.clearTimeout( this.timer );\n    }\n  }\n\n  // Force user to different URLs\n  componentDidUpdate(prevProps, prevState) {\n\n    // Remember old URL when forcing\n    if ( this.props.force !== false &&\n         this.props.force !== prevProps.force &&\n         this.state.forced !== this.props.force ) {\n      this.setState({ forced: this.props.force });\n    }\n\n    // Clear autoForce after it has been forced\n    if ( this.state.autoForce === this.state.path ) {\n      this.setState({ autoForce: false });\n    }\n\n    // Force old modal after forcing another (do auto force)\n    if ( prevState.path === this.state.forced &&\n         prevState.path !== this.state.path &&\n         this.state.initialPath !== false &&\n         this.state.initialPath.length > 1 &&\n         this.state.autoForce !== this.state.initialPath ) {\n      this.setState({ autoForce: this.state.initialPath });\n    }\n  }\n\n  openModal = () => this.setState({ modalIsOpen: true });\n\n  closeModal = (propsClose={}) => {\n    if ( !('history' in propsClose) ||\n         propsClose.history.location.path !== '' ) {\n\n      if(!this.timer) {\n        this.timer = global.setTimeout( () => {\n          this.history.push('#');\n          this.timer = undefined;\n        }, 10);\n      }\n    }\n  }\n\n  handleHistoryChange = (location, action) => {\n    const state = this.getPathState(location);\n    this.setState(state);\n  }\n\n  render() {\n    const { children, initializing, force, fullScreen, t } = this.props;\n    const { autoForce, path, forced } = this.state;\n\n    if ( initializing ) {\n      return null;\n    }\n\n    // Redirect to forced URL\n    if ( force !== false && force !== path ) {\n      return <Redirect push to={{ hash: force }} />;\n    }\n\n    // If previously have been forced when showing a modal,\n    // force to go back there once the forced has been visited\n    if (  autoForce !== false &&\n          autoForce !== path &&\n          forced !== path ) {\n      return <Redirect push to={{ hash: autoForce }} />;\n    }\n\n    return (\n      <Dialog\n        open={ this.state.modalIsOpen }\n        onClose={ this.closeModal }\n        /* Be fullsreen on `sm` sreens */\n        fullScreen={ fullScreen }\n        aria-labelledby={ 'modal_heading' }\n        aria-describedby={ 'modal_description' }\n      >\n        <DialogContent>\n          <Switch location={ { pathname: path } } >\n          \n            { children }\n          \n            {/* Close modal if nothing is shown */}\n            <Route render={ props => <CloseModal { ...props } /> } />\n          </Switch>\n        </DialogContent>\n        <DialogActions>\n          <Button autoFocus onClick={ this.closeModal } color=\"primary\">\n            { t(\"Close\") }\n          </Button>\n        </DialogActions>\n      </Dialog>\n    );\n  }\n}\n\n// Get fullScreen prop using MediaQuery\nconst withFullScreen = (Component) => {\n  return (props) => {\n    const theme = useTheme();\n    const fullScreen = useMediaQuery(theme.breakpoints.down('sm'));\n    return <Component { ...props } fullScreen={ fullScreen } />\n  }\n};\n\nconst ModalRouterInnerWithClasses = withFullScreen( ModalRouterInner );\n\nclass ModalRouter extends React.PureComponent {\n  render() {\n    const { children, ...rest } = this.props;\n    return (\n      <Route\n        path=':path(.*)'\n        render={ props => <ModalRouterInnerWithClasses { ...{ children, ...rest, ...props } } /> }\n      />\n    );\n  }\n}\n\nexport default translate('ModalRouter')(ModalRouter);\n","module.exports = __webpack_public_path__ + \"static/media/loading.73ea1e4a.svg\";","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\n\nimport { translate } from 'react-translate'\n\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport { useTheme } from '@material-ui/core/styles';\n\nimport Draggable from 'react-draggable';\n\nimport WidgetMenu from './Menu';\n\nclass DraggableResponsiveDialogUntranslated extends React.PureComponent {\n\n  /*\n     Handle dialog open/close status\n  */\n  state = {\n    open: false\n  };\n\n  // Set open status to the selected menu code\n  handleClickOpen = (open) => {\n    this.setState({ open });\n  }\n\n  handleClose = () => {\n    this.setState({ open: false });\n  }\n\n  render() {\n    const { open } = this.state;\n    const { id } = this.props;\n    // Get `restProps` to child renders\n    const { sections, fullScreen, t, ...restProps } = this.props;\n    // Get shortcut to content & title render functions\n    const Content = open ? sections[open].render : () => {};\n    const Title = open ? sections[open].title : () => {};\n    return (\n      <div>\n        <WidgetMenu\n          options={ sections }\n          id={ id }\n          onClick={ this.handleClickOpen }\n          { ...restProps }\n        />\n        {/* If open is not null, render the related dialog (opened) */}\n        { open ? (\n            <Dialog\n              key={ open }\n              open={ true }\n              onClose={ this.handleClose }\n              /* Allow dragging the dialog on non-small screens */\n              { ...( fullScreen ? {} : {TransitionComponent: Draggable} ) }\n              /* Be fullsreen on `sm` sreens */\n              fullScreen={ fullScreen }\n              aria-labelledby={ `draggable-dialog-title-${id}-${open}` }\n            >\n              <DialogTitle style={{ cursor: 'move' }} id={ `draggable-dialog-title-${id}-${open}` }>\n                <Title { ...restProps } t={ t } />\n              </DialogTitle>\n              <DialogContent>\n                <Content { ...restProps } t={ t } />\n              </DialogContent>\n              <DialogActions>\n                <Button autoFocus onClick={ this.handleClose } color=\"primary\">\n                  { t(\"Close\") }\n                </Button>\n              </DialogActions>\n            </Dialog>\n          ) : null\n        }\n      </div>\n    )\n  }\n}\n\nconst DraggableResponsiveDialog = translate('Widget')(DraggableResponsiveDialogUntranslated);\n\n// Get fullScreen prop using MediaQuery\nconst withFullScreen = (Component) => {\n  return (props) => {\n    const theme = useTheme();\n    const fullScreen = useMediaQuery(theme.breakpoints.down('sm'));\n    return <Component { ...props } fullScreen={ fullScreen } />\n  }\n};\n\nexport default withFullScreen(DraggableResponsiveDialog);\n","import React from 'react';\n\nimport { translate } from 'react-translate'\n\nimport IconButton from '@material-ui/core/IconButton';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faEllipsisV } from '@fortawesome/free-solid-svg-icons'\n\n// Renders an item into the widget's popup actions menu\n// Ensures click event uses widget id\nconst WidgetMenuItem = React.forwardRef((props, ref) => {\n  const { onClick, option, icon, label} = props;\n  const handleClick = () => onClick(option);\n  return (\n    <MenuItem\n      key={ option }\n      onClick={ handleClick }\n      ref={ ref }\n    >\n      <ListItemIcon>\n        { icon }\n      </ListItemIcon>\n      <ListItemText primary={ label || option } />\n    </MenuItem>\n  )\n});\n\n\n// Renders the widget's popup actions menu\nconst WidgetMenu = (props) => {\n  const { onClick, options, id, ...restProps } = props;\n\n  const [anchorEl, setAnchorEl] = React.useState(null);\n  const open = Boolean(anchorEl);\n\n  // Sets the element where the popup menu will open next to\n  const handleClickOpen = (event) => setAnchorEl(event.currentTarget);\n  const handleClose = () => setAnchorEl(null);\n\n  // When an element is clicked, close menu and call parent's onClick\n  const handleClickElement = (value) => {\n    handleClose();\n    onClick(value);\n  };\n\n  // Render the open icon button and, if in open\n  // state, the menu with all elements but `view`\n  return (\n    <div>\n      <IconButton\n        aria-label=\"widget actions\"\n        aria-controls={ `widget-menu-${ id }` }\n        aria-haspopup=\"true\"\n        onClick={ handleClickOpen }\n      >\n        <FontAwesomeIcon icon={ faEllipsisV } />\n      </IconButton>\n      { anchorEl ? (\n          <Menu\n            id={ `widget-menu-${ id }` }\n            anchorEl={ anchorEl }\n            keepMounted\n            open={ open }\n            onClose={ handleClose }\n            PaperProps={{\n              style: {\n                width: '20ch',\n              },\n            }}\n          >\n            { Object.keys(options)\n              .filter( option => option !== 'view' )\n              .map( option => (\n                <WidgetMenuItem\n                  key={ option }\n                  option={ option }\n                  onClick={ handleClickElement }\n                  icon={ options[option].icon }\n                  label={ typeof options[option].label === \"function\" ? options[option].label(restProps) : options[option].label }\n                />\n              ))\n            }\n          </Menu>\n        ) : null\n      }\n    </div>\n  );\n}\n\nexport default translate('Widget')(WidgetMenu);\n","import React from 'react';\n\nimport { translate } from 'react-translate'\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardContent from '@material-ui/core/CardContent';\n\nimport Button from '@material-ui/core/Button';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faTrash } from '@fortawesome/free-solid-svg-icons'\n\nimport WidgetActions from './Actions';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    height: '100%',\n  },\n}));\n\n// HOC to create widgets easily\nconst withWidget = (sectionsOrig) => {\n\n  // Add always available `Remove` action\n  const sections = {\n    ...sectionsOrig,\n    remove: {\n      icon: <FontAwesomeIcon icon={ faTrash } />,\n      label: ({ t }) => t(\"Remove\"),\n      title: ({ t }) => t(\"Remove?\"),\n      render: ({ id, onRemove, t }) => {\n        const handleRemove = () => onRemove(id);\n        return (\n          <Button\n            startIcon={ <FontAwesomeIcon icon={ faTrash } /> }\n            onClick={ handleRemove }\n            variant=\"contained\"\n            color=\"primary\"\n            aria-label={ t(\"remove\") }\n          >\n            { t(\"Confirm removal\") }\n          </Button>\n        )\n      },\n    },\n  };\n\n  // Get a shortcut to view's render function\n  const View = sections.view.render;\n\n  // Renders the view with a header containing the title and the menu with the rest of sections\n  const Widget = (props) => {\n    const classes = useStyles();\n    // Prevent trigger actions components update when changing the day\n    const { indexValues, ...restProps } = props;\n    const action = <WidgetActions { ...restProps } sections={ sections } />;\n\n    return (\n      <Card className={classes.root}>\n        <CardHeader\n          action={ action }\n          title={ sections.view.title(props)||props.name }\n          subheader={ props.subtitle }\n        />\n        <CardContent>\n          <View { ...props } />\n        </CardContent>\n      </Card>\n    )\n  };\n\n  return translate('Widget')(Widget);\n};\n\nexport default withWidget;\n","import React from 'react';\n\nconst WidgetDataContext = React.createContext(() => {});\n\nexport default WidgetDataContext;\n","import React from 'react';\n\nimport WidgetDataContext from './DataContext';\n\n/*\n   Proxies data from this context into Component props\n*/\nconst withPropHandler = (Component, defaults) => {\n  class WithPropHandler extends React.Component {\n    \n    dataHandler = data => {\n      const { forwardedRef, ...props } = this.props;\n      const { onChangeData = () => {}, ...restData } = data;\n      const allData = Object.assign({}, defaults, restData, props);\n\n      return (\n        <Component\n          ref={ forwardedRef }\n          /* Save and get data to/from specific id */\n          onChangeData={ onChangeData }\n          { ...allData }\n        />\n      )\n    }\n\n    render() {\n      return (\n        <WidgetDataContext.Consumer>\n          { this.dataHandler }\n        </WidgetDataContext.Consumer>\n      )\n    }\n  }\n\n  // Return wrapper respecting ref\n  const forwarded = React.forwardRef( (props, ref) => {\n    return <WithPropHandler { ...props } forwardedRef={ ref } />\n  });\n\n  forwarded.propTypes = Component.propTypes;\n  forwarded.defaultProps = Component.defaultProps;\n\n  return forwarded;\n}\n\nexport default withPropHandler;\n","import React from 'react';\nimport loading from './loading.svg';\n\nconst Loading = (props) => {\n  const { style = {}, restProps } = props;\n\n  return (\n    <img\n      alt=\"Loading...\"\n      src={ loading }\n      style={{\n        width: '80%',\n        margin: 'auto',\n        display: 'block',\n        ...style\n      }}\n      { ...restProps }\n    />\n  )\n}\n\nexport default Loading;\n","import React from 'react';\nimport { PropTypes } from 'prop-types';\nimport { Route, Switch } from 'react-router-dom';\n\nimport Storage from 'react-simple-storage';\n\nimport Loading from '../Loading';\n\nimport WidgetDataContext from './DataContext';\nimport withPropHandler from './withPropHandler';\n\n/*\n   Context provider using localStorage as data source for Widgets params\n*/\nclass LocalStorageProvider extends React.Component {\n\n  state = {\n    initializing: true,\n    data: {}\n  }\n\n  onChangeData = (data) => {\n    this.setState({ data });\n  }\n\n  stopInitializing = () => {\n    this.setState({ initializing: false });\n  }\n\n  render() {\n    const { children, ...props } = this.props;\n    const { initializing, data } = this.state;\n\n    return (\n      <>\n        {/* Persistent state saver into localStorage, only on window close */}\n        <Storage\n          parent={ this }\n          prefix='LocalStorageProvider'\n          blacklist={['initializing']}\n          onParentStateHydrated={ this.stopInitializing  }\n        />\n\n        { initializing ? <Loading /> : (\n            <WidgetDataContext.Provider value={{\n              onChangeData: this.onChangeData,\n              ...props,\n              data,\n            }}>\n              { children }\n            </WidgetDataContext.Provider>\n          )\n        }\n      </>\n    )\n  }\n}\n\n/*\n   Context provider using React Route as data source for Widgets params\n*/\nclass RouterProvider extends React.Component {\n\n  // History change listener\n  unlisten = () => {};\n\n  constructor(props) {\n    super(props);\n    this.history = props.history;\n  }\n\n  historyPush = (data, replace=false) => {\n    const newPath = this.props.paramsToString(data);\n\n    // Only PUSH or REPLACE if something have to change\n    if ( this.history.location.pathname !== newPath ) {\n      if ( !replace ) {\n        this.history.push(newPath + this.history.location.hash);\n      }\n      else {\n        this.history.replace(newPath + this.history.location.hash);\n      }\n    }\n  }\n\n  handleHistoryChange = (location, action) => {\n    // Do nothing when change is made by us\n    if( action !== 'POP' ) {\n      return;\n    }\n  }\n\n  componentDidMount = () => {\n    // Register history change event listener\n    this.unlisten = this.history.listen( this.handleHistoryChange );\n    // Check if data from localStorage is better\n    if ( !this.props.params.widgets.length &&\n          this.props.data.widgets &&\n          this.props.data.widgets.length ) {\n       this.historyPush(this.props.data, true);\n    }\n  }\n\n  componentWillUnmount = () => {\n    // Unregister history change event listener\n    this.unlisten();\n  }\n\n  // Save data into location\n  onChangeData = (data) => {\n    this.historyPush({ ...data }, true);\n    this.props.onChangeData({ ...data });\n  }\n\n  // Render the provider and the children\n  render() {\n    const {\n      children,\n      data,\n      params,\n      paramsFilter,\n      paramsToString,\n      history,\n      onChangeData,\n      ...props\n    } = this.props;\n\n    return (\n      <WidgetDataContext.Provider value={{\n        onChangeData: this.onChangeData,\n        ...props,\n        ...data,\n        ...params,\n      }}>\n        { children }\n      </WidgetDataContext.Provider>\n    )\n  }\n}\n\nRouterProvider.propTypes = {\n  // Receive data and onChangeData from localStorage\n  data: PropTypes.object.isRequired,\n  onChangeData: PropTypes.func.isRequired,\n  // Receive params and history from browser location/Router\n  params: PropTypes.object.isRequired,\n  history: PropTypes.object.isRequired,\n};\n\n// Proxy Route data into child props provider\nconst RouterSwitch = (props) => {\n  const { pathFilter, paramsFilter, paramsToString, ...restProps } = props;\n  return (\n    <Switch>\n      <Route\n        path={ pathFilter }\n        render={ propsRoute => {\n          const { match: { params }, history } = propsRoute;\n          const processedParams = paramsFilter(params);\n          return (\n            <RouterProvider\n              { ...{ paramsFilter, paramsToString, history } }\n              { ...restProps }\n              params={ processedParams }\n            />\n          )\n        }}\n      />\n    </Switch>\n  )\n}\n\n// Consume localStorage data provider\nconst RouterSwitchWithPropHandler = withPropHandler(\n  RouterSwitch,\n  { data: { widgets: {type: 'map'} } }\n);\n\n// Combine both providers\nconst ContextProvider = (props) => {\n  const { children, pathFilter, paramsFilter, paramsToString } = props;\n  return (\n    <LocalStorageProvider>\n      <RouterSwitchWithPropHandler { ...{ pathFilter, paramsFilter, paramsToString } } >\n        { children }\n      </RouterSwitchWithPropHandler>\n    </LocalStorageProvider>\n  )\n}\n\nexport default ContextProvider;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { translate } from 'react-translate'\n\nimport Tooltip from '@material-ui/core/Tooltip';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\n\nimport Fab from \"@material-ui/core/Fab\";\nimport AddIcon from '@material-ui/icons/Add';\n\n// Renders an item into the widget's popup actions menu\n// Ensures click event uses widget id\nconst WidgetMenuItem = React.forwardRef((props, ref) => {\n  const { onClick, option, icon, label} = props;\n  const handleClick = () => onClick(option);\n  return (\n    <MenuItem\n      key={ option }\n      onClick={ handleClick }\n      ref={ ref }\n    >\n      <ListItemIcon>\n        { icon }\n      </ListItemIcon>\n      <ListItemText primary={ label || option } />\n    </MenuItem>\n  )\n});\n\nconst MenuAddWidget = (props) => {\n  const { t, onAdd, options } = props;\n\n  const [anchorEl, setAnchorEl] = React.useState(null);\n  const open = Boolean(anchorEl);\n\n  // Sets the element where the popup menu will open next to\n  const handleClickOpen = (event) => setAnchorEl(event.currentTarget);\n  const handleClose = () => setAnchorEl(null);\n\n  // When an element is clicked, close menu and call parent's onClick\n  const handleClickElement = (value) => {\n    handleClose();\n    onAdd(value);\n  };\n\n  return (\n    <div>\n      <Tooltip title={ t(\"Add a graph\") } aria-label={ t(\"add\") }>\n        <Fab\n          color=\"primary\"\n          aria-label={ t(\"add\") }\n          onClick={ handleClickOpen }\n          aria-haspopup=\"true\"\n        >\n          <AddIcon />\n        </Fab>\n      </Tooltip>\n      { anchorEl ? (\n          <Menu\n            id={ `widget-add-menu` }\n            anchorEl={ anchorEl }\n            keepMounted\n            open={ open }\n            onClose={ handleClose }\n            transformOrigin={{\n              vertical: 'center',\n              horizontal: 'right',\n            }}\n            PaperProps={{\n              style: {\n                width: '30ch',\n              },\n            }}\n          >\n            { options.map( option => (\n                <WidgetMenuItem\n                  key={ option.key }\n                  option={ option.key }\n                  onClick={ handleClickElement }\n                  icon={ option.icon }\n                  label={ t(option.name) }\n                />\n              ))\n            }\n          </Menu>\n        ) : null\n      }\n    </div>\n  )\n}\n\nMenuAddWidget.propTypes = {\n  onAdd: PropTypes.func.isRequired,\n  options: PropTypes.arrayOf(\n    PropTypes.shape({\n      icon: PropTypes.element.isRequired,\n      name: PropTypes.string.isRequired,\n    }),\n  ).isRequired,\n};\n\nexport default translate(\"MenuAddWidget\")(MenuAddWidget);\n","const noop = () => {};\n\nclass Common {\n\n  // Visible backend name\n  // Change when subclassing\n  name = \"Common\";\n\n  // Abort controller\n  // Used to stop pending fetches when user changes the date\n  controller = new AbortController();\n\n  constructor(props) {\n    this.onUpdate = props && props.onUpdate ? props.onUpdate : noop;\n    this.onError = props && props.onError ? props.onError : noop;\n  }\n\n  // Abort the abort controller and clean it up creating a new one for next fetches\n  // Add here all side-effects cancelling (fetches, timers, etc)\n  // Remember to call super() when subclassing\n  abort() {\n    this.controller.abort();\n    this.controller = new AbortController();\n  }\n\n  // Raises exception on response error\n  handleFetchErrors = (response) => {\n    // Raise succeeded non-ok responses\n    if ( !response.ok ) {\n      return new Error(`${this.name} backend: ${response.statusText}`);\n    }\n    return response;\n  }\n\n  // Catches fetch errors, original or 'self-raised', and throws to `onError` prop\n  // Filters out non-error \"Connection aborted\"\n  catchFetchErrors = (err) => {\n    if ( err.name === 'AbortError' ) {\n      console.log('Connection aborted', err);\n    }\n    else {\n      err.message = `${this.name} backend: ${err.message}`;\n      this.onError(err);\n    }\n  }\n}\n\nexport default Common;\n","// Transform a string into a smaller/hash one of it\nconst hashStr = str => {\n  if (str.length === 0) {\n    return 0;\n  }\n\n  return [...str]\n    .map( char => char.charCodeAt(0) )\n    .reduce( (hash, int) => {\n      const hashTmp = ((hash << 5) - hash) + int;\n      return hashTmp & hashTmp; // Convert to 32bit integer\n  }, 0)\n}\n\n// Handles an element inside the cache\nclass FetchCacheElement {\n  signal = null;\n  result = null;\n  lastModified = 0;\n  invalidated = false;\n  listeners = [];\n  url = '';\n\n  constructor(url) {\n    this.url = url;\n  }\n\n  // Raises exception on response error\n  handleFetchErrors = (response) => {\n    // Raise succeeded non-ok responses\n    if ( !response.ok ) {\n      throw new Error(`${response.statusText}`);\n    }\n\n    return response;\n  }\n\n  // Catches fetch errors, original or 'self-raised', and throws to `onError` prop\n  // Filters out non-error \"Connection aborted\"\n  catchFetchErrors = (err) => {\n    if (err.name === 'AbortError' ) {\n      if (process.env.NODE_ENV === 'development') {\n        console.log(`Connection aborted for ${this.url}`, err);\n      }\n    }\n    else {\n      err.message = `${this.url}: ${err.message}`;\n      this.onError(err);\n    }\n  }\n\n  // Removes all unneeded data related to a fetch\n  cleanFetch = () => this.signal = null;\n\n  // Handle a fetch error by calling all the listeners' onError in the queue\n  onError = (error) => {\n    this.listeners.forEach( listener => {\n      listener.onError(error);\n    });\n \n    this.cleanFetch();\n  };\n\n  // Registers a listener\n  addListener = (onSuccess, onError) => {\n    this.listeners.push({\n      onSuccess,\n      onError,\n    });\n\n    // If this is the first listener, launch the fetch\n    if (!this.signal &&\n        this.result === null ) {\n      this.fetch();\n    }\n\n    // If we already have the data and it has not been invalidated, create\n    // a self-resolving promise which executes the listener after resolution\n    if ( !this.invalidated &&\n         this.result !== null) {\n      (new Promise(\n        (resolve, reject) => resolve(this.result)\n      )).then( onSuccess );\n    }\n    \n    if (process.env.NODE_ENV === 'development') {\n      console.log(`Added listener to ${this.url}: ${this.listeners.length - 1}`);\n    }\n\n    return () => this.removeListener( onSuccess );\n  }\n\n  // Disables/unregisters a listener\n  removeListener = (onSuccess) => {\n\n    // Finds the listener by comparing the onSuccess function pointer\n    const found = this.listeners\n      .map( (listener, index) => ({ listener, index }))\n      .find( l => l.listener.onSuccess === onSuccess);\n\n    if ( found ) {\n      if (process.env.NODE_ENV === 'development') {\n        console.log(`Remove listener from ${this.url}: ${found.index}`);\n      }\n\n      // Remove element from array\n      this.listeners.splice(found.index, 1);\n    }\n    else {\n      console.warning(`Remove listener from ${this.url}: Listener not found`);\n    }\n\n    // If there is an ongoing fetch and there are no more listeners left, abort the fetch\n    if (this.signal &&\n        this.listeners.length === 0) {\n      this.signal.abort();\n      this.cleanFetch();\n    }\n  }\n\n  // Caches the data and calls all the listeners' onSuccess\n  processSuccessFetch = ({ result, lastModified }) => {\n    this.result = result;\n    this.lastModified = lastModified;\n    this.listeners\n      .forEach( listener => listener.onSuccess(this.result) );\n \n    this.cleanFetch();\n\n    // Allow re-chaining promises\n    return this.result;\n  }\n\n  // Gets a Date object from a fetch response `last-modified` HTTP header\n  getLastModifiedFromResponse = (response) => new Date(response.headers.get('last-modified'));\n\n  // Fetches a URL:\n  // - Transforms from JSON to JS object\n  // - Gets last modified date\n  // - Processes all listeners\n  // - Calls the callback\n  // - If there is an error, processes all error listeners\n  fetch = (callback = () => {}) => {\n    this.signal = new AbortController();\n    return fetch( this.url, { signal: this.signal.signal })\n      .then( this.handleFetchErrors )\n      .then( response => response.json().then( result => ({\n        result,\n        lastModified: this.getLastModifiedFromResponse(response)\n      }) ))\n      .then( this.processSuccessFetch )\n      .then( callback )\n      .catch( this.catchFetchErrors )\n  }\n\n  // Sends a HEAD request to download URL header's `last-modified` value and\n  // returns the comparison against saved value: `true` id new one is higher\n  checkIfNeedUpdate = (onSuccess, onError) => {\n    fetch( this.url, { method: 'HEAD' })\n      .then( this.handleFetchErrors )\n      .then( this.getLastModifiedFromResponse )\n      .then( date => date > this.lastModified /* || true */ ) // TEST TODO BUG DEBUG\n      .then( onSuccess )\n      .catch( onError )\n  }\n\n  // Invalidates the cache and recalls it's download if we have any listener\n  invalidate = () => {\n    return (new Promise(\n      (resolve, reject) => {\n        if ( this.result !== null ) {\n          this.invalidated = true;\n\n          // Are there listeners?\n          if ( this.listeners.length > 0 ) {\n            if (process.env.NODE_ENV === 'development') {\n              console.log(`${this.url}: Fetch it!`);\n            }\n            this.fetch(resolve);\n          }\n          else {\n            // Resolve without doing nothing\n            // Someone downloaded it, but unregistered from it: changed data source\n            if (process.env.NODE_ENV === 'development') {\n              console.log(`${this.url}: Someone downloaded it, but unregistered from it: changed data source`);\n            }\n            resolve();\n          }\n        }\n        else {\n          // Resolve without doing nothing\n          // It was never downloaded\n          if (process.env.NODE_ENV === 'development') {\n            console.log(`${this.url}: It was never downloaded`);\n          }\n          resolve();\n        }\n      }\n    ))\n  }\n}\n\n// Handles the whole cache\n// This is intended for a singleton aproach\nclass FetchCache {\n  /*\n     Cached data and fetch handlers:\n\n     data = {\n       [ hashStr(url) ]: new FetchCacheElement(url),\n       ...\n     }\n  */\n  data = {};\n\n  name = \"Cache manager\";\n\n  // Handles fetch requests:\n  // - Creates a new fetch if it's the first time for this URL\n  // - Adds fetch listener if there is an ongoing fetch for that URL\n  // - Returns the result if a fetch for that URL has already been cached\n  fetch = (url, onSuccess, onError = () => {}) => {\n    const id = hashStr(url);\n\n    // If we have not an ongoing request for this URL, create one\n    if ( !(id in this.data) ) {\n      this.data[id] = new FetchCacheElement( url );\n    }\n\n    return this.data[id].addListener(\n      onSuccess,\n      onError,\n    );\n  }\n\n  // Sends a HEAD request to download URL header's `last-modified` value and\n  // returns the comparison against saved value: `true` id new one is higher\n  checkIfNeedUpdate = (url, onSuccess, onError) => {\n    const id = hashStr(url);\n    this.data[id].checkIfNeedUpdate(onSuccess, onError);\n  }\n\n  // Invalidates a cache entry and recalls it's download if it has any listener\n  invalidate = (url) => {\n    const id = hashStr(url);\n    if ( !(id in this.data) ) {\n      return (new Promise(\n        (resolve, reject) => {\n          // Resolve without doing nothing\n          // It was never downloaded\n          if (process.env.NODE_ENV === 'development') {\n            console.log(`${url}: It was never downloaded`);\n          }\n          resolve();\n        }\n      ))\n    }\n    return this.data[id].invalidate();\n  }\n}\n\n// This is a singleton:\n// All clients re-use the same cache\nconst cache = new FetchCache();\nObject.freeze(cache);\n\nexport default cache;\n","/*\n   Static maps data (not updated each day)\n\n   Includes data sources, kinds and values lists and metadata\n*/\nconst MapStaticHost = process.env.REACT_APP_MAP_STATIC_HOST ?? \"https://emibcn.github.io/covid-data/Maps\";\n\nconst days              = `${MapStaticHost}/days.json`;\n\nconst MapaComarques     = `${MapStaticHost}/Comarca.svg`;\nconst MapaMunicipis     = `${MapStaticHost}/Municipi.svg`;\n\nconst comarcaEdat       = `${MapStaticHost}/MapData-Comarca-edat.json`;\nconst comarcaPcrpos     = `${MapStaticHost}/MapData-Comarca-pcrpos.json`;\nconst comarcaRisc       = `${MapStaticHost}/MapData-Comarca-risc.json`;\nconst comarcaRt         = `${MapStaticHost}/MapData-Comarca-rt.json`;\nconst comarcaTaxa_conf  = `${MapStaticHost}/MapData-Comarca-taxa_conf.json`;\nconst comarcaTaxapcr    = `${MapStaticHost}/MapData-Comarca-taxapcr.json`;\n\nconst municipiEdat      = `${MapStaticHost}/MapData-Municipi-edat.json`;\nconst municipiPcrpos    = `${MapStaticHost}/MapData-Municipi-pcrpos.json`;\nconst municipiRisc      = `${MapStaticHost}/MapData-Municipi-risc.json`;\nconst municipiRt        = `${MapStaticHost}/MapData-Municipi-rt.json`;\nconst municipiTaxa_conf = `${MapStaticHost}/MapData-Municipi-taxa_conf.json`;\nconst municipiTaxapcr   = `${MapStaticHost}/MapData-Municipi-taxapcr.json`;\n\nconst MapDataStatic = {\n  days,\n  metadata: {\n    risc: {\n      title: \"Risc de rebrot (iEPG) a població general\",\n      label: \"Risc de rebrot (iEPG)\",\n      name: \"Risc de rebrot (iEPG)\",\n      colors: [\n        {\"color\": \"#400\", \"nom\": \"Risc màxim\", \"valor\": 210},\n        {\"color\": \"#800\", \"nom\": \"Risc extrem\", \"valor\": 190},\n        {\"color\": \"#c00\", \"nom\": \"Risc altíssim\", \"valor\": 160},\n        {\"color\": \"#f00\", \"nom\": \"Risc molt alt\", \"valor\": 130},\n        {\"color\": \"#f40\", \"nom\": \"Risc alt\", \"valor\": 100},\n        {\"color\": \"#f80\", \"nom\": \"Risc mitjà-alt\", \"valor\": 70},\n        {\"color\": \"#fc0\", \"nom\": \"Risc mitjà\", \"valor\": 50},\n        {\"color\": \"#ff0\", \"nom\": \"Risc mitjà-baix\", \"valor\": 30},\n        {\"color\": \"#cf0\", \"nom\": \"Risc baix\", \"valor\": 15},\n        {\"color\": \"#8f4\", \"nom\": \"Risc molt baix\", \"valor\": 5},\n        {\"color\": \"#4f8\", \"nom\": \"Risc no nul\", \"valor\": 1},\n        {\"color\": \"#0fc\", \"nom\": \"Risc mínim\", \"valor\": 0},\n      ],\n    },\n    taxa_conf: {\n      title: \"Taxa setmanal de casos confirmats PCR a tota la població\",\n      label: \"Taxa confirmats per PCR\",\n      name: \"Taxa setmanal de casos confirmats PCR\",\n      colors: [\n        {\"color\": \"#a00\", \"nom\": \">=300\", \"valor\": 300},\n        {\"color\": \"#d00\", \"nom\": \">=200 i <300\", \"valor\": 200},\n        {\"color\": \"#f00\", \"nom\": \">=100 i <200\", \"valor\": 100},\n        {\"color\": \"#f80\", \"nom\": \">=75 i <100\", \"valor\": 75},\n        {\"color\": \"#fa0\", \"nom\": \">=50 i <75\", \"valor\": 50},\n        {\"color\": \"#fc0\", \"nom\": \">=25 i <50\", \"valor\": 25},\n        {\"color\": \"#0b0\", \"nom\": \">=15 i <25\", \"valor\": 15},\n        {\"color\": \"#090\", \"nom\": \"<15\", \"valor\": 0}\n      ],\n    },\n    rt: {\n      title: \"Velocitat de propagació (Rt) a població general\",\n      label: \"Rt\",\n      name: \"Velocitat de propagació (Rt)\",\n      colors: [\n        {\"color\": \"#f00\", \"nom\": \">=2\", \"valor\": 2},\n        {\"color\": \"#f70\", \"nom\": \">=1.5 i <2\", \"valor\": 1.5},\n        {\"color\": \"#fa0\", \"nom\": \">=1.2 i <1.5\", \"valor\": 1.2},\n        {\"color\": \"#fc0\", \"nom\": \">1 i <1.2\", \"valor\": 1.00001},\n        {\"color\": \"#0a0\", \"nom\": \"<=1\", \"valor\": 0}\n      ],\n    },\n    edat: {\n      title: \"Mitjana d'edat dels casos confirmats per PCR a tota la població\",\n      label: \"Mitjana edat\",\n      name: \"Mitjana d'edat dels casos confirmats per PCR\",\n      colors: [\n        {\"color\": \"#08519c\", \"nom\": \">=60\", \"valor\": 60},\n        {\"color\": \"#3182bd\", \"nom\": \">=50 i <60\", \"valor\": 50},\n        {\"color\": \"#6baed6\", \"nom\": \">=40 i <50\", \"valor\": 40},\n        {\"color\": \"#9ecae1\", \"nom\": \">=30 i <40\", \"valor\": 30},\n        {\"color\": \"#c6dbef\", \"nom\": \">=20 i <30\", \"valor\": 20},\n        {\"color\": \"#eff3ff\", \"nom\": \"< 20\", \"valor\": 0}\n      ],\n    },\n    pcrpos: {\n      title: \"Percentatge de PCR positives a tota la població\",\n      label: \"% PCR +\",\n      name: \"Percentatge de PCR positives\",\n      colors: [\n        {\"color\": \"#a50026\", \"nom\": \">=40%\", \"valor\": 40},\n        {\"color\": \"#d73027\", \"nom\": \">=30% i <40%\", \"valor\": 30},\n        {\"color\": \"#f46d43\", \"nom\": \">=20% i <30%\", \"valor\": 20},\n        {\"color\": \"#fdae61\", \"nom\": \">=15% i <20%\", \"valor\": 15},\n        {\"color\": \"#fee08b\", \"nom\": \">=10% i <15%\", \"valor\": 10},\n        {\"color\": \"#ffffbf\", \"nom\": \">=8% i <10%\", \"valor\": 8},\n        {\"color\": \"#66bd63\", \"nom\": \">=5% i <8%\", \"valor\": 5},\n        {\"color\": \"#1a9850\", \"nom\": \">=3% i <5%\", \"valor\": 3},\n        {\"color\": \"#006837\", \"nom\": \"<3%\", \"valor\": 0}\n      ],\n    },\n    taxapcr: {\n      title: \"Taxa PCR per 100.000 habitants a tota la població\",\n      label: \"Taxa PCR\",\n      name: \"Taxa PCR per 100.000 habitants\",\n      colors: [\n        {\"color\": \"#08306b\", \"nom\": \">=1000\", \"valor\": 1000},\n        {\"color\": \"#08519c\", \"nom\": \">=800 i <1000\", \"valor\": 800},\n        {\"color\": \"#2171b5\", \"nom\": \">=600 i <800\", \"valor\": 600},\n        {\"color\": \"#4292c6\", \"nom\": \">=500 i <600\", \"valor\": 500},\n        {\"color\": \"#6baed6\", \"nom\": \">=400 i <500\", \"valor\": 400},\n        {\"color\": \"#9ecae1\", \"nom\": \">=300 i <400\", \"valor\": 300},\n        {\"color\": \"#c6dbef\", \"nom\": \">=200 i <300\", \"valor\": 200},\n        {\"color\": \"#deebf7\", \"nom\": \">=100 i <200\", \"valor\": 100},\n        {\"color\": \"#f7fbff\", \"nom\": \"<100\", \"valor\": 0}\n      ],\n    },\n  },\n  kind: {\n    Comarca: {\n      svg: MapaComarques,\n      values: {\n        risc:      comarcaRisc,\n        taxa_conf: comarcaTaxa_conf,\n        rt:        comarcaRt,\n        edat:      comarcaEdat,\n        pcrpos:    comarcaPcrpos,\n        taxapcr:   comarcaTaxapcr\n      }\n    },\n    Municipi: {\n      svg: MapaMunicipis,\n      values: {\n        risc:      municipiRisc,\n        taxa_conf: municipiTaxa_conf,\n        rt:        municipiRt,\n        edat:      municipiEdat,\n        pcrpos:    municipiPcrpos,\n        taxapcr:   municipiTaxapcr\n      }\n    }\n  }\n};\n\nexport default MapDataStatic;\n","import Common from '../Base/Common';\nimport cache from '../Base/Cache';\n\nimport MapDataStatic from './MapDataStatic';\n\n// TODO: Abstract a layer to share with GitHub Charts\n\n// Handle data backend and cache for Maps\n// This is not a singleton: unique error handlers\nclass MapDataHandler extends Common {\n  // Visible backend name\n  name = \"Maps JSON Files\";\n\n  // Used to update the data at official schedule\n  // Official schedule's at 10am. It often is some minutes later.\n  // GH Pages cache backend Workflow schedule is at 10:30 and lasts few minutes (less than 5).\n  // We schedule at 10:35\n  timerDataUpdate = false;\n  officialUpdateTime = \"10:35\".split(':');\n\n  /*\n     Return static data\n  */\n  static kinds  = ()     => Object.keys(MapDataStatic.kind);\n  static values = (kind) => Object.keys(MapDataStatic.kind[kind].values);\n  static svg    = (kind) => MapDataStatic.kind[kind].svg;\n\n  static metadata = (values, meta) => MapDataStatic.metadata[values][meta];\n  static metaColors = (values) => MapDataHandler.metadata(values, 'colors');\n  static metaTitle  = (values) => MapDataHandler.metadata(values, 'title');\n  static metaLabel  = (values) => MapDataHandler.metadata(values, 'label');\n  static metaName   = (values) => MapDataHandler.metadata(values, 'name');\n\n  /*\n     Return dynamic data (with cache)\n  */\n  days = (callback) => cache.fetch( MapDataStatic.days, callback);\n  data = (kind, values, callback) => cache.fetch( MapDataStatic.kind[kind].values[values], callback);\n\n  /*\n     Handle data update and cache invalidation\n  */\n\n  // Checks if `days` URL has updates\n  // If HEAD request succeeds, calls callback with bool (`true` if update is needed)\n  checkUpdate = (callback, onError = () => {}) => {\n    cache.checkIfNeedUpdate(\n      MapDataStatic.days,\n      updateNeeded => {\n        if (process.env.NODE_ENV === 'development') {\n          console.log(`${this.name}: update needed: ${updateNeeded}`);\n        }\n        callback(updateNeeded);\n      },\n      error => {\n        console.error(`${this.name}: updating data from backend: `, error);\n        onError(error);\n      }\n    );\n  }\n\n  // Updates all sources, sequentially\n  updateAll = (callback) => {\n    (async (callback) => {\n\n      // Invalidate each map JSON first\n      for(let kind of MapDataHandler.kinds()) {\n        for(let value of MapDataHandler.values(kind)) {\n          if (process.env.NODE_ENV === 'development') {\n            console.log(`Invalidate ${kind} - ${value}`);\n          }\n          await cache.invalidate( MapDataStatic.kind[kind].values[value] );\n        };\n      };\n     \n      // Finally, invalidate the `days` JSON\n      if (process.env.NODE_ENV === 'development') {\n        console.log(`Invalidate days`);\n      }\n      await cache.invalidate( MapDataStatic.days );\n\n      callback(true);\n    })(callback);\n  }\n\n  // Updates all sources if needed\n  // Always calls callback with a boolean argument indicating if an update was made\n  updateIfNeeded = (callback) => {\n    this.checkUpdate( (updateNeeded) => {\n      if (updateNeeded) {\n        this.updateAll(() => callback(true));\n      }\n      else {\n        callback(false);\n      }\n    });\n  }\n\n  // Cancels an ongoing timer for update\n  cancelUpdateSchedule = () => {\n    if ( this.timerDataUpdate ) {\n      clearTimeout( this.timerDataUpdate );\n    }\n  }\n\n  // Try to update data on next official scheduled data update\n  scheduleNextUpdate = (millis = false, recursive = false) => {\n    // If millis is not defined, call on next calculated default\n    const nextMillis = millis === false\n      ? this.millisToNextUpdate()\n      : millis;\n\n    if (process.env.NODE_ENV === 'development') {\n      console.log(`Next update on ${new Date( (new Date()).getTime() + nextMillis )}`);\n    }\n\n    // If data has been updated and `recursive` is true, re-schedule data update for the next day\n    // Else (recursive || not recursive but data NOT updated), schedule data update in 5 minutes\n    // This way, we retry an update few minutes later, in case the schedule has lasted more than usual\n    this.cancelUpdateSchedule(); // Just in case\n    this.timerDataUpdate = setTimeout(\n      () => this.updateIfNeeded(\n        updated => recursive || !updated\n          ? this.scheduleNextUpdate( updated ? false : 300_000)\n          : false),\n      nextMillis\n    )\n  }\n\n  // Calculates haw many milliseconds until next schedulled update (today's or tomorrow)\n  // TODO: Take care of timezones: Official date is in CEST/GMT+0200 (with daylight saving modifications), Date uses user's timezone and returns UTC\n  //       Now, it only works if user timezone is CEST\n  //       Probably, the best would be to translate both dates into UTC and, only then, compare them\n  millisToNextUpdate = () => {\n    const now = new Date();\n    const todayDataSchedule = new Date(now.getFullYear(), now.getMonth(), now.getDate(), ...this.officialUpdateTime, 0, 0);\n    const millisTillSchedulle = todayDataSchedule - now;\n\n    return millisTillSchedulle <= 0\n      ? millisTillSchedulle + 86_400_000 // it's on or after today's schedule, try next schedule tomorrow.\n      : millisTillSchedulle\n  }\n}\n\nexport default MapDataHandler;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { ReactSVG } from 'react-svg'\nimport ReactTooltip from \"react-tooltip\";\n\nimport Loading from '../../../Loading';\n\nimport './Map.css';\n\nconst fallback=() => <span>Error!</span>;\nconst loading=() => <Loading />;\n\n/*\n   Renders an SVG map, allowing to change each region background color and tooltip\n   Some of the code here has been inspired in the original from https://dadescovid.org\n*/\nclass MapImage extends React.Component {\n\n  svg = null;\n\n  // Save SVG DOM node reference\n  // This way we can access it's regions to modify them\n  wrapperNodeSVG = React.createRef();\n\n  // Get the SVG node itself\n  getSVG = () => this.wrapperNodeSVG.current.svgWrapper.querySelector(`svg`);\n\n  isSVGMounted = () => {\n    return this.wrapperNodeSVG &&\n      'current' in this.wrapperNodeSVG &&\n      this.wrapperNodeSVG.current &&\n      'svgWrapper' in this.wrapperNodeSVG.current &&\n      this.wrapperNodeSVG.current.svgWrapper &&\n      'querySelector' in this.wrapperNodeSVG.current.svgWrapper &&\n      this.getSVG();\n  }\n\n  // Gets the color for a given value (in func params) in a colors table (in props)\n  get_color_fons = valor => {\n    const color = this.props.colors\n      .find( c => valor >= c.valor);\n    return color ? color.color : 'fff'\n  }\n\n  // Sets the background color in a SVG region for a given value\n  setColorBackground = (svg, valors, id) => {\n    const elem = svg.querySelector(`#${id}`);\n    if ( elem ) {\n      elem.style.fill = this.get_color_fons(valors[id]);\n    }\n  }\n\n  // Sets the background color for all regions in values prop\n  omplir_colors = (svg) => {\n    const valors = this.props.valors[ this.props.indexValues ];\n    const setColorBackground = this.setColorBackground.bind(this, svg, valors);\n    Object.keys(valors).forEach( setColorBackground );\n  }\n  \n  // Renders the tip contents for a region\n  getTipContent = id => {\n    if ( id && this.isSVGMounted() ) {\n      const valors = this.props.valors[ this.props.indexValues ];\n      const element = this.svg.querySelector(`#${id}`);\n      if (!element) {\n        return '';\n      }\n      const label = element.getAttribute('label');\n      return (\n        <>\n          <h1>{ label }</h1>\n          { this.props.label }: { valors[id] }\n        </>\n      );\n    }\n\n    return '';\n  }\n\n  // Sets data into each map region to be used by the tooltip renderer\n  setTooltipData = (svg) => {\n    const dataFor = `mapa-${this.props.id}`;\n    const setData = element => {\n      element.setAttribute('data-tip', element.id);\n      element.setAttribute('data-for', dataFor);\n    }\n    svg.querySelectorAll(`.map_elem`)\n      .forEach( setData );\n  }\n\n  // Process data into the SVG DOM node before first injecting it into the DOM tree\n  beforeInjection = (svg) => {\n    this.svg = svg;\n    this.omplir_colors(svg);\n    this.setTooltipData(svg);\n  }\n\n  // Get SVG DOM node and reset colors from data if needed\n  afterInjection = (error, svg) => {\n    if (error) {\n      throw Error(error)\n    }\n    ReactTooltip.rebuild();\n    this.svg = svg;\n    this.omplir_colors(this.svg);\n  }\n\n  // Update background colors if SVG is mounted\n  updateColorsIfPossible = () => {\n    if ( this.isSVGMounted() && this.svg ) {\n      this.omplir_colors(this.svg);\n    }\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    this.updateColorsIfPossible()\n  }\n\n  componentDidMount() {\n    this.updateColorsIfPossible()\n  }\n\n  render() {\n    return (\n      <>\n        <ReactSVG\n          src={ this.props.mapSrc }\n          ref={ this.wrapperNodeSVG }\n          role=\"img\"\n          aria-label=\"Description of the overall image\"\n          beforeInjection={ this.beforeInjection }\n          afterInjection={ this.afterInjection }\n          evalScripts=\"never\"\n          fallback={ fallback }\n          loading={ loading }\n          renumerateIRIElements={ false }\n        />\n        <ReactTooltip\n          id={ `mapa-${this.props.id}` }\n          getContent={ this.getTipContent }\n        />\n      </>\n    );\n  }\n}\n\nMapImage.defaultProps = {\n  dies: [],\n  valors: [],\n  indexValues: 0,\n  label: 'Index',\n};\n\nMapImage.propTypes = {\n  label: PropTypes.string,\n  mapSrc: PropTypes.string,\n  id: PropTypes.string,\n  dies: PropTypes.arrayOf(PropTypes.string).isRequired,\n  valors: PropTypes.arrayOf(PropTypes.shape()).isRequired,\n  colors: PropTypes.arrayOf(PropTypes.shape()).isRequired,\n  indexValues: PropTypes.number.isRequired,\n};\n\nexport default MapImage;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { translate } from 'react-translate'\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport Divider from '@material-ui/core/Divider';\n\nimport MapData from '../../../Backend/Maps';\n\n// UI-Material Styles\nconst useStyles = makeStyles((theme) => ({\n  formControl: {\n    minWidth: 120,\n  },\n  selectEmpty: {\n    marginTop: theme.spacing(2),\n  },\n}));\n\n\n// Renders a Select, with options from props\nconst Selector = (props) => {\n  const classes = useStyles();\n  const { label, help, id, options, ...restProps } = props;\n  return (\n    <div style={{ \n      margin: '0 auto',\n      display: 'block',\n    }}>\n      <FormControl required className={ classes.formControl }>\n        <InputLabel htmlFor={ id }>{ label }</InputLabel>\n        <Select\n          native\n          { ...restProps }\n          aria-describedby={ `helper-text-${id}` }\n          inputProps={{\n            name: label,\n            id: id,\n          }}\n        >\n          { options.map( option => (\n            <option key={ `v_${option.value}` } value={ option.value }>{ option.label }</option>\n          )) }\n        </Select>\n        { help ? (\n            <FormHelperText id={ `helper-text-${id}` }>\n              { help }\n            </FormHelperText>\n          ) : null \n        }\n      </FormControl>\n    </div>\n  )\n}\n\n// Renders a Select with map kinds options\nconst MapSelectorOptions = MapData.kinds()\n  .map( kind => ({ value: kind, label: kind }));\nconst MapSelector = translate('Widget/Map/Edit')((props) => {\n  const { t, ...restProps } = props;\n  return (\n    <Selector\n      options={ MapSelectorOptions }\n      label={ t(\"Type\") }\n      help={ t(\"Select the regions type to show\") }\n      { ...restProps }\n    />\n  )\n});\n\n// Renders a Select with map values options\nconst MapValueSelectorOptions = MapData.kinds()\n  .reduce( (options, kind) => {\n    options[kind] = MapData.values(kind)\n      .map( values => ({ value: values, label: MapData.metaName(values) }));\n    return options\n  }, {});\nconst MapValueSelector = translate('Widget/Map/Edit')((props) => {\n  const { kind, t, ...restProps } = props;\n  return (\n    <Selector\n      label={ t(\"Values\") }\n      help={ t(\"Select the data origin\") }\n      options={ MapValueSelectorOptions[kind] }\n      { ...restProps }\n    />\n  )\n});\n\n/*\n   Renders the edit form for the Map widget\n*/\nclass Edit extends React.PureComponent {\n\n  onChangeMapKind = (event) => this.props.onChangeMapKind(event.target.value);\n  onChangeMapValue = (event) => this.props.onChangeMapValue(event.target.value);\n\n  render() {\n    const { mapKind, mapValue } = this.props;\n\n    return (\n      <div style={{ textAlign: 'left' }}>\n        <MapSelector\n          value={ mapKind }\n          onChange={ this.onChangeMapKind }\n        />\n        <Divider style={{ margin: '2em 0' }} />\n        <MapValueSelector\n          kind={ mapKind }\n          value={ mapValue }\n          onChange={ this.onChangeMapValue }\n        />\n      </div>\n    )\n  }\n}\n\nEdit.propTypes = {\n  mapKind: PropTypes.string.isRequired,\n  mapValue: PropTypes.string.isRequired,\n  onChangeMapKind: PropTypes.func.isRequired,\n  onChangeMapValue: PropTypes.func.isRequired,\n};\n\nexport default Edit;\n","import React from 'react';\n\n/*\n   Renders the legend of a map\n*/\nconst Legend = (props) => (\n  <table style={{ margin: '0 auto', marginTop: '.5em' }}>\n    <tbody>\n    { props.colors.map( (color, index) => (\n        <tr key={ index }>\n          <td style={{\n            paddingRight: 20,\n            textAlign: 'left',\n          }}>{ color.nom }</td>\n          <td>{ index === 0 ? `> ${color.valor}` : `${color.valor}-${props.colors[index-1].valor}` }</td>\n          <td style={{\n            backgroundColor: color.color,\n            width: 50,\n            border: '1px solid #000',\n          }}></td>\n        </tr>\n      ))\n    }\n    </tbody>\n  </table>\n);\n\nexport default Legend;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport {\n  faInfoCircle as faLegend,\n  faEdit,\n  faGlobeEurope as faMap\n} from '@fortawesome/free-solid-svg-icons'\n\nimport MapData from '../../../Backend/Maps';\n\nimport MapImage from './MapImage';\nimport Edit from './Edit';\nimport Legend from './Legend';\nimport Loading from '../../../Loading';\nimport withWidget from '../../Widget';\n\nconst MapWrapper = withWidget({\n  // The normal view\n  view: {\n    icon: <FontAwesomeIcon icon={ faMap } />,\n    label: ({ t }) => t(\"View\"),\n    title: (props) => props.name,\n    render: (props) => (\n      <>\n        { props.mapData === null ? (\n            <Loading />\n          ) : (\n            <MapImage\n              label={ props.label }\n              dies={ props.days }\n              valors={ props.mapData.valors }\n              mapSrc={ MapData.svg(props.mapKind) }\n              indexValues={ props.indexValues }\n              colors={ props.colors }\n              id={ props.id }\n            />\n          )\n        }\n      </>\n    )\n  },\n  // Edit data\n  edit: {\n    icon: <FontAwesomeIcon icon={ faEdit } />,\n    label: ({ t }) => t(\"Edit\"),\n    title: ({ t }) => t(\"Edit map parameters\"),\n    render: (props) => (\n      <Edit\n        mapKind={ props.mapKind }\n        mapValue={ props.mapValue }\n        onChangeMapKind={ props.onChangeMapKind }\n        onChangeMapValue={ props.onChangeMapValue }\n      />\n    ),\n  },\n  // Show map legend\n  legend: {\n    icon: <FontAwesomeIcon icon={ faLegend } />,\n    label: ({ t }) => t(\"Legend\"),\n    title: (props) => props.title,\n    render: (props) => (\n      <Legend\n        colors={ props.colors }\n        subtitle={ props.days[ props.indexValues ] }\n      />\n    ),\n  },\n});\n\n/*\n   Combine MapData backend with MapWrapper/MapImage\n*/\nclass MapDataHandler extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    // TODO: Handle errors\n    this.MapData = new MapData();\n    this.cancelDataUpdate = false;\n\n    // Default values: first element of each's group\n    // TODO: Get data from storage/router/props\n    const { mapKind, mapValue } = props;\n\n    this.state = {\n      mapData: null,\n      mapKindDefault: mapKind,\n      mapValueDefault: mapValue,\n      ...this.getMeta(mapValue)\n    }\n  }\n\n  // Get metadata from given params\n  getMeta = (mapValue) => ({\n    colors: MapData.metaColors(mapValue),\n    title: MapData.metaTitle(mapValue),\n    label: MapData.metaLabel(mapValue),\n    name: MapData.metaLabel(mapValue),\n  })\n\n  // Fetch map data\n  updateData = () => {\n    const { mapKind, mapValue } = this.props;\n\n    // If there is an ongoing update, cancel the registration to it\n    if (this.cancelDataUpdate) {\n      this.cancelDataUpdate();\n    }\n\n    this.cancelDataUpdate = this.MapData.data(mapKind, mapValue, mapData => {\n      // Only update data if we didn't change map confs in between\n      if (mapKind === this.props.mapKind && mapValue === this.props.mapValue) {\n        this.setState({ mapData });\n      }\n    });\n  }\n\n  // Ensure first data is gathered as soon as we have the component mounted\n  componentDidMount() {\n    this.updateData();\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    // If mapData is unset, gather new data\n    if( prevState.mapData !== this.state.mapData &&\n        this.state.mapData === null ) {\n      this.updateData();\n    }\n    else if (\n      // If params changed, unset mapData\n      this.props.mapKind !== prevProps.mapKind ||\n      this.props.mapValue !== prevProps.mapValue ) {\n      this.setState({\n        mapData: null\n      });\n    }\n  }\n\n  // Force data update on kind change\n  onChangeMapKind = (mapKind) => {\n    const { mapValue } = this.props;\n    this.setState({\n      mapData: null\n    });\n    this.props.onChangeData(\n      this.props.id,\n      {\n        mapKind,\n        mapValue\n      });\n  }\n\n  // Force data update on value change\n  // Also, update map metadata\n  onChangeMapValue = (mapValue) => {\n    const { mapKind } = this.props;\n    this.setState({\n      mapData: null,\n      ...this.getMeta(mapValue)\n    });\n    this.props.onChangeData(\n      this.props.id,\n      {\n        mapKind,\n        mapValue\n      });\n  }\n\n  render() {\n    const { days, indexValues, id, mapKind, mapValue } = this.props; \n    const {\n      mapData, mapKindDefault, mapValueDefault,\n      colors, title, label, name\n    } = this.state;\n\n    return (\n      <div style={{\n        minWidth: '200px',\n        height: '100%',\n        paddingTop: '.3em',\n        flex: '1 1 0px',\n      }}>\n        <MapWrapper\n          id={ id }\n          mapKind={ mapKind }\n          mapValue={ mapValue }\n          mapKindDefault={ mapKindDefault }\n          mapValueDefault={ mapValueDefault }\n          onChangeMapKind={ this.onChangeMapKind }\n          onChangeMapValue={ this.onChangeMapValue }\n          onRemove={ this.props.onRemove }\n          mapData={ mapData }\n          indexValues={ indexValues }\n          days={ days }\n          colors={ colors }\n          title={ title }\n          label={ label }\n          name={ name }\n        />\n      </div>\n    );\n  }\n}\n\n// Default values: first element of each's group\nconst mapKind = MapData.kinds()[0];\nconst mapValue = MapData.values(mapKind)[0];\n\nMapDataHandler.defaultProps = {\n  mapKind,\n  mapValue,\n  onChangeData: () => {},\n  onRemove: () => {},\n};\n\nMapDataHandler.propTypes = {\n  days: PropTypes.arrayOf(PropTypes.string).isRequired,\n  indexValues: PropTypes.number.isRequired,\n  id: PropTypes.string.isRequired,\n  onChangeData: PropTypes.func.isRequired,\n  onRemove: PropTypes.func.isRequired,\n  mapKind: PropTypes.string.isRequired,\n  mapValue: PropTypes.string.isRequired,\n};\n\nexport default MapDataHandler;\n","import Widget from './Widget';\n\nexport default Widget;\n","import Common from '../Base/Common';\nimport cache from '../Base/Cache';\n\nconst ChartStaticHost = process.env.REACT_APP_CHART_STATIC_HOST ?? \"https://emibcn.github.io/covid-data/Charts\";\nconst ChartDataStaticURL = `${ChartStaticHost}/index.json`;\nconst ChartDataBase = `${ChartStaticHost}/chart.json`;\n\n// TODO: Abstract a layer to share with GitHub Maps\n\n// Handle data backend and cache for Charts\n// This is not a singleton: unique error handlers\nclass ChartDataHandler extends Common {\n  // Visible backend name\n  name = \"Charts JSON Files\";\n\n  // Used to update the data at official schedule\n  // Official schedule's at 10am. It often is some minutes later.\n  // GH Pages cache backend Workflow schedule is at 10:30 and lasts few minutes (less than 5).\n  // We schedule at 10:35\n  timerDataUpdate = false;\n  officialUpdateTime = \"10:35\".split(':');\n\n  /*\n     Return processed data\n  */\n  divisions = [];\n  populations = [];\n\n  constructor(index) {\n    super();\n\n    if (index) {\n      this.parseIndex(index);\n    }\n    else {\n      this.index( this.parseIndex );\n    }\n  }\n\n  /*\n     Return dynamic data (with cache)\n  */\n  indexData = [];\n  index = (callback) => {\n    return cache.fetch( ChartDataStaticURL, callback );\n  }\n\n  parseIndex = (index) => {\n    // Get a unique (`[...new Set( )]`) list of options elements\n    this.divisions = [...new Set( index.map( ({territori}) => territori) )];\n    this.populations = [...new Set( index.map( ({poblacio})  => poblacio ) )];\n\n    // Save/cache index data\n    this.indexData = index;\n  }\n\n  // Active URLs: those which will be invalidated on update\n  active = [];\n\n  // Gets the breadcrumb of ancestors and the found node, or empty array (recursive)\n  findBreadcrumb = (node, value, compare = (node, url) => node.url === url) => {\n    if ( compare(node, value) ) {\n      return [node]\n    }\n    else if ('children' in node) {\n      for(const child of node.children) {\n        const found = this.findBreadcrumb(child, value, compare);\n        if (found.length) {\n          return [...found, node]\n        }\n      }\n    }\n    return []\n  }\n\n  // Find a node in a tree\n  findChild = (node, value, compare) => {\n    const list = this.findBreadcrumb(node, value, compare);\n    if (list.length) {\n      return list[0];\n    }\n  }\n\n  // Find division/population section\n  findInitialNode = (division, population) => {\n    return this.indexData.find(\n      (link) =>\n        link.territori === division &&\n        link.poblacio === population\n    );\n  }\n\n  // Fetch JSON data and subscribe to updates\n  data = (division, population, url, callback) => {\n    const initialLink = this.findInitialNode(division, population);\n\n    // If found (why should it not?)\n    if ( initialLink ) {\n\n      // Find region name in link and children, recursively\n      const found = this.findChild(initialLink, url);\n\n      // TODO: We should do something else on error\n      if (!found) {\n        console.warn(`Could not find data in index: ${division}/${population}/${url}`, {initialLink, index: this.indexData});\n        callback(false);\n        return () => {};\n      }\n\n      // Add URL to active ones. Will be invalidated on update \n      if ( !(this.active.includes(found.url)) ) {\n        this.active.push(found.url);\n      }\n\n      // Get URL content (download or cached)\n      return cache.fetch( `${ChartDataBase}%3F${found.url}`, callback );\n    }\n\n    console.warn(`Could not find initial node in index: ${division}/${population}/${url}`, {initialLink, index: this.indexData});\n    callback(false);\n    return () => {};\n  }\n\n  /*\n     Handle data update and cache invalidation\n  */\n\n  // Checks if `index` URL has updates\n  // If HEAD request succeeds, calls callback with bool (`true` if update is needed)\n  checkUpdate = (callback, onError = () => {}) => {\n    cache.checkIfNeedUpdate(\n      ChartDataStaticURL,\n      updateNeeded => {\n        if (process.env.NODE_ENV === 'development') {\n          console.log(`${this.name}: update needed: ${updateNeeded}`);\n        }\n        callback(updateNeeded);\n      },\n      error => {\n        console.error(`${this.name}: updating data from backend: `, error);\n        onError(error);\n      }\n    );\n  }\n\n  // Updates all sources, sequentially\n  updateAll = (callback) => {\n    (async (callback) => {\n\n      // Invalidate each active JSON first\n      for(const url of this.active) {\n        if (process.env.NODE_ENV === 'development') {\n          console.log(`Charts: Invalidate '?${url}'`);\n        }\n        await cache.invalidate( `${ChartDataBase}?${url}` );\n      }\n     \n      // Finally, invalidate the `index` JSON\n      if (process.env.NODE_ENV === 'development') {\n        console.log(`Charts: Invalidate index`);\n      }\n      await cache.invalidate( ChartDataStaticURL );\n\n      callback(true);\n    })(callback);\n  }\n\n  // Updates all sources if needed\n  // Always calls callback with a boolean argument indicating if an update was made\n  updateIfNeeded = (callback) => {\n    this.checkUpdate( (updateNeeded) => {\n      if (updateNeeded) {\n        this.updateAll(() => callback(true));\n      }\n      else {\n        callback(false);\n      }\n    });\n  }\n\n  // Cancels an ongoing timer for update\n  cancelUpdateSchedule = () => {\n    if ( this.timerDataUpdate ) {\n      clearTimeout( this.timerDataUpdate );\n    }\n  }\n\n  // Try to update data on next official scheduled data update\n  scheduleNextUpdate = (millis = false, recursive = false) => {\n    // If millis is not defined, call on next calculated default\n    const nextMillis = millis === false\n      ? this.millisToNextUpdate()\n      : millis;\n\n    if (process.env.NODE_ENV === 'development') {\n      console.log(`Next update on ${new Date( (new Date()).getTime() + nextMillis )}`);\n    }\n\n    // If data has been updated and `recursive` is true, re-schedule data update for the next day\n    // Else (recursive || not recursive but data NOT updated), schedule data update in 5 minutes\n    // This way, we retry an update few minutes later, in case the schedule has lasted more than usual\n    this.cancelUpdateSchedule(); // Just in case\n    this.timerDataUpdate = setTimeout(\n      () => this.updateIfNeeded(\n        updated => recursive || !updated\n          ? this.scheduleNextUpdate( updated ? false : 300_000)\n          : false),\n      nextMillis\n    )\n  }\n\n  // Calculates haw many milliseconds until next schedulled update (today's or tomorrow)\n  // TODO: Take care of timezones: Official date is in CEST/GMT+0200 (with daylight saving modifications), Date uses user's timezone and returns UTC\n  //       Now, it only works if user timezone is CEST\n  //       Probably, the best would be to translate both dates into UTC and, only then, compare them\n  millisToNextUpdate = () => {\n    const now = new Date();\n    const todayDataSchedule = new Date(now.getFullYear(), now.getMonth(), now.getDate(), ...this.officialUpdateTime, 0, 0);\n    const millisTillSchedulle = todayDataSchedule - now;\n\n    return millisTillSchedulle <= 0\n      ? millisTillSchedulle + 86_400_000 // it's on or after today's schedule, try next schedule tomorrow.\n      : millisTillSchedulle\n  }\n}\n\nexport default ChartDataHandler;\n","import React from 'react';\n\nimport {\n  ResponsiveContainer,\n  LineChart,\n  Line,\n  ComposedChart,\n  Area,\n  ReferenceLine,\n  CartesianGrid,\n  XAxis,\n  YAxis,\n  Tooltip,\n} from 'recharts';\n\nconst ChartIEPG = (props) => {\n  const { graph, dies, indexValues} = props;\n  const data = React.useMemo(\n    () => graph.data[0].data\n            .map((d,index) => ({v: d, x: dies[index]})),\n    [graph,dies],\n  );\n  return (\n    <ResponsiveContainer width='100%' height={350}>\n      <LineChart data={data} margin={{ bottom: 20, right: 10, left: 0 }} syncId=\"charts\">\n        <Line type=\"monotone\" dataKey=\"v\" dot={null} name={ graph.data[0].label } stroke=\"#000000\" strokeWidth={2} />\n     \n        <ReferenceLine y={ 30} stroke=\"#0f0\" strokeDasharray=\"3 3\" />\n        <ReferenceLine y={ 70} stroke=\"#ff0\" strokeDasharray=\"3 3\" />\n        <ReferenceLine y={100} stroke=\"#f00\" strokeDasharray=\"3 3\" />\n        <ReferenceLine x={dies[indexValues]} label={`${data[indexValues].v}`} stroke=\"#777\" strokeDasharray=\"3 3\" />\n     \n        <CartesianGrid stroke=\"#ccc\" />\n        <XAxis dataKey=\"x\" angle={-30} dx={-5} dy={15} />\n        <YAxis />\n        <Tooltip />\n      </LineChart>\n    </ResponsiveContainer>\n  )\n}\n\nconst fillDays = (dies, data) => {\n  return data.map((d,index) => {\n    if ( index < dies.length ) {\n      return dies[dies.length-index-1]\n    }\n    else {\n      const dateParams = dies[0].split('/').reverse().map( d => Number(d));\n      dateParams[2] -= (index - dies.length);\n      const date = new Date(...dateParams);\n      return `${date.getDate()}/${date.getMonth()}/${date.getFullYear()}`\n    }\n  }).reverse();\n}\n\nconst ChartExtensio = (props) => {\n  const { graph, dies, indexValues} = props;\n  const data = React.useMemo(\n    () => {\n      // Some graphs have extra data previous to the rest\n      const diesFull = graph?.data[0]?.data ? fillDays(dies, graph.data[0].data) : dies;\n      const data = graph.data[0].data\n        .map((d,index) => ({\n          v0: d,\n          v1: graph.data[1].data[index],\n          v2: graph.data[2].data[index],\n          x: diesFull[index],\n        }));\n      return data\n    },\n    [graph,dies],\n  );\n  return (\n    <ResponsiveContainer width='100%' height={350}>\n      <ComposedChart data={data} margin={{ bottom: 20, right: 10, left: 0 }} syncId=\"charts\">\n        <ReferenceLine x={dies[indexValues]} label={\n            [`${data[indexValues].v0}`,\n             `${data[indexValues].v1}`,\n             `${data[indexValues].v2}`]\n          } stroke=\"#777\" strokeDasharray=\"3 3\" />\n\n        <Area type=\"monotone\" dataKey=\"v1\" dot={null} name={ graph.data[1].label } fill=\"#cacaca\" stroke=\"#cacaca\" strokeWidth={1} />\n        <Area type=\"monotone\" dataKey=\"v0\" dot={null} name={ graph.data[0].label } fill=\"#648ac8\" stroke=\"#648ac8\" strokeWidth={1} />\n        <Line type=\"monotone\" dataKey=\"v2\" dot={null} name={ graph.data[2].label } stroke=\"#969696\" strokeWidth={1} />\n\n        <CartesianGrid stroke=\"#ccc\" />\n        <XAxis dataKey=\"x\" angle={-30} dx={-5} dy={15} />\n        <YAxis />\n        <Tooltip />\n      </ComposedChart>\n    </ResponsiveContainer>\n  )\n}\n\nconst GraphFromDataset = {\n  grafic_risc_iepg: ChartIEPG,\n  grafic_extensio: ChartExtensio,\n};\n\nconst Chart = (props) => {\n  const { dataset, valors, ...restProps } = props;\n  const ChartDataset = GraphFromDataset[dataset];\n  return (\n      <ChartDataset graph={ valors[dataset] } {...restProps} />\n  )\n}\n\nexport default Chart;\n","import React from 'react';\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport TreeView from '@material-ui/lab/TreeView';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\nimport TreeItem from '@material-ui/lab/TreeItem';\n\nimport ChartData from '../../../Backend/Charts';\n\n// From: https://material-ui.com/components/tree-view/#rich-object\n\nconst useStyles = makeStyles({\n  root: {\n    height: 110,\n    flexGrow: 1,\n    maxWidth: 400,\n  },\n});\n\nconst RecursiveTreeView = (props) => {\n  const classes = useStyles();\n  const { chartsIndex, division, population, value, onChange, ...restProps } = props;\n\n  const onNodeSelect = (event, value) => onChange(Number(value));\n\n  const renderTree = (nodes) => (\n    <TreeItem key={nodes.url} nodeId={`${nodes.url}`} label={nodes.name}>\n      {Array.isArray(nodes.children) ? nodes.children.map((node) => renderTree(node)) : null}\n    </TreeItem>\n  );\n\n  const {initialNode, found} = React.useMemo(\n    () => {\n      const chartData = new ChartData(chartsIndex);\n      const initialNode = chartData.findInitialNode(division, population);\n      const found = chartData.findBreadcrumb(initialNode, value).map(link => `${link.url}`);\n\n      return {initialNode, found}\n    },\n    [division,population,value,chartsIndex]\n  );\n\n  return (\n    <TreeView\n      className={classes.root}\n      defaultCollapseIcon={<ExpandMoreIcon />}\n      defaultExpandIcon={<ChevronRightIcon />}\n      expanded={ found }\n      selected={ `${value}` }\n      onNodeSelect={ onNodeSelect }\n      { ...restProps }\n    >\n      {renderTree(initialNode)}\n    </TreeView>\n  );\n}\n\nexport default RecursiveTreeView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { translate } from 'react-translate'\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport Divider from '@material-ui/core/Divider';\n\nimport ChartRegionSelector from './EditRegion';\n\n// UI-Material Styles\nconst useStyles = makeStyles((theme) => ({\n  formControl: {\n    minWidth: 120,\n  },\n  selectEmpty: {\n    marginTop: theme.spacing(2),\n  },\n  labelFixed: {\n    position: 'initial',\n    transform: 'unset',\n    marginBottom: theme.spacing(2),\n  },\n}));\n\nconst FormDecorators = (props) => {\n  const classes = useStyles();\n  const { label, help, id, children, fixTree } = props;\n  return (\n    <div style={{ \n      margin: '0 auto',\n      display: 'block',\n    }}>\n      <FormControl required className={ classes.formControl }>\n        <InputLabel className={ fixTree ? classes.labelFixed : null } htmlFor={ id }>{ label }</InputLabel>\n        { children }\n        { help ? (\n            <FormHelperText id={ `helper-text-${id}` }>\n              { help }\n            </FormHelperText>\n          ) : null \n        }\n      </FormControl>\n    </div>\n  )\n}\n\n// Renders a Select, with options from props\nconst Selector = (props) => {\n  const { label, help, id, options, ...restProps } = props;\n  return (\n    <FormDecorators\n      id={ id }\n      label={ label }\n      help={ help }\n    >\n      <Select\n        native\n        { ...restProps }\n        aria-describedby={ `helper-text-${id}` }\n        inputProps={{\n          name: label,\n          id: id,\n        }}\n      >\n        { options.map( option => (\n          <option key={ `v_${option.value}` } value={ option.value }>{ option.label }</option>\n        )) }\n      </Select>\n    </FormDecorators>\n  )\n}\n\n// Renders a Select with chart division options\nconst ChartDivisionSelector = translate('Widget/Chart/Edit')((props) => {\n  const { t, divisions, ...restProps } = props;\n  const ChartDivisionSelectorOptions = React.useMemo(\n    () => divisions\n            .map( kind => ({ value: kind, label: kind })),\n    [divisions],\n  );\n  return (\n    <Selector\n      options={ ChartDivisionSelectorOptions }\n      label={ t(\"Division\") }\n      help={ t(\"Select the division type to show\") }\n      { ...restProps }\n    />\n  )\n});\n\n// Renders a Select with chart population options\nconst ChartPopulationSelector = translate('Widget/Chart/Edit')((props) => {\n  const { t, populations, ...restProps } = props;\n  const ChartPopulationSelectorOptions = React.useMemo(\n    () => populations\n            .map( kind => ({ value: kind, label: kind })),\n    [populations],\n  );\n  return (\n    <Selector\n      label={ t(\"Population\") }\n      help={ t(\"Select the population\") }\n      options={ ChartPopulationSelectorOptions }\n      { ...restProps }\n    />\n  )\n});\n\n// Renders a Select with chart population options\nconst ChartDatasetSelector = translate('Widget/Chart/Edit')((props) => {\n  const { t, ...restProps } = props;\n  const ChartDatasetSelectorOptions = React.useMemo(\n    () => [\n      {value: 'grafic_extensio', label: t('Extensió')},\n      {value: 'grafic_risc_iepg', label: t('Risc iEPG')},\n    ],\n    [t],\n  );\n  return (\n    <Selector\n      label={ t(\"Dataset\") }\n      help={ t(\"Select the dataset\") }\n      options={ ChartDatasetSelectorOptions }\n      { ...restProps }\n    />\n  )\n});\n\n/*\n   Renders the edit form for the Map widget\n*/\nclass Edit extends React.PureComponent {\n\n  onChangeChartDivision = (event) => this.props.onChangeChartDivision(event.target.value);\n  onChangeChartPopulation = (event) => this.props.onChangeChartPopulation(event.target.value);\n  onChangeChartDataset = (event) => this.props.onChangeChartDataset(event.target.value);\n  onChangeChartRegion = (value) => this.props.onChangeChartRegion(value);\n\n  render() {\n    const {\n      chartDivision,\n      chartPopulation,\n      chartDataset,\n      chartRegion,\n      divisions,\n      populations,\n      chartsIndex,\n      t\n    } = this.props;\n\n    return (\n      <div style={{ textAlign: 'left' }}>\n        <ChartDivisionSelector\n          divisions={ divisions }\n          value={ chartDivision }\n          onChange={ this.onChangeChartDivision }\n        />\n        <Divider style={{ margin: '2em 0' }} />\n        <ChartPopulationSelector\n          populations={ populations }\n          value={ chartPopulation }\n          onChange={ this.onChangeChartPopulation }\n        />\n        <Divider style={{ margin: '2em 0' }} />\n        <ChartDatasetSelector\n          value={ chartDataset }\n          onChange={ this.onChangeChartDataset }\n        />\n        \n        <Divider style={{ margin: '2em 0' }} />\n        <FormDecorators\n          id={ 'regions-tree' }\n          label={ t(\"Region\") }\n          fixTree\n        >\n          <ChartRegionSelector\n            id={ 'regions-tree' }\n            chartsIndex={ chartsIndex }\n            division={ chartDivision }\n            population={ chartPopulation }\n            value={ chartRegion }\n            onChange={ this.onChangeChartRegion }\n          />\n        </FormDecorators>\n      </div>\n    )\n  }\n}\n\nEdit.propTypes = {\n  chartDivision: PropTypes.string.isRequired,\n  chartPopulation: PropTypes.string.isRequired,\n  chartDataset: PropTypes.string.isRequired,\n  chartRegion: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.number\n  ]).isRequired,\n  onChangeChartDivision: PropTypes.func.isRequired,\n  onChangeChartPopulation: PropTypes.func.isRequired,\n  onChangeChartDataset: PropTypes.func.isRequired,\n  onChangeChartRegion: PropTypes.func.isRequired,\n};\n\nexport default translate('Widget/Chart/Edit')(Edit);\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport {\n  faEdit,\n  faChartArea as faChart\n} from '@fortawesome/free-solid-svg-icons'\n\nimport ChartData from '../../../Backend/Charts';\n\nimport Chart from './Chart';\nimport Edit from './Edit';\nimport Loading from '../../../Loading';\nimport withWidget from '../../Widget';\n\nconst ChartWrapper = withWidget({\n  // The normal view\n  view: {\n    icon: <FontAwesomeIcon icon={ faChart } />,\n    label: ({ t }) => t(\"View\"),\n    title: (props) => props.title,\n    render: (props) => (\n      <>\n        { props.chartData === null ? (\n            <Loading />\n          ) : (\n            <Chart\n              dies={ props.days }\n              valors={ props.chartData }\n              dataset={ props.chartDataset }\n              indexValues={ props.indexValues }\n              id={ props.id }\n            />\n          )\n        }\n      </>\n    )\n  },\n  // Edit data\n  edit: {\n    icon: <FontAwesomeIcon icon={ faEdit } />,\n    label: ({ t }) => t(\"Edit\"),\n    title: ({ t }) => t(\"Edit chart parameters\"),\n    render: (props) => <Edit {...props} />,\n  },\n});\n\n/*\n   Combine ChartData backend with Chart\n*/\nclass ChartDataHandler extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    // Default values: first element of each's group\n    const { chartDivision, chartPopulation, chartRegion, chartsIndex } = props;\n\n    // TODO: Handle errors\n    this.ChartData = new ChartData(chartsIndex);\n    this.cancelDataUpdate = false;\n\n    this.state = {\n      chartData: null,\n      ...this.getMeta(chartDivision, chartPopulation, chartRegion, chartDataset, null)\n    }\n  }\n\n  // Get metadata from given params\n  getMeta = (chartDivision, chartPopulation, chartRegion, chartDataset, chartData) => {\n    if ( !chartData ) {\n      return {\n        title: '...',\n        name: '...',\n      };\n    }\n    return {\n      title: chartData[chartDataset].title,\n      name: chartData[chartDataset].title,\n    }\n  }\n\n  // Fetch map data\n  updateData = () => {\n    const { chartDivision, chartPopulation, chartRegion } = this.props;\n\n    // If there is an ongoing update, cancel the registration to it\n    if (this.cancelDataUpdate) {\n      this.cancelDataUpdate();\n    }\n\n    // Fetch JSON data and subscribe to updates\n    this.cancelDataUpdate = this.ChartData.data(\n      chartDivision,\n      chartPopulation,\n      chartRegion,\n      (chartData) => {\n        // Only update data if we didn't change chart confs in between\n        if ( chartDivision === this.props.chartDivision &&\n             chartPopulation === this.props.chartPopulation   &&\n             chartRegion === this.props.chartRegion ) {\n          this.setState({\n            chartData,\n            ...this.getMeta(chartDivision, chartPopulation, chartRegion, this.props.chartDataset, chartData),\n          });\n        }\n      });\n  }\n\n  // Ensure first data is gathered as soon as we have the component mounted\n  componentDidMount() {\n    this.updateData();\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    // If chartData is unset, gather new data\n    if( prevState.chartData !== this.state.chartData &&\n        this.state.chartData === null ) {\n      this.updateData();\n    }\n    else if (\n      // If params changed, unset chartData\n      this.props.chartDivision !== prevProps.chartDivision ||\n      this.props.chartPopulation !== prevProps.chartPopulation ||\n      this.props.chartRegion !== prevProps.chartRegion ) {\n      this.setState({\n        chartData: null\n      });\n    }\n    else if ( this.props.chartsIndex !== prevProps.chartsIndex ) {\n      // If chartsIndex changed, re-create backend with new data\n      this.ChartData = new ChartData(this.props.chartsIndex);\n      this.setState({\n        chartData: null\n      });\n    }\n  }\n\n  // Used to fix region when changing main options.\n  // TODO: Find a better way. ID by breadcrumb?\n  findRegion = (division, population, region) => {\n    const {chartsIndex} = this.props;\n    const initialNode = this.ChartData.findInitialNode(division, population);\n    const found = this.ChartData.findChild(initialNode, region);\n\n    if ( !found ) {\n      // Try to find in the other valid initialNodes (same division)\n      const nodes = chartsIndex.filter( (node) =>\n        division === node.territori &&\n        population !== node.poblacio\n      );\n      for (const node of nodes ) {\n        // Look for region in the other initialNode\n        const f1 = this.ChartData.findChild(node, region);\n        // If found, find in our initialNode for a region with the same name\n        const f2 = f1 && this.ChartData.findChild(\n          initialNode,\n          f1.name,\n          (node, name) => node.name === name);\n        // If found, use it\n        if (f2) {\n          return f2;\n        }\n      }\n\n      // Not found in valid initialNodes: default to actual initialNode's root\n      return initialNode;\n    }\n\n    // Found!\n    return found;\n  }\n\n  // Fix region if needed\n  // Also, update map metadata\n  onChangeChart = (chartDivision, chartPopulation, chartRegion, chartDataset, chartData) => {\n    this.setState({\n      ...(chartData === this.state.chartData ? {chartData} : {}),\n      ...this.getMeta(chartDivision, chartPopulation, chartRegion, chartDataset, chartData)\n    });\n    const region = this.findRegion(chartDivision, chartPopulation, chartRegion);\n    this.props.onChangeData(\n      this.props.id,\n      {\n        chartDivision,\n        chartPopulation,\n        chartDataset,\n        chartRegion: region.url\n      });\n  }\n\n  // Force data update on division change\n  onChangeChartDivision = (chartDivision) => {\n    const { chartPopulation, chartRegion, chartDataset } = this.props;\n    this.onChangeChart(chartDivision, chartPopulation, chartRegion, chartDataset, null);\n  }\n\n  // Force data update on value change\n  onChangeChartPopulation = (chartPopulation) => {\n    const { chartDivision, chartRegion, chartDataset } = this.props;\n    this.onChangeChart(chartDivision, chartPopulation, chartRegion, chartDataset, null);\n  }\n\n  // Force data update on value change\n  onChangeChartRegion = (chartRegion) => {\n    const { chartDivision, chartPopulation, chartDataset } = this.props;\n    this.onChangeChart(chartDivision, chartPopulation, chartRegion, chartDataset, null);\n  }\n\n  // Datasets are on same data object\n  onChangeChartDataset = (chartDataset) => {\n    const { chartDivision, chartPopulation, chartRegion } = this.props;\n    const { chartData } = this.state;\n    this.onChangeChart(chartDivision, chartPopulation, chartRegion, chartDataset, chartData);\n  }\n\n  render() {\n    const {\n      days,\n      indexValues,\n      id,\n      chartDivision,\n      chartPopulation,\n      chartDataset,\n      chartRegion,\n      chartsIndex\n    } = this.props; \n    const {\n      chartData, title, name\n    } = this.state;\n\n    return (\n      <div style={{\n        minWidth: '200px',\n        height: '100%',\n        paddingTop: '.3em',\n        flex: '1 1 0px',\n      }}>\n        <ChartWrapper\n          id={ id }\n          chartDivision={ chartDivision }\n          chartPopulation={ chartPopulation }\n          chartDataset={ chartDataset }\n          chartRegion={ chartRegion }\n          chartsIndex={ chartsIndex }\n          chartData={ chartData }\n          divisions={ this.ChartData.divisions }\n          populations={ this.ChartData.populations }\n          onChangeChartDivision={ this.onChangeChartDivision }\n          onChangeChartPopulation={ this.onChangeChartPopulation }\n          onChangeChartDataset={ this.onChangeChartDataset }\n          onChangeChartRegion={ this.onChangeChartRegion }\n          onRemove={ this.props.onRemove }\n          indexValues={ indexValues }\n          days={ days }\n          title={ title }\n          name={ name }\n        />\n      </div>\n    );\n  }\n}\n\n// Default values: first element of each's group\nconst chartDivision = \"REGIÓ/AGA\";\nconst chartPopulation = \"Població total\";\nconst chartRegion = 0;\nconst chartDataset = 'grafic_extensio';\n\nChartDataHandler.defaultProps = {\n  chartDivision,\n  chartPopulation,\n  chartRegion,\n  chartDataset,\n  onChangeData: () => {},\n  onRemove: () => {},\n};\n\nChartDataHandler.propTypes = {\n  days: PropTypes.arrayOf(PropTypes.string).isRequired,\n  indexValues: PropTypes.number.isRequired,\n  id: PropTypes.string.isRequired,\n  onChangeData: PropTypes.func.isRequired,\n  onRemove: PropTypes.func.isRequired,\n  chartDivision: PropTypes.string.isRequired,\n  chartPopulation: PropTypes.string.isRequired,\n  chartDataset: PropTypes.string.isRequired,\n  chartRegion: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.number\n  ]).isRequired,\n};\n\nexport default ChartDataHandler;\n","import Widget from './Widget';\n\nexport default Widget;\n","import React from 'react';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport {\n  faGlobeEurope as faMap,\n  faChartArea as faChart\n} from '@fortawesome/free-solid-svg-icons'\n\nimport MapWidget from './Map';\nimport ChartWidget from './Chart';\n\nconst WidgetsTypes = [\n  {\n    key: \"map\",\n    Component: MapWidget,\n    icon: <FontAwesomeIcon icon={ faMap } />,\n    name: \"Map\",\n  },\n  {\n    key: \"chart\",\n    Component: ChartWidget,\n    icon: <FontAwesomeIcon icon={ faChart } />,\n    name: \"Chart\",\n  },\n];\n\nexport default WidgetsTypes;\n","// KISS Throtle\n// Ensures a function is not called more than once every timeout\n// - Run is banned while timer is on\n// - Run is ensured the first time (no timer is on) and when forced (you know it's the last time). In this case, timer is also cleared\n// - A last run IS NOT ensured if you don't recall after timer is out or manually forced\n// You can manually clear the timer if you want to ensure next run\nclass Throtle {\n\n  timer = false;\n\n  // Starts Throtle timer (bans running, except if forced)\n  start(timeout) {\n    this.timer = setTimeout( this.clear, timeout);\n  }\n\n  // Clear Throtle timer (allows running)\n  clear = () => {\n    if ( this.timer !== false ) {\n      clearTimeout( this.timer );\n      this.timer = false;\n    }\n  }\n\n  // Run function, if not throtled or if force == true\n  run(force, timeout, func) {\n    if ( force ) {\n      this.clear();\n    }\n\n    if ( this.timer === false ) {\n      this.start(timeout);\n      func();\n    }\n  }\n}\n\nexport default Throtle;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { translate } from 'react-translate'\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport SliderLib from '@material-ui/core/Slider';\nimport Tooltip from '@material-ui/core/Tooltip';\n\n// Magic for Play/Pause button\nimport './Slider.scss';\n\n// Use special non-intrusive zIndex for the Slider tooltip\nconst useStyles = makeStyles((theme) => ({\n  popper: {\n    zIndex: 1200\n  },\n  tooltip: {\n    fontSize: '1rem',\n  },\n}));\n\n// Component to render the label's value\nconst ValueLabelComponent = (props) => {\n  const { children, open, value } = props;\n  const classes = useStyles();\n\n  return (\n    <Tooltip\n      open={ open }\n      enterTouchDelay={ 0 }\n      placement=\"bottom\"\n      title={ value }\n      classes={{\n        popper: classes.popper,\n        tooltip: classes.tooltip,\n      }}\n      arrow\n    >\n      { children }\n    </Tooltip>\n  );\n}\n\nValueLabelComponent.propTypes = {\n  children: PropTypes.node.isRequired,\n  open: PropTypes.bool.isRequired,\n  value: PropTypes.node.isRequired,\n};\n\n// Render the Play/Pause button next to the Slider\nclass PlayPauseButtonUntranslated extends React.PureComponent {\n  onChange = () => {\n    if ( this.props.isPlaying ) {\n      this.props.onPause();\n    }\n    else {\n      this.props.onPlay();\n    }\n  }\n\n  // All the magic is done into the SCSS file Slider.sccs ;)\n  render() {\n    const { className, t } = this.props;\n    return (\n      <Tooltip title={ t(\"Toggle play status\") } aria-label={ !this.props.isPlaying ? t(\"play\") : t(\"pause\") }>\n        <div className={ `playpause ${className || ''}` }>\n          <input\n            type=\"checkbox\"\n            id=\"playpause\"\n            name=\"check\"\n            checked={ !this.props.isPlaying }\n            onChange={ this.onChange }\n            aria-label={ t(\"Toggle play status\") }\n          />\n          <label\n            htmlFor=\"playpause\"\n            style={{ borderLeftColor: '' }}\n          />\n        </div>\n      </Tooltip>\n    )\n  }\n}\n\n// Translate Play/Pause component\nconst PlayPauseButton = translate('PlayPause')(PlayPauseButtonUntranslated);\n\n/*\n   Renders a Slider with a play/pause button next to it, inside a\n   sticky container at the top of the page\n*/\nclass Slider extends React.PureComponent {\n\n  state = {\n    isPlaying: false\n  }\n\n  timer = false;\n\n  onPause = () => {\n    this.clearTimer();\n    this.setState({ isPlaying: false });\n  }\n\n  onPlay = () => {\n    this.setTimer();\n    this.setState({ isPlaying: true });\n  }\n\n  // TODO: Allow changing the timeout/speed\n  setTimer = () => {\n    this.clearTimer();\n    this.timer = setTimeout(this.updatePlay, 40);\n  }\n\n  clearTimer = () => {\n    if ( this.timer ) {\n      clearTimeout(this.timer);\n      this.timer = false;\n    }\n  }\n\n  updatePlay = () => {\n    this.props.onChange(\n      {}, // event\n      this.props.value < this.props.max - 1\n        ? this.props.value + 1\n        : 0\n    );\n    this.setTimer();\n  }\n\n  componentWillUnmount() {\n    // Cancel timer if is active\n    this.clearTimer();\n  }\n\n  render() {\n    const { isPlaying } = this.state;\n    const { classes = {}, ...restProps } = this.props;\n    const { playPause, ...restClasses } = classes;\n    return (\n      <>\n        <SliderLib\n          ValueLabelComponent={ ValueLabelComponent }\n          step={ 1 }\n          min={ 0 }\n          classes={{ ...restClasses }}\n          { ...restProps }\n        />\n        <PlayPauseButton\n           className={ playPause }\n           onPlay={ this.onPlay }\n           onPause={ this.onPause }\n           isPlaying={ isPlaying }\n        />\n      </>\n    )\n  }\n}\n\nexport default Slider;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport clsx from 'clsx';\n\nimport { withStyles, useTheme } from '@material-ui/core/styles';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport Grid from '@material-ui/core/Grid';\nimport Paper from '@material-ui/core/Paper';\n\nimport MenuAddWidget from './MenuAddWidget';\nimport WidgetsTypes from './Widgets';\nimport MapData from '../Backend/Maps';\nimport ChartData from '../Backend/Charts';\n\nimport Throtle from '../Throtle';\nimport Slider from '../Slider';\nimport Loading from '../Loading';\n\nimport WidgetDataContextProvider from './DataContextProvider'; \nimport withPropHandler from './withPropHandler';\n\n// GUID generator: used to create unique dtemporal IDs for widgets\nconst S4 = () => (((1+Math.random())*0x10000)|0).toString(16).substring(1);\nconst guidGenerator = () => \"a-\"+S4()+S4()+\"-\"+S4()+\"-\"+S4()+\"-\"+S4()+\"-\"+S4()+S4()+S4();\n\n// UI Material styles/classes\nconst useStyles = (theme) => ({\n  appBarSpacer: theme.mixins.toolbar,\n  widgetsContainer: {\n    zIndex: 10,\n    width: '100%',\n    margin: 0,\n  },\n  paper: {\n    padding: theme.spacing(2),\n    display: 'flex',\n    overflow: 'auto',\n    flexDirection: 'column',\n  },\n  fixed: {\n    position: 'sticky',\n    top: 0,\n    zIndex: 1200,\n    padding: 0,\n    // Not using it, adds a scrolling slider to the container on some screens\n    paddingBottom: 1,\n  },\n  sliderContainer: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    marginTop: theme.spacing(1),\n    marginBottom: theme.spacing(.5),\n    marginLeft: theme.spacing(1),\n    marginRight: theme.spacing(1),\n    // Marks labels not shown under 'md'\n    [theme.breakpoints.up('md')]: {\n      marginBottom: theme.spacing(1),\n      alignItems: 'flex-start',\n    },\n    // This is for non-mouse pointers, which need some extra space for usability\n    // Not using it, adds a scrolling slider to the container on some screens\n    // eslint-disable-next-line no-useless-computed-key\n    ['@media (pointer: coarse)']: {\n      [theme.breakpoints.up('md')]: {\n        marginTop: theme.spacing(.5),\n        paddingBottom: theme.spacing(1),\n      },\n      [theme.breakpoints.down('sm')]: {\n        paddingBottom: theme.spacing(.1),\n      },\n    }\n  },\n  // Add some lateral space for the slider on larger displays\n  sliderRoot: {\n    [theme.breakpoints.up('md')]: {\n      marginLeft: theme.spacing(4),\n      marginRight: theme.spacing(4),\n    },\n    [theme.breakpoints.down('md')]: {\n      marginLeft: theme.spacing(3),\n      marginRight: theme.spacing(3),\n    },\n  },\n  // Save some space in buttons for small devices\n  addButton: {\n    padding: 0,\n    fontSize: theme.spacing(4),\n    boxShadow: '3px 3px 5px 2px rgba(100, 100, 100, .3)',\n    borderRadius: 3,\n    [theme.breakpoints.up('md')]: {\n      fontSize: theme.spacing(6),\n    },\n  },\n  // Play/pause button uses special CSS, so it does the font sizing\n  playPause: {\n    fontSize: theme.spacing(4/2),\n    [theme.breakpoints.up('md')]: {\n      fontSize: theme.spacing(6/2),\n    },\n  },\n});\n\n// Renders widgets list\n// - Manages days list (using backend) and current selected day with a Slider\n// - Receives managed plugins params from props (with context providers and consumer)\n// - Receives Widgets param modification events and calls parents param event\n//   handlers callbacks with processed data:\n//   - Add\n//   - Edit\n//   - Remove\n// - Blindly (with `payload`) handles different types of widgets depending on passed/saved\n//   params from URL and localStorage\nclass WidgetsList extends React.PureComponent {\n\n  // Managed data: days & currently selected day\n  state = {\n    days: null,\n    chartsIndex: null,\n    current: null,\n    marks: [],\n    marksSmall: [],\n  }\n\n  // Widgets list temporal IDs\n  // Used to maintain widget uniqueness during a session\n  widgetsIds = [];\n\n  // Used in the slider to prevent blocking the UI\n  // with excessive calls on mouse move\n  throtle = new Throtle();\n\n  // Map Data backend\n  // TODO: Handle errors\n  MapData = new MapData();\n\n  // Chart Data backend\n  // TODO: Handle errors\n  ChartData = new ChartData();\n\n  constructor(props) {\n    super(props);\n    // Generate initial list of unique IDs\n    if ('widgets' in props) {\n      this.updateIDs(props.widgets.length);\n    }\n  }\n\n  // Fetch data once mounted\n  componentDidMount() {\n    this.MapData.days(\n      days => {\n        // Are we on the last time serie element before update?\n        const isLast =\n          !this.state.current ||\n          !this.state.days ||\n          this.state.current === this.state.days.length - 1;\n\n        // Marks on the slider\n        const marks = days\n          // Remember index\n          .map( (day, index) => ({day, index}))\n          // Get first day of each month\n          .filter( ({day, index}) => /^0?1\\//.test(day) )\n          // Map to Slider marks schema and remove initial `0`\n          .map( ({day, index}) => ({ value: index, label: day.replace(/^0/, '') }) );\n\n        this.setState({\n          days,\n\n          // Marks on the slider (small devices: no labels)\n          marks,\n          marksSmall: marks.map( ({value}) => ({value})),\n\n          // If we were on last item, go to the new last\n          ...(isLast ? {current: days.length - 1} : {}) \n        });\n\n        // Once data has been fetched, schedule next data update\n        // Mind the timer on unmount\n        this.MapData.scheduleNextUpdate();\n      });\n    this.ChartData.index(\n      chartsIndex => {\n\n        this.setState({ chartsIndex });\n\n        // Once data has been fetched, schedule next data update\n        // Mind the timer on unmount\n        this.ChartData.scheduleNextUpdate();\n      });\n  }\n\n  // Cleanup side effects\n  componentWillUnmount() {\n    // Cancel next update timers\n    this.MapData.cancelUpdateSchedule();\n    this.ChartData.cancelUpdateSchedule();\n\n    // Cancel possible throtle timer\n    this.throtle.clear();\n  }\n\n  componentDidUpdate() {\n    this.updateIDs(this.props.widgets.length);\n  }\n\n  // Ensure all widgets have ID\n  updateIDs = (length) => {\n    while ( this.widgetsIds.length < length ) {\n      this.widgetsIds.push( guidGenerator() );\n    }\n  }\n\n  // Slider helpers\n  onSetDate = (event, current) => this.throtle.run(false, 10, () => this.setState({ current }) );\n  sliderTipFormatter = value => this.state.days[value];\n\n  // Adds a new default widget to the list\n  onAdd = (widgetType) => {\n    const widgets = [...this.props.widgets];\n    widgets.push({ type: widgetType??'map' });\n    this.updateIDs(widgets.length);\n    return this.props.onChangeData({ widgets });\n  }\n\n  // Handle onRemove event from widget\n  // Uses `this.widgetsIDs` for widget identification\n  // Calls parent' onChangeData to save the data\n  onRemove = id => {\n    const widgets = this.props.widgets.filter( (w,index) => this.widgetsIds[index] !== id);\n    this.widgetsIds = this.widgetsIds.filter( idElement => idElement !== id);\n    return this.props.onChangeData({ widgets });\n  }\n\n  // Handle onChangeData event from widget\n  // Calls parent' onChangeData to save the data\n  onChangeData = (id, data) => {\n    const { widgets } = this.props;\n    const widgetsNew = widgets.map( (w,i) => ({ ...w, ...(id === this.widgetsIds[i] ? {payload: data} : {} ) }) )\n    return this.props.onChangeData({ widgets: widgetsNew });\n  }\n\n  render() {\n\n    // KISS Loading\n    if ( !this.state.days || !this.state.chartsIndex ) {\n      return <Loading />;\n    }\n\n    const { widgets, classes, showMarkLabels } = this.props;\n    const { days, chartsIndex, current, marks, marksSmall } = this.state;\n    const fixedPaper = clsx(classes.paper, classes.fixed);\n\n    return (\n      <>\n        <Paper className={ fixedPaper } elevation={ 2 }>\n          {/* Space used by the App Bar fixed positioned */}\n          <div className={ classes.appBarSpacer } />\n          {/*\n          <Container maxWidth=\"lg\" className={classes.container}>\n            <h3>HELLO WORLD!</h3>\n          </Container>\n          */}\n\n          <div className={ classes.sliderContainer } >\n\n            {/* Add an item */}\n            <MenuAddWidget\n              onAdd={ this.onAdd }\n              className={ classes.addButton }\n              options={ WidgetsTypes }\n            />\n\n            {/* Days display & Current manager */}\n            <Slider\n              classes={{ root: classes.sliderRoot, playPause: classes.playPause }}\n              max={ days.length - 1 }\n              value={ current || 0 }\n              onChange={ this.onSetDate }\n              valueLabelFormat={ this.sliderTipFormatter }\n              getAriaValueText={ this.sliderTipFormatter }\n              // Marks without labels for small screens\n              marks={ showMarkLabels ? marks : marksSmall }\n              // Always visible on small screens\n              valueLabelDisplay={ showMarkLabels ? null : \"on\" }\n            />\n          </div>\n        </Paper>\n\n        {/* Widgets container */}\n        <Grid container spacing={3} className={classes.widgetsContainer}>\n          {/* Widgets list */}\n          { widgets.map( (widget, index) => {\n              const { Component } = WidgetsTypes.find(w => w.key === widget.type );\n              return (\n                <Grid item xs={12} sm={6} md={4} lg={3} key={ this.widgetsIds[index] }>\n                  <Component\n                    id={ this.widgetsIds[index] }\n                    key={ this.widgetsIds[index] }\n                    days={ days }\n                    chartsIndex={ chartsIndex }\n                    indexValues={ current }\n                    onChangeData={ this.onChangeData }\n                    onRemove={ this.onRemove }\n                    { ...widget.payload }\n                  />\n                </Grid>\n              )\n            })\n          }\n        </Grid>\n      </>\n    );\n  }\n}\n\nWidgetsList.propTypes = {\n  widgets: PropTypes.array.isRequired,\n  onChangeData: PropTypes.func.isRequired,\n};\n\n// Get showMarkLabels prop using MediaQuery\n// Used to prevent showing mark labels on small screens\nconst withShowMarkLabels = (Component) => {\n  return (props) => {\n    const theme = useTheme();\n    const showMarkLabels = useMediaQuery(theme.breakpoints.up('md'));\n    return <Component { ...props } { ...{ showMarkLabels } } />\n  }\n};\n\n// withPropHandler: Handle params from providers (route + localStorage) into props\n// withStyles: Add `classes` prop for styling components\n// withShowMarkLabels: Add `showMarkLabels` breakpoint to sho/hide Slider mark labels depending on sreen size\nconst WidgetsListWithPropHandler =\n  withPropHandler(\n    withStyles(useStyles)(\n      withShowMarkLabels(\n        WidgetsList\n  )));\n\n// Manage some context providers details:\n// - pathFilter: How to split `location` (Route `path` prop)\n// - paramsFilter: Parse `location` parts defined ^\n// - paramsToString: Parse back a JS object into a `location` path\nconst WidgetsListWithContextProviders = (props) => (\n  <WidgetDataContextProvider\n    pathFilter={ '/:widgets*' }\n    paramsFilter={ (params) => {\n      const { widgets } = params;\n      let widgetsParsed;\n\n      try {\n        widgetsParsed = widgets.split('/').map( w => JSON.parse( decodeURIComponent(w) ) );\n      } catch(err) {\n        widgetsParsed = [];\n      }\n\n      return Object.assign({}, props, {\n        widgets: widgetsParsed\n      });\n    }}\n    paramsToString={ (params) => {\n      const widgets = params.widgets.map(\n        w => encodeURIComponent( JSON.stringify({ type: w.type, payload: w.payload }) )\n      ).join('/');\n      return `/${widgets}`\n    }}\n  >\n    <WidgetsListWithPropHandler { ...props } />\n  </WidgetDataContextProvider>\n);\n\nexport default WidgetsListWithContextProviders;\n","import React from 'react';\n\nimport { translate } from 'react-translate'\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport {\n  faInfoCircle as faAbout,\n} from '@fortawesome/free-solid-svg-icons'\n\nclass About extends React.Component {\n  render() {\n    const { t } = this.props;\n    return (\n      <>\n        <h1 id=\"modal_heading\">\n          <FontAwesomeIcon icon={ faAbout } style={{ marginRight: '.5em' }} />\n          { t(\"About\") }\n        </h1>\n        <div id=\"modal_description\" style={{ textAlign: 'left' }}>\n          <p>\n            { t(\"This applications displays public information extracted from the official web\") }{' '}\n            <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://dadescovid.cat\">https://dadescovid.cat</a>\n            .\n          </p>\n          <p>\n            { t(\"The aim of this application is to display the data in different ways than the original, improving performance and adding more value to it.\") }\n          </p>\n\n          <h3>{ t(\"Want more information?\") }</h3>\n          <p><a target='_blank' rel=\"noopener noreferrer\" href='https://github.com/emibcn/covid'>{ t(\"The source code is publicly available.\") }</a>{' '}\n          { t(\"There, you can find more information about how it has been done, licence and credits.\") }</p>\n\n          <h3>{ t(\"Found a bug? Have a petition? Want to help somehow?\") }</h3>\n          <p><a target='_blank' rel=\"noopener noreferrer\" href='https://github.com/emibcn/covid/issues'>{ t(\"Create an issue at GitHub.\") }</a></p>\n\n          <h3>{ t(\"Licenses\") }</h3>\n          <p>\n            { t(\"The application, scripts and documentation in\") }{' '}\n            <a target='_blank' rel=\"noopener noreferrer\" href='https://github.com/emibcn/covid'>{ t(\"this project\") }</a>{' '}\n            { t(\"are released under the\") }{' '}\n            <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/emibcn/covid/blob/master/LICENSE\">GNU General Public License v3.0</a>\n            .\n          </p>\n          <p>\n            { t(\"The scripts and documentation published in\") }{' '}\n            <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/emibcn/covid-data/\">covid-data</a>{' '}\n            { t(\"are also released under the\") }{' '}\n            <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/emibcn/covid/blob/master/LICENSE\">GNU General Public License v3.0</a>\n            .\n          </p>\n          <p>\n            { t(\"The data scrapped and published in\") }{' '}\n            <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/emibcn/covid-data/\">covid-data</a>{' '}\n            { t(\"is licensed by their owner, the\") }{' '}<em>Generalitat de Catalunya</em>\n            { t(\", under their own conditions (\") }\n            <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"http://opendatacommons.org/licenses/by/1.0/\">Open Data Commons Attribution License</a>\n            { t(\", until now).\") }{' '}\n            { t(\"See more at the\") }{' '}\n            <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://analisi.transparenciacatalunya.cat/Salut/Dades-setmanals-de-COVID-19-per-comarca/jvut-jxu8\">{ t(\"dataset API documentation\") }</a>\n            .\n          </p>\n\n        </div>\n      </>\n    )\n  }\n}\n\nexport default translate('About')(About);\n","import React from \"react\";\n\nimport { translate } from \"react-translate\";\nimport Radio from \"@material-ui/core/Radio\";\nimport RadioGroup from \"@material-ui/core/RadioGroup\";\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faLanguage } from \"@fortawesome/free-solid-svg-icons\";\nimport available from \"./i18n/available\";\n\nclass Language extends React.Component {\n  render() {\n    const { t, language, onLanguageChange } = this.props;\n\n    const filteredLanguages = available.reduce((languages, current) => {\n      if (!languages.find((item) => item.label === current.label)) {\n        return languages.concat([current]);\n      } else {\n        return languages;\n      }\n    }, []);\n\n    return (\n      <>\n        <h1 id=\"modal_heading\">\n          <FontAwesomeIcon icon={faLanguage} style={{ marginRight: \".5em\" }} />\n          {t(\"Language\")}\n        </h1>\n        <div>\n          <FormControl component=\"fieldset\">\n            <RadioGroup\n              aria-label=\"language\"\n              name=\"language\"\n              value={language}\n              onChange={(e) => onLanguageChange(e.target.value)}\n            >\n              {filteredLanguages.map((ele, index) => (\n                <FormControlLabel\n                  key={index}\n                  value={ele.key}\n                  control={<Radio />}\n                  label={ele.label}\n                />\n              ))}\n            </RadioGroup>\n          </FormControl>\n        </div>\n      </>\n    );\n  }\n}\n\nexport default translate(\"Language\")(Language);\n","import React from 'react';\nimport { Route } from 'react-router-dom';\n\nimport clsx from 'clsx';\nimport { translate } from 'react-translate'\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport { createMuiTheme, ThemeProvider } from '@material-ui/core/styles';\nimport Box from '@material-ui/core/Box';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport Container from '@material-ui/core/Container';\nimport Link from '@material-ui/core/Link';\nimport MenuIcon from '@material-ui/icons/Menu';\n/*\nimport Badge from '@material-ui/core/Badge';\nimport NotificationsIcon from '@material-ui/icons/Notifications';\n*/\n\nimport Menu from './Menu';\nimport ModalRouter from './ModalRouter';\nimport ErrorCatcher from './ErrorCatcher';\nimport About from './About';\nimport Language from './Language';\n\nconst withErrorCatcher = (origin, component) => <ErrorCatcher {...{ origin , key: origin }}>{ component }</ErrorCatcher>;\n\nconst Copyright = translate('Copyright')((props) => {\n  const { t } = props;\n  return (\n    <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\n      {'Copyright © '}\n      <Link color=\"inherit\" href=\"https://github.com/emibcn/covid\">\n        { t(\"Source code of:\") }{' '}\n        <em>\n          { t(\"Covid Data\") }{' '}\n          <code>{ t(\"Refactored\") }</code>\n        </em>\n      </Link>{' '}\n      {new Date().getFullYear()}\n      {'.'}\n    </Typography>\n  );\n});\n\nconst AppThemeProvider = (props) => {\n  const prefersDarkMode = useMediaQuery('(prefers-color-scheme: dark)');\n  const { type, children } = props;\n\n  const theme = React.useMemo(\n    () =>\n      createMuiTheme({\n        palette: {\n          type: type ?\n                  type :\n                  prefersDarkMode ?\n                    'dark' :\n                    'light',\n        },\n      }),\n    [prefersDarkMode, type],\n  );\n\n  return (\n    <ThemeProvider theme={ theme }>\n      <CssBaseline />\n      { children }\n    </ThemeProvider>\n  );\n}\n\nconst drawerWidth = 240;\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: 'flex',\n  },\n  toolbar: {\n    paddingRight: 24, // keep right padding when drawer closed\n  },\n  appBar: {\n    zIndex: theme.zIndex.drawer + 1,\n    transition: theme.transitions.create(['width', 'margin'], {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen,\n    }),\n  },\n  appBarShift: {\n    marginLeft: drawerWidth,\n    width: `calc(100% - ${drawerWidth}px)`,\n    transition: theme.transitions.create(['width', 'margin'], {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.enteringScreen,\n    }),\n  },\n  menuButton: {\n    marginRight: 36,\n  },\n  menuButtonHidden: {\n    display: 'none',\n  },\n  title: {\n    flexGrow: 1,\n  },\n  content: {\n    flexGrow: 1,\n    height: '100vh',\n    overflow: 'auto',\n  },\n  container: {\n    paddingTop: theme.spacing(4),\n    paddingBottom: theme.spacing(4),\n  },\n}));\n\nconst RoutesModal = (props) => {\n  const { language, onLanguageChange } = props.routeProps;\n  return (\n    <ModalRouter force={ false } >\n      <Route\n        exact\n        path='about'\n        render={ props => withErrorCatcher('About', <About />) }\n      />\n      <Route\n        exact\n        path=\"language\"\n        render={(props) =>\n          withErrorCatcher(\n            \"Language\",\n            <Language language={language} onLanguageChange={onLanguageChange} />\n          )\n        }\n      />\n    </ModalRouter>\n  )\n};\n\nconst Dashboard = (props) => {\n  const classes = useStyles();\n  const { children, theme, t, ...restProps } = props;\n  const [open, setOpen] = React.useState(false);\n\n  const handleDrawerOpen = () => {\n    setOpen(true);\n  };\n  const handleDrawerClose = () => {\n    setOpen(false);\n  };\n\n  return (\n    <AppThemeProvider type={ theme } >\n      <RoutesModal routeProps={props} />\n      <div id=\"root\" className={classes.root}>\n        <AppBar position=\"absolute\" className={clsx(classes.appBar, open && classes.appBarShift)}>\n          <Toolbar className={classes.toolbar}>\n            <IconButton\n              edge=\"start\"\n              color=\"inherit\"\n              aria-label=\"open menu\"\n              onClick={handleDrawerOpen}\n              className={clsx(classes.menuButton, open && classes.menuButtonHidden)}\n            >\n              <MenuIcon />\n            </IconButton>\n            <Typography component=\"h1\" variant=\"h6\" color=\"inherit\" noWrap className={classes.title}>\n              { t(\"Covid Data\") }{' '}\n              <code>{ t(\"Refactored\") }</code>\n            </Typography>\n            {/*\n            <IconButton color=\"inherit\">\n              <Badge badgeContent={4} color=\"secondary\">\n                <NotificationsIcon />\n              </Badge>\n            </IconButton>\n            */}\n          </Toolbar>\n        </AppBar>\n        <Menu { ...{ handleDrawerOpen, handleDrawerClose, open } } { ...restProps } />\n        <main className={classes.content}>\n          { children }\n          <Container maxWidth=\"lg\" className={classes.container}>\n            <Box pt={4}>\n              <Copyright />\n            </Box>\n          </Container>\n        </main>\n      </div>\n    </AppThemeProvider>\n  );\n}\n\nexport default translate('Widget')(Dashboard);\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\n// Callback to call when user accepts loading new service worker\n// - Send message to SW to trigger the update\n// - Once updated, reload this window to load new assets\nconst updateSW = (registration) => {\n  if ( registration.waiting ) {\n\n    // When the user asks to refresh the UI, we'll need to reload the window\n    let preventDevToolsReloadLoop;\n    navigator.serviceWorker.addEventListener('controllerchange', (event) => {\n\n      // Ensure refresh is only called once.\n      // This works around a bug in \"force update on reload\".\n      if (preventDevToolsReloadLoop) {\n        return;\n      }\n\n      preventDevToolsReloadLoop = true;\n      console.log('Controller loaded');\n      global.location.reload(true);\n    });\n\n    // Send a message to the new serviceWorker to activate itself\n    registration.waiting.postMessage('skipWaiting');\n  }\n};\n\n\n// Render the App\nReactDOM.render(\n  <React.StrictMode>\n    <App onLoadNewServiceWorkerAccept={ updateSW } />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.register({\n\n  // When new ServiceWorker is available, trigger an event on `document`,\n  // passing `registration` as extra data\n  onUpdate: registration => {\n    const event = new CustomEvent('onNewServiceWorker', { detail: { registration } });\n    document.dispatchEvent(event);\n  }\n\n});\n"],"sourceRoot":""}